## Server Changes

The backend has been fully implemented to support the companion system and tactical missions. Here's what was added:

### New Models (`src/models/`)

1. **companion.model.ts** - Guild Wars 1 style Henchmen and Heroes
   - `CompanionTemplate`: Base definitions for all companions
   - `CompanionInstance`: Runtime companion state with health, energy, AI settings
   - `PartyComposition`: Player + up to 3 companions party structure
   - 18 Henchmen templates (6 per faction: Imperial, Tau, Ork)
   - 7 Hero templates (unlockable through quests)
   - Companion roles: Tank, Healer, DPS, Support, Control

2. **mission.model.ts** - Tactical mission system with wave-based combat
   - `ThreatTier` enum: Minoris (white), Majoris (blue), Extremis (yellow), Terminus (purple), Apex (gold)
   - `TacticalMission`: Multi-phase mission structure with checkpoints
   - `WaveComposition`: Enemy spawning configurations
   - `MissionInstance`: Runtime mission state
   - Difficulty modifiers: Story, Normal, Hard, Veteran, Nightmare
   - Sample missions with 3-phase structure

### New Services (`src/services/`)

1. **companion.service.ts** - Party management
   - `getAvailableHenchmen()`: Zone-appropriate companions
   - `addHenchman()/addHero()`: Add to party (max 4 total)
   - `updateHeroSkillBar()`: Customize hero skills
   - `updateCompanionStance()`: Aggressive/Defensive/Passive/Guard
   - `resurrectCompanion()`: Revive at 25% health
   - `getPartyCombatData()`: Full party state for instances

2. **mission.service.ts** - Mission management
   - `startMission()`: Create instance with difficulty modifiers
   - `spawnNextWave()`: Wave-based enemy spawning
   - `onEnemyDeath()`: Track kills, update objectives, trigger next waves
   - `damageEnemy()`: Apply damage and check for kills
   - `calculateMissionRewards()`: XP, currency, bonus objectives

### New API Routes (`src/api/`)

1. **companion.api.ts** (`/api/v1/companions`)
   - `GET /henchmen/:zoneId` - Available henchmen for zone
   - `GET /heroes` - Unlocked heroes for account
   - `GET /party/:characterId` - Current party composition
   - `POST /party/:characterId/henchman` - Add henchman
   - `POST /party/:characterId/hero` - Add hero
   - `DELETE /party/:characterId/:companionId` - Remove companion
   - `PUT /party/:characterId/:companionId/stance` - Change stance

2. **mission.api.ts** (`/api/v1/missions`)
   - `GET /` - Available missions for faction/level
   - `GET /:missionId` - Mission details
   - `POST /:missionId/start` - Start mission instance
   - `GET /instance/:instanceId` - Mission state
   - `POST /instance/:instanceId/damage` - Damage enemy
   - `POST /instance/:instanceId/complete` - Finish mission

### Combat Validation
The existing `combat.service.ts` already has robust validation:
- Global cooldown (750ms)
- Skill-specific cooldowns
- Energy cost checking
- Position validation for moves
- Rate limiting per client
- Target type resolution (self, enemy, ally, AoE)

DECISION: implementation_complete