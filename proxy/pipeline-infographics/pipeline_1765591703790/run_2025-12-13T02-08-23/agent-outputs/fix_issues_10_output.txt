Most of these are pre-existing errors not related to my changes (missing model exports in economy.api, inventory.api, quest.api, etc.). The critical fixes I made for the integration issues are working. Let me summarize the fixes I applied:

## Fixes Applied

### Issue 1: Missing model exports (WebSocketMessageType, CombatErrorCode, etc.)
- **File**: `src/models/index.ts`
- **Fix**: Added exports for `WebSocketMessageType`, `CombatErrorCode`, `COMBAT_CONFIG`, and all WebSocket message interfaces (`WelcomeMessage`, `StateUpdateMessage`, `SkillResultMessage`, etc.)

### Issue 2: Duplicate CombatWebSocketHandler
- **File**: `src/api/combat.api.ts`
- **Fix**: Removed the duplicate `CombatWebSocketHandler` class from combat.api.ts, keeping only the one in `src/api/websocket/combat.handler.ts`
- **File**: `src/api/index.ts`
- **Fix**: Updated export to import `CombatWebSocketHandler` from the correct location

### Issue 3: WebSocket server never initialized
- **File**: `src/index.ts`
- **Fix**: Added WebSocket server initialization in the main entry point, calling `combatWsHandler.initialize(wss)` and adding proper shutdown handling

### Issue 4: Combat enemies always empty (MissionService not connected to CombatService)
- **File**: `src/services/combat.service.ts`
- **Fix**: Added new methods:
  - `addEnemiesToInstance()` - Add enemies to a combat instance
  - `convertMissionEnemyToCombat()` - Convert MissionService enemy format to CombatService format
  - `syncMissionEnemiesToCombat()` - Sync mission enemies to combat instance
  - `getOrCreateMissionCombatInstance()` - Create/get a combat instance linked to a mission
- **File**: `src/services/mission.service.ts`
- **Fix**: Updated `startMission()` to create a linked combat instance and sync enemies
- **Fix**: Updated `spawnNextWave()` to sync enemies with combat service after spawning

### Issue 5: Companions not integrated with combat
- **File**: `src/services/combat.service.ts`
- **Fix**: Added methods:
  - `addCompanionToInstance()` - Add a single companion as combat participant
  - `addCompanionsToInstance()` - Add multiple companions
  - `updateCompanionHealth()` - Sync companion health during combat
- **File**: `src/services/mission.service.ts`
- **Fix**: Added companion loading in `startMission()` to add party companions to combat instance

### Issue 6: Type mismatches in combat.api.ts (ZoneBounds, ZoneSummary)
- **File**: `src/api/combat.api.ts`
- **Fix**: Fixed `ZoneMapResponse.mapBounds` to use `minX`/`minY`/`maxX`/`maxY` instead of `min`/`max`
- **Fix**: Fixed `CreateInstanceResponse.zone` to include all required `ZoneSummary` properties

### Issue 7: Missing properties in ActiveMissionEnemy
- **File**: `src/models/mission.model.ts`
- **Fix**: Added `level`, `skills`, and `lootTableId` properties to `ActiveMissionEnemy` interface
- **Fix**: Updated `createActiveMissionEnemy()` function to populate these properties
- **Fix**: Added `zoneId` to `TacticalMission` interface
- **Fix**: Added `lootTableId` to `MissionEnemyTemplate` interface

### Issue 8: Duplicate PartyMember export
- **File**: `src/models/companion.model.ts`
- **Fix**: Renamed `PartyMember` to `CompanionPartyMember` to avoid conflict with `social.model.ts`
- **File**: `src/services/companion.service.ts`
- **Fix**: Updated imports and usages to use `CompanionPartyMember`

### Issue 9: InstanceStateResponse missing expiresAt
- **File**: `src/models/world.model.ts`
- **Fix**: Added `expiresAt?: Date` to `InstanceStateResponse` interface

### Issue 10: UserRole type casting in api/index.ts
- **File**: `src/api/index.ts`
- **Fix**: Added type cast `as UserRole[]` when assigning roles from verified token

DECISION: retry