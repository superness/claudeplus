## Fixes Applied

### Issue 1: Test timeout - "enemy can be killed by repeated damage"
- **File**: `/mnt/c/github/40kgw/output/client/tests/combat.spec.ts`
- **Fix**: Rewrote the test to execute the entire attack loop inside a single `page.evaluate()` call instead of making multiple round-trips between Playwright and the browser. This eliminates the latency from ~50 individual browser context switches. Also reduced frame wait from 30 to 10 frames per iteration and increased max iterations to 100 to ensure the enemy dies.

### Issue 2: Target switching fails - "multiple enemies can be spawned and targeted"
- **File**: `/mnt/c/github/40kgw/output/client/tests/combat.spec.ts`
- **Fix**: Rewrote the test to perform all operations (spawning, selecting, waiting for cooldown, attacking, checking health) inside a single `page.evaluate()` call. The original test had race conditions where:
  1. Enemy selection in one `evaluate()` call might not persist to the next
  2. Cooldown checks and skill usage were in separate calls, creating timing gaps
  
  The new implementation:
  - Spawns all enemies first
  - For each enemy: select → wait for selection → get initial health → wait for skill cooldown → use skill → wait for damage → check health
  - Returns detailed results showing which enemies were damaged
  - Includes a 2-frame wait after selection to ensure it's processed before attacking

DECISION: retry