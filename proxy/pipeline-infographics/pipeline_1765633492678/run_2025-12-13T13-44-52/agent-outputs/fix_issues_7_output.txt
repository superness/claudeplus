## Fixes Applied

### Issue 1: Enemies do not fight back (CRITICAL)
- **File**: `/mnt/c/github/40kgw/output/client/src/game/entities/EnemyAI.ts` (NEW FILE)
- **Fix**: Created complete Enemy AI system with:
  - AI behavior types: AGGRESSIVE, DEFENSIVE, SUPPORT, FLANKING, SWARM
  - Target selection based on behavior type (e.g., aggressive enemies prioritize player, flanking enemies target low-health companions)
  - Attack range detection (melee vs ranged based on faction/unit type)
  - Attack cooldown system (1.5 second attack interval)
  - Flee behavior for cowardly units (Gretchin, Rippers, lone Cultists)
  - Movement AI to chase targets

### Issue 2: Enemy class missing AI integration
- **File**: `/mnt/c/github/40kgw/output/client/src/game/entities/Enemy.ts`
- **Fix**: Added:
  - EnemyAI import and instance creation in constructor
  - `updateAI(deltaTime, context)` method to run AI decisions
  - `getAI()` accessor for aggro management
  - `getBaseDPS()` for damage calculation
  - `setTargetPosition()` for AI-controlled movement
  - `faceTarget()` for turning towards targets

### Issue 3: EntityManager not updating enemy AI
- **File**: `/mnt/c/github/40kgw/output/client/src/game/entities/EntityManager.ts`
- **Fix**: Added:
  - Enemy attack callback type and player/companion reference interfaces
  - `setOnEnemyAttack()`, `setPlayerRef()`, `setCompanionRefs()` methods
  - `buildAIContext()` to provide targeting info to enemy AI
  - `executeEnemyAIDecision()` to process AI attack/move/flee decisions
  - Updated `update()` method to call AI for each alive enemy

### Issue 4: CombatManager missing enemy attack handler
- **File**: `/mnt/c/github/40kgw/output/client/src/combat/CombatManager.ts`
- **Fix**: Added `handleEnemyAttack()` method that:
  - Applies damage to player (with 20% base armor reduction) or companion (15% reduction)
  - Fires combat events for floating damage numbers
  - Logs combat messages

### Issue 5: Game.ts not wiring up enemy AI
- **File**: `/mnt/c/github/40kgw/output/client/src/game/Game.ts`
- **Fix**: Added:
  - `entityManager.setPlayerRef()` call for enemy AI targeting
  - `entityManager.setOnEnemyAttack()` callback to connect to CombatManager
  - `updateCompanionRefsForEnemyAI()` helper method
  - Call to update companion refs after spawning companions

**Build Status**: TypeScript compiles successfully (37 modules, 2.29s build time)

DECISION: retry