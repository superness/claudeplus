## Fixes Applied

### Issue 1: Floating damage numbers not visible
- **File:** `/mnt/c/github/40kgw/output/client/src/combat/CombatManager.ts`
- **Fix:** Changed the `onCombatEvent` callback system from a single callback to an array of callbacks (`onCombatEventCallbacks`). Previously, when `installTestHooks()` registered its callback, it would overwrite the combat feedback callback that `setupCombatFeedback()` registered. Now both listeners receive combat events, so floating damage numbers will display correctly.

### Issue 2: AI behavior test timeouts
- **File:** `/mnt/c/github/40kgw/output/client/src/combat/CombatManager.ts`
- **Fix:** The same fix for Issue 1 addresses this. The test hooks callback for tracking AI decisions was overwriting the actual combat execution callback, preventing companion AI skills from actually dealing damage. With the multi-listener approach, both the test hooks and combat feedback receive events properly.

### Issue 3: Dark scene/lighting issues
- **File:** `/mnt/c/github/40kgw/output/client/src/game/World.ts`
- **Fix:** Improved lighting visibility while maintaining 40K atmosphere:
  - Increased ambient light intensity from 1.2 to 1.6 and brightness from 0x808090 to 0x909090
  - Increased hemisphere light intensity from 0.8 to 1.0 with brighter colors
  - Increased main directional light intensity from 1.5 to 2.0
  - Increased secondary fill light intensity from 0.4 to 0.7 with brighter color
  - Added a new front fill light to illuminate characters facing the camera
  - Brightened ground texture base color from #403830 to #5a5045
  - Increased ground material color brightness from 0x665544 to 0x887766
  - Increased procedural texture noise brightness for better terrain definition

DECISION: retry