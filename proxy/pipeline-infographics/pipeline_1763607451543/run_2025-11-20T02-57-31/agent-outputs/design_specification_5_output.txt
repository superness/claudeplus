UNDERSTANDING: User wants a complete network monitoring agent implementation that tracks connectivity between cryptocurrency mining pool components (daemon, pool, miners), monitors network health metrics, and provides alerts on connectivity issues. The agent must be written as a JSON specification file.

APPROACH: I will create a comprehensive agent JSON specification following the agent framework patterns used in this codebase. The agent will leverage network monitoring tools (ping, netstat, ss, curl) to check connectivity, measure latency, detect packet loss, verify port availability, and track connection states between components. I'll design it with appropriate prompts, decision logic, and tool configurations.

STEPS:
1) Use Glob to find existing agent JSON files (pattern: "agents/*.json" or "**/*agent*.json") to understand the current agent schema and structure
2) Use Read to examine 2-3 representative agent files to identify required fields, decision structures, permission patterns, and prompt formatting
3) Use Grep to search for network/connectivity related code (pattern: "network|connectivity|ping|port" with glob "*.cs,*.json") to understand how the mining pool handles network operations
4) Use Grep to find daemon and pool configuration files (pattern: "daemon|pool.*config" with output_mode: "files_with_matches") to identify monitored endpoints and ports
5) Design the agent structure with:
   - Agent metadata (name, description, version)
   - Input/output schemas defining connection targets and health metrics
   - Prompt engineering for network analysis and issue detection
   - Decision tree logic (network_healthy, network_issues, connection_lost, error)
   - Tool permissions (bash for ping/netstat/ss/curl, read for logs)
   - Event logging specifications
6) Write the complete JSON specification to /mnt/c/github/claudeplus/agents/network_monitor.json

TEST_CONSIDERATIONS:
- Test with healthy network conditions (all components connected, low latency)
- Test with degraded network (high latency, packet loss scenarios)
- Test with partial outages (daemon disconnected, miner disconnected)
- Test with complete network loss scenarios
- Test port availability checks when ports are blocked/unavailable
- Test edge cases: DNS resolution failures, firewall blocking, timeout scenarios
- Validate JSON schema correctness before writing
- Ensure decision routing works for all four outcomes (network_healthy, network_issues, connection_lost, error)

EVIDENCE:
- Will examine existing agent JSON structures to prove schema compliance
- Will reference mining pool architecture (daemon/pool/miner connections) found in codebase
- Will identify specific network monitoring commands (ping, ss, netstat) suitable for each check type
- Will validate JSON syntax before writing
- Will provide the complete agent specification showing all required components

CONFIDENCE: Medium-High - I have clear requirements and permissions, but need to examine the existing agent framework structure first to ensure schema compliance. The network monitoring logic itself is straightforward (ping, port checks, connection tracking), but the agent JSON format must match the established pattern in this codebase.

[DECISION: design_complete]

DECISION: design_complete