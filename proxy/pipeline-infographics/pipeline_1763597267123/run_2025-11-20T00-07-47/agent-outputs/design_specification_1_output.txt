UNDERSTANDING: User wants me to create a plan for building the miner_manager agent based on section 2.1 of the MINING_CYCLE_AUTOMATION_PLAN.md. The agent must handle mining software configuration, installation, wallet creation, miner startup/monitoring, and graceful shutdown. The agent definition should follow the existing agent JSON schema pattern used in this project and be written to /mnt/c/github/claudeplus/agents/miner_manager.json.

APPROACH: I will create a comprehensive plan to design a miner_manager agent JSON file that follows the established patterns from existing agents (bitcoin_daemon_manager, wallet_manager, pool_server_manager) while implementing the specific requirements from section 2.1 of the plan. The agent will manage the complete mining client lifecycle including cpuminer installation, configuration, wallet setup, connection management, and performance monitoring.

STEPS:
1) Read the existing miner_manager.json from build/bin/Debug/config/agents/ to understand any current implementation
2) Analyze section 2.1 specifications (lines 165-186) which define the miner_manager's purpose and capabilities
3) Review the bitcoin_daemon_manager.json structure (already read) to understand the agent JSON schema pattern
4) Review the wallet_manager.json structure (already read) for wallet-related integration patterns
5) Review the pool_server_manager.json for pool connection patterns
6) Design the complete agent JSON structure including:
   - Agent metadata (name, type, group, version, description)
   - Configuration section (miner paths, wallet settings, pool connection, monitoring intervals)
   - Responsibilities array (aligned with section 2.1 requirements)
   - Inputs/outputs (commands and events)
   - RPC endpoints for agent control
   - Dependencies (wallet_manager, pool_server_manager agents)
   - Error handling strategies (miner crashes, connection failures, installation issues)
   - Logging configuration
   - Metrics collection (hashrate, share submissions, acceptance rate)
   - Validation schema
7) Map each requirement from section 2.1 to specific configuration options and capabilities
8) Define the four decision outcomes: miner_started, miner_stopped, miner_error, error
9) Ensure compatibility with the specified permissions: Read, Write, Edit, Bash, Glob, Grep
10) Create supporting helper script references (miner-control.sh, wallet-setup.sh)
11) Draft the complete JSON structure following the validated schema patterns
12) Verify all section 2.1 success criteria are addressed in the design

TEST_CONSIDERATIONS:
- The agent design must handle miner installation verification (cpuminer may or may not be installed)
- Must gracefully handle missing wallet scenarios and create/import as needed
- Connection failure scenarios must be handled with retry logic and clear error reporting
- Hashrate monitoring must work with various miner outputs (cpuminer, cgminer, etc.)
- Must handle pool connection rejections and authentication failures
- Graceful shutdown must ensure miner process terminates cleanly without orphaned processes
- Configuration generation must support various miner types and pool protocols
- Wallet address validation must ensure proper format for the network type (regtest/testnet/mainnet)
- Must handle scenarios where pool server is not yet running
- Performance metrics collection must handle missing or malformed miner output

EVIDENCE:
- Complete miner_manager.json file structure following the established schema
- Mapping document showing how each section 2.1 requirement is addressed in the JSON
- Configuration parameters for all required capabilities (install, configure, wallet, start, monitor, stop)
- Event definitions for all four decision outcomes plus internal state transitions
- RPC endpoint definitions for external control
- Error handling strategies for common failure scenarios
- Dependencies declaration showing integration with wallet_manager and pool_server_manager
- Helper script references (miner-control.sh, wallet-setup.sh) as specified in section 2.1

CONFIDENCE: High - The existing agent JSON files provide clear structural patterns, section 2.1 provides specific requirements and success criteria, and the target directory and schema are well-established. The plan addresses all functional requirements and follows the proven design patterns used by similar infrastructure agents in this project.

DECISION: design_complete