I'll create a comprehensive implementation plan for the Radial HUD hover delay feature with progress indicator.

```json
{
  "architecture": {
    "newClasses": [
      {
        "name": "HoverProgressIndicator",
        "responsibility": "Manages hover timer state and renders visual progress feedback",
        "methods": [
          "start(position)",
          "update(deltaTime)",
          "reset()",
          "getProgress()",
          "isComplete()",
          "render(context)"
        ],
        "properties": [
          "startTime (timestamp when hover began)",
          "hoverThreshold (500ms constant)",
          "isActive (boolean - currently hovering)",
          "progress (0-1 normalized progress)",
          "position (x, y coordinates for indicator)"
        ]
      }
    ],
    "modifiedClasses": [
      {
        "name": "RadialHUD",
        "file": "js/ui/RadialHUD.js",
        "changes": [
          "Add HoverProgressIndicator instance as property",
          "Modify mouse enter/leave handlers to start/reset timer",
          "Add update() method to check timer completion",
          "Integrate progress indicator rendering into existing draw cycle",
          "Add WebSocket command handlers for test automation"
        ]
      },
      {
        "name": "TestingBrowserBridge",
        "file": "js/testing/TestingBrowserBridge.js",
        "changes": [
          "Add command handlers: getHUDState, getProgressIndicatorState, getHoverTiming",
          "Add ship position query for mouse simulation",
          "Add performance monitoring commands"
        ]
      }
    ],
    "patterns": [
      "State Machine for hover states (idle → hovering → complete → open)",
      "Observer pattern for timer completion callback",
      "Timestamp-based timing (not frame counting) for accuracy",
      "Canvas 2D rendering for progress indicator (performance over CSS)"
    ],
    "integrationPoints": [
      "RadialHUD.onMouseEnter() - start timer",
      "RadialHUD.onMouseLeave() - reset timer",
      "RadialHUD.update() - check timer completion, trigger menu open",
      "RadialHUD.render() - draw progress indicator overlay",
      "TestingBrowserBridge - expose state for automated testing"
    ]
  },
  "fileStructure": {
    "create": [
      "/mnt/c/github/superstarships/js/ui/HoverProgressIndicator.js",
      "/mnt/c/github/superstarships/css/hover-progress.css",
      "/mnt/c/github/superstarships/tests/test_hover_radial_hud.js"
    ],
    "modify": [
      "/mnt/c/github/superstarships/js/ui/RadialHUD.js",
      "/mnt/c/github/superstarships/js/testing/TestingBrowserBridge.js",
      "/mnt/c/github/superstarships/index.html"
    ]
  },
  "implementationSteps": [
    {
      "order": 1,
      "task": "Create HoverProgressIndicator.js with core timer logic",
      "details": [
        "Implement timestamp-based timer (using performance.now())",
        "Add start(), reset(), update(), getProgress() methods",
        "Add isComplete() check for 500ms threshold",
        "Include state management (idle/active/complete)"
      ],
      "files": ["js/ui/HoverProgressIndicator.js"],
      "estimatedTime": "45 minutes",
      "dependencies": [],
      "testValidation": "Unit test timer accuracy with manual timing checks"
    },
    {
      "order": 2,
      "task": "Implement visual progress indicator rendering",
      "details": [
        "Add render() method using Canvas 2D API",
        "Design circular arc progress indicator (0-360° clockwise)",
        "Position indicator around cursor/ship intersection point",
        "Style: semi-transparent blue arc, 40px radius, 4px stroke width",
        "Add smooth easing for visual polish (optional)"
      ],
      "files": ["js/ui/HoverProgressIndicator.js", "css/hover-progress.css"],
      "estimatedTime": "1 hour",
      "dependencies": [1],
      "testValidation": "Visual inspection at 0%, 50%, 100% progress states"
    },
    {
      "order": 3,
      "task": "Read RadialHUD.js to understand current hover detection",
      "details": [
        "Identify current mouse event handlers",
        "Locate menu opening trigger logic",
        "Understand canvas rendering pipeline",
        "Map out existing state management"
      ],
      "files": ["js/ui/RadialHUD.js"],
      "estimatedTime": "15 minutes",
      "dependencies": [],
      "testValidation": "None (analysis step)"
    },
    {
      "order": 4,
      "task": "Integrate HoverProgressIndicator into RadialHUD",
      "details": [
        "Add HoverProgressIndicator instance to RadialHUD constructor",
        "Modify onMouseEnter: call progressIndicator.start(position)",
        "Modify onMouseLeave: call progressIndicator.reset()",
        "Add update() method: check progressIndicator.isComplete(), trigger menu open",
        "Hook update() into game loop (likely already has update cycle)",
        "Add render call for progress indicator in existing draw method"
      ],
      "files": ["js/ui/RadialHUD.js"],
      "estimatedTime": "1 hour",
      "dependencies": [1, 2, 3],
      "testValidation": "Manual browser testing - hover should show progress, menu opens at 0.5s"
    },
    {
      "order": 5,
      "task": "Handle edge cases and state transitions",
      "details": [
        "Menu already open: disable hover timer",
        "Ship moves during hover: maintain hover if cursor still over ship",
        "Rapid hover on/off: ensure clean reset on each cycle",
        "Camera mode changes: verify hover works in all camera modes",
        "Add console logging for debugging (removable later)"
      ],
      "files": ["js/ui/RadialHUD.js"],
      "estimatedTime": "45 minutes",
      "dependencies": [4],
      "testValidation": "Manual testing of edge cases listed in test plan TC-004, TC-006, TC-007"
    },
    {
      "order": 6,
      "task": "Add WebSocket automation command handlers",
      "details": [
        "Read TestingBrowserBridge.js to understand command structure",
        "Add getHUDState handler: return {radialHUDVisible: boolean}",
        "Add getProgressIndicatorState: return {visible, progress}",
        "Add getHoverTiming: return {actualDuration} from last hover event",
        "Add getShipPosition for mouse simulation targeting",
        "Add performance monitoring commands (startPerformanceMonitoring, getPerformanceMetrics)"
      ],
      "files": ["js/testing/TestingBrowserBridge.js", "js/ui/RadialHUD.js"],
      "estimatedTime": "1 hour",
      "dependencies": [4],
      "testValidation": "WebSocket client test - verify commands return expected data"
    },
    {
      "order": 7,
      "task": "Create automated test script using browser automation",
      "details": [
        "Set up Puppeteer/Playwright test runner",
        "Implement all 8 test cases from test plan (TC-001 through TC-008)",
        "Add precise mouse position simulation",
        "Implement timing validation (500ms ± 50ms tolerance)",
        "Add screenshot capture at key test points",
        "Add evidence collection (JSON output with all test data)",
        "Add performance monitoring (FPS tracking during hover)"
      ],
      "files": ["tests/test_hover_radial_hud.js"],
      "estimatedTime": "2 hours",
      "dependencies": [6],
      "testValidation": "Run automated test suite, verify all 8 test cases pass"
    },
    {
      "order": 8,
      "task": "Performance optimization and validation",
      "details": [
        "Profile hover update loop - ensure no performance impact",
        "Verify 60 FPS maintained during hover animation",
        "Optimize progress indicator rendering (minimal draw calls)",
        "Test on lower-end hardware simulation (30 FPS target)",
        "Verify timestamp-based timing works correctly at all frame rates"
      ],
      "files": ["js/ui/HoverProgressIndicator.js", "js/ui/RadialHUD.js"],
      "estimatedTime": "45 minutes",
      "dependencies": [7],
      "testValidation": "TC-005 (60 FPS) and TC-008 (frame rate independence) pass"
    },
    {
      "order": 9,
      "task": "Visual polish and CSS styling",
      "details": [
        "Fine-tune progress indicator appearance",
        "Add smooth easing to progress fill animation",
        "Ensure indicator is visible against all backgrounds",
        "Add subtle glow effect for better visibility",
        "Test in different biome environments"
      ],
      "files": ["css/hover-progress.css", "js/ui/HoverProgressIndicator.js"],
      "estimatedTime": "30 minutes",
      "dependencies": [8],
      "testValidation": "Visual inspection in-game across different environments"
    },
    {
      "order": 10,
      "task": "Update index.html to load new components",
      "details": [
        "Add <script> tag for HoverProgressIndicator.js",
        "Add <link> tag for hover-progress.css",
        "Verify load order (HoverProgressIndicator before RadialHUD)",
        "Test page load without errors"
      ],
      "files": ["index.html"],
      "estimatedTime": "10 minutes",
      "dependencies": [1, 2],
      "testValidation": "Browser console shows no load errors"
    },
    {
      "order": 11,
      "task": "Final integration testing and validation",
      "details": [
        "Run complete automated test suite (all 8 test cases)",
        "Manual testing across different scenarios",
        "Verify no regressions in existing RadialHUD functionality",
        "Test on multiple browsers (Chrome, Firefox, Edge)",
        "Capture final evidence screenshots and performance data"
      ],
      "files": ["All modified files"],
      "estimatedTime": "1 hour",
      "dependencies": [7, 8, 9, 10],
      "testValidation": "All automated tests pass, manual verification successful"
    }
  ],
  "technicalConsiderations": {
    "performance": {
      "approach": "Canvas 2D rendering (more performant than CSS animations)",
      "updateFrequency": "Every frame during hover only (conditional update)",
      "renderCost": "Minimal - single arc stroke per frame (~0.1ms)",
      "optimization": "Only update/render when isActive=true"
    },
    "timing": {
      "method": "performance.now() for sub-millisecond accuracy",
      "frameRateIndependence": "Timestamp-based, not frame counting",
      "tolerance": "±50ms acceptable (accounts for frame timing variance)",
      "edgeCase": "Handle browser tab backgrounding (pause timer when page hidden)"
    },
    "memory": {
      "footprint": "Minimal - single HoverProgressIndicator instance",
      "noLeaks": "Clean reset on mouse leave, no dangling timers",
      "gcConsideration": "Reuse instance, avoid creating new objects per frame"
    },
    "compatibility": {
      "browsers": "Chrome 90+, Firefox 88+, Edge 90+ (Canvas 2D API standard)",
      "mobile": "No impact - mobile uses touch events, not mouse hover",
      "fallback": "Graceful degradation - if Canvas not available, skip indicator (timer still works)"
    },
    "codeReusability": {
      "abstraction": "HoverProgressIndicator is generic, could be used for other hover interactions",
      "configuration": "Threshold time configurable (hardcoded to 500ms initially)",
      "extensibility": "Easy to add sound effects, haptic feedback, or custom animations later"
    }
  },
  "risks": [
    {
      "risk": "Timer accuracy affected by browser throttling when tab is backgrounded",
      "mitigation": "Detect page visibility (document.hidden API), pause timer when hidden",
      "severity": "Low"
    },
    {
      "risk": "Progress indicator z-index conflicts with other UI elements",
      "mitigation": "Render on RadialHUD's existing canvas layer, ensure proper layer ordering",
      "severity": "Low"
    },
    {
      "risk": "Mouse events lost if ship moves rapidly under cursor",
      "mitigation": "Use continuous hit detection during hover, not just on mouse move",
      "severity": "Medium"
    },
    {
      "risk": "Performance regression on low-end hardware",
      "mitigation": "Profile on 30 FPS target, optimize rendering, add performance monitoring",
      "severity": "Low"
    },
    {
      "risk": "Automated tests fail due to WebSocket command timing issues",
      "mitigation": "Add retry logic, use promise-based waiting, increase tolerance windows",
      "severity": "Medium"
    }
  ],
  "dependencies": {
    "existing": [
      "RadialHUD.js - Core menu system",
      "TestingBrowserBridge.js - WebSocket automation infrastructure",
      "Canvas 2D API - For rendering progress indicator",
      "performance.now() API - For accurate timing"
    ],
    "new": [
      "Puppeteer or Playwright - For browser automation in tests",
      "WebSocket client library - For test script (ws package for Node.js)"
    ]
  },
  "estimatedTotalTime": "9 hours 45 minutes",
  "estimatedComplexity": "Medium",
  "codeQualityChecks": [
    "Add JSDoc comments for all new methods",
    "Follow existing code style (check RadialHUD.js for patterns)",
    "Add error handling for edge cases",
    "Include console.warn for debugging during development",
    "Remove debug logging before final commit"
  ],
  "documentationUpdates": [
    "Update MOBILE_INPUT_GUIDE.md if mobile behavior changes",
    "Add hover delay documentation to README.md controls section",
    "Document WebSocket test commands in testing documentation"
  ],
  "finalValidation": {
    "manualChecks": [
      "Hover for 0.3s and move away - menu should NOT open",
      "Hover for 0.6s - menu SHOULD open",
      "Progress indicator animates smoothly 0-100%",
      "Rapid hover spam doesn't break functionality",
      "No FPS drops during hover interaction",
      "Works in all camera modes (chase, orbit, free)"
    ],
    "automatedChecks": [
      "All 8 test cases pass (TC-001 through TC-008)",
      "Performance metrics within acceptable range (≥58 FPS)",
      "Timing accuracy within ±50ms tolerance",
      "No console errors during test execution"
    ],
    "crossBrowserTesting": [
      "Chrome (latest stable)",
      "Firefox (latest stable)",
      "Edge (latest stable)"
    ]
  }
}
```

## Implementation Summary

**Total Steps:** 11 sequential tasks  
**Estimated Time:** ~10 hours (includes testing and polish)  
**Complexity:** Medium

**Key Architecture Decisions:**

1. **Separate HoverProgressIndicator class** - Encapsulates timer logic and rendering, reusable for other hover interactions
2. **Canvas-based rendering** - More performant than CSS animations, integrates cleanly with existing RadialHUD rendering
3. **Timestamp-based timing** - Frame rate independent, accurate across all devices
4. **WebSocket test integration** - Comprehensive automated testing via existing browser bridge infrastructure
5. **Progressive enhancement** - Core functionality works even if progress indicator fails to render

**Critical Path:**
1. Create HoverProgressIndicator (Steps 1-2)
2. Integrate into RadialHUD (Steps 3-5)
3. Add test automation (Steps 6-7)
4. Validate and polish (Steps 8-11)

**Success Metrics:**
- Menu opens at 500ms ± 50ms
- 60 FPS maintained during hover
- All 8 automated test cases pass
- No regressions in existing functionality

DECISION: implementation_plan_ready