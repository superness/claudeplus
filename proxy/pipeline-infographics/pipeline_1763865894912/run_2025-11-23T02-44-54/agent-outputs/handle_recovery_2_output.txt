## RECOVERY FAILURE REPORT

### Infrastructure State
- **Bitcoin Daemon**: Running in WSL, RPC functional (verified via curl)
- **CoiniumServ Pool**: Running in WSL via Mono, Stratum functional  
- **Connectivity**: Pool→Daemon RPC connection FAILING

### Failure Type
**RPC Connection Failure** - Mono networking incompatibility in WSL environment

### Recovery Attempts

**Attempt 1: Pool Process Restart**
- Action: Stopped and restarted CoiniumServ pool process
- Result: FAILED - Connection refused errors persist
- Duration: 15 seconds

**Attempt 2: Daemon Host Configuration Change**
- Action: Changed pool config from `host: "127.0.0.1"` to `host: "172.22.45.9"` (WSL IP)
- Restarted pool with new configuration
- Result: FAILED - Connection refused errors persist
- Duration: 20 seconds

**Attempt 3: Verification of Daemon Accessibility**
- Verified daemon RPC working via curl: SUCCESS
- Verified daemon listening on ports: SUCCESS  
- Confirmed credentials correct: SUCCESS
- Mono socket connection: FAILED

### Root Cause

**Mono/.NET Framework Networking Incompatibility in WSL**

The pool uses `System.Net.HttpWebRequest` and `System.Net.Sockets.Socket` which fail at the OS socket layer when Mono runs in WSL:

```
Error: ConnectFailure (Connection refused)
  at System.Net.Sockets.SocketAsyncResult.CheckIfThrowDelayedException()
  at System.Net.Sockets.Socket.EndConnect()
  at System.Net.WebConnection.Connect()
```

This is a known Mono-on-WSL limitation where the .NET networking stack cannot reliably connect to localhost services due to Windows/Linux network stack translation issues.

### Evidence
- Daemon RPC accessible via native Linux curl: ✓
- Daemon RPC inaccessible via Mono HttpWebRequest: ✗  
- Error occurs at socket connection level (not HTTP/auth layer)
- Both 127.0.0.1 and WSL IP (172.22.45.9) fail identically

### Escalation Reason

**Cannot recover automatically** - requires architectural changes:

**Option A**: Install Windows-native Bitcoin Core
- Download and install bitcoind.exe for Windows
- Run daemon natively on Windows (not WSL)
- Mono can connect to Windows localhost more reliably
- Requires manual software installation

**Option B**: Run pool natively on Windows  
- Compile/run CoiniumServ.exe on Windows .NET Framework
- Bypass WSL Mono entirely
- Requires build environment change

**Option C**: Use network bridge/proxy
- Configure socat or similar to bridge Mono→Daemon
- Complex networking setup
- Not recommended for production

### Recommended Action

1. Install Bitcoin Core for Windows from bitcoin.org
2. Configure Windows bitcoind with regtest mode:
   - Create `%APPDATA%\Bitcoin\bitcoin.conf` with RPC settings
   - Start: `bitcoind.exe -regtest -daemon`
3. Update pool config to connect to Windows localhost
4. Restart pool - should connect successfully

### Current Infrastructure Status

| Component | Status | Details |
|-----------|--------|---------|
| Bitcoin Daemon (WSL) | Running | RPC port 18443, verified functional |
| CoiniumServ Pool | Running | Stratum port 3333, cannot reach daemon |
| Pool-Daemon RPC | **FAILED** | Mono networking incompatibility |
| Mining Software | Not Installed | Blocked by pool connectivity issue |

### Recovery Failure Classification

**Type**: Architectural/Environment Incompatibility  
**Severity**: Blocker - prevents core pool functionality  
**Auto-Recovery**: Not possible  
**Manual Intervention Required**: Yes

---

DECISION: recovery_failed