Perfect! Now I have a comprehensive understanding of the codebase. Let me create the detailed feature specification:

```json
{
  "featureName": "Reset Player State (Debug Menu)",
  "userStory": "As a developer/tester, I want to reset all player state to initial values via the debug menu so that I can quickly test the game from a fresh start without clearing browser storage manually",
  
  "description": "Add a 'Reset Player State' button to the existing debug menu (DebugMenu.js) that completely resets the player back to a fresh game state. This includes resetting player position, velocity, resources, credits, skills, ship fitting, inventory, progression, and all localStorage data. The feature will show a confirmation dialog before executing to prevent accidental resets. After reset, the game should be in the same state as a first-time player.",
  
  "acceptanceCriteria": [
    "A new button labeled '⚠️ Reset Player State' appears in the Debug Menu under a new 'SYSTEM' section",
    "Button is styled with warning/danger colors (red/orange) to indicate destructive action",
    "Clicking the button shows a confirmation dialog with clear warning text",
    "Confirmation dialog has 'Cancel' and 'Confirm Reset' buttons",
    "Cancel button closes dialog without any changes",
    "Confirm Reset button triggers complete state reset",
    "Reset clears all localStorage keys (superstarships_savegame, superstarships_savegame_backup, etc.)",
    "Reset resets player ship position to origin (0, 0, 0)",
    "Reset resets player ship velocity to zero",
    "Reset resets economy credits to starting amount (e.g., 5000 credits)",
    "Reset clears all player resources/inventory",
    "Reset clears all ship fitting modules back to default",
    "Reset clears skill progression back to initial state",
    "Reset clears station docking state",
    "Reset triggers a notification 'Player state reset - Starting fresh!'",
    "After reset, the debug menu automatically closes",
    "Reset does NOT require page reload (state updated in-memory)",
    "SaveGameManager.markDirty() is called after reset to trigger auto-save",
    "Console logs confirmation message: 'Player state completely reset'",
    "Works regardless of current game state (in space, docked, in combat, etc.)"
  ],
  
  "scope": {
    "inScope": [
      "Add Reset Player State button to debug menu UI",
      "Create confirmation dialog with warning styling",
      "Clear all localStorage game save data",
      "Reset player ship position and velocity",
      "Reset economy credits to initial value",
      "Clear all resources and inventory",
      "Reset ship fitting to default configuration",
      "Reset skill system to initial state",
      "Clear station docking state",
      "Show notification after reset",
      "Console logging for debugging",
      "Trigger save system after reset"
    ],
    "outOfScope": [
      "Resetting Three.js scene (asteroids, stations remain spawned)",
      "Resetting universe/cluster generation state",
      "Resetting game settings/preferences (graphics, controls)",
      "Partial reset options (reset only economy, only skills, etc.)",
      "Undo functionality for reset",
      "Import/export save functionality",
      "Multiple save slot management",
      "Reset history or logging",
      "Backup creation before reset (existing backups will be cleared)",
      "Reset confirmation via keyboard shortcut"
    ]
  },
  
  "affectedSystems": [
    "js/debug/DebugMenu.js - Add new button, confirmation dialog, and resetPlayerState() method",
    "js/systems/SaveGameManager.js - May need getInitialState() helper method",
    "js/systems/EconomyManager.js - Reset credits to initial value",
    "js/systems/ResourceManager.js - Clear all resources",
    "js/systems/ShipFittingManager.js - Reset to default fitting",
    "js/systems/SkillSystem.js - Reset skill progression",
    "js/systems/StationManager.js - Clear docking state",
    "localStorage - Clear all game save keys",
    "css/debug-menu.css - Add warning/danger button styles"
  ],
  
  "dependencies": [
    "Requires existing DebugMenu.js and debug menu infrastructure",
    "Requires SaveGameManager.js for save data management",
    "Requires EconomyManager, ResourceManager, ShipFittingManager to have reset/clear methods or access to initial state",
    "Requires playerShip to exist for position/velocity reset",
    "Requires HUDManager for notification display"
  ],
  
  "technicalImplementation": {
    "files": [
      {
        "path": "js/debug/DebugMenu.js",
        "changes": [
          "Add new 'SYSTEM' section in createMenu() HTML",
          "Add 'Reset Player State' button with warning styling",
          "Add bindDebugButtons() listener for reset button",
          "Create resetPlayerState() method",
          "Create showResetConfirmation() method for dialog",
          "Create confirmationDialog HTML element with backdrop",
          "Style confirmation dialog with warning colors"
        ]
      },
      {
        "path": "css/debug-menu.css",
        "changes": [
          "Add .debug-btn-warning class (red/orange colors)",
          "Add .debug-confirmation-dialog styles",
          "Add .confirmation-backdrop styles",
          "Add button hover/active states for warning buttons"
        ]
      }
    ],
    "methods": [
      {
        "name": "resetPlayerState()",
        "location": "DebugMenu.js",
        "description": "Main reset method that orchestrates complete state reset",
        "steps": [
          "Clear localStorage (all save keys)",
          "Reset player ship position to (0, 0, 0)",
          "Reset player ship velocity to (0, 0, 0)",
          "Call economyManager.resetToInitial() or set credits to initial amount",
          "Call resourceManager.clearAllResources()",
          "Call shipFittingManager.resetToDefault()",
          "Call skillSystem.reset() if exists",
          "Reset station docking state",
          "Call saveGameManager.markDirty()",
          "Show notification",
          "Close debug menu",
          "Console log success"
        ]
      },
      {
        "name": "showResetConfirmation()",
        "location": "DebugMenu.js",
        "description": "Display confirmation dialog before reset",
        "implementation": "Create/show modal dialog with warning text and Cancel/Confirm buttons"
      }
    ]
  },
  
  "edgeCases": [
    "What if player is currently docked at a station? (Reset should undock and move to origin)",
    "What if player is in combat with active targets? (Clear targets, reset to peaceful state)",
    "What if player has active mining/exploration in progress? (Stop all active operations)",
    "What if saveGameManager doesn't exist? (Still reset in-memory state, log warning)",
    "What if some managers (skillSystem, etc.) are null/undefined? (Skip with null checks)",
    "What if localStorage is disabled/full? (Still reset in-memory state)",
    "What if reset is triggered during auto-save? (Wait for save to complete or force override)",
    "What if user clicks reset button multiple times rapidly? (Debounce/disable button during reset)",
    "What if confirmation dialog is already open? (Don't open multiple dialogs)",
    "What if user presses ESC while confirmation dialog is open? (Close dialog = Cancel)"
  ],
  
  "testing": {
    "manual": [
      "Open debug menu (Left Control key)",
      "Verify 'Reset Player State' button exists in SYSTEM section",
      "Verify button has warning/danger styling",
      "Click reset button",
      "Verify confirmation dialog appears with warning message",
      "Click 'Cancel' - verify dialog closes, no changes occur",
      "Click reset button again",
      "Click 'Confirm Reset' - verify:",
      "  - Player ship teleported to origin (0,0,0)",
      "  - Velocity is zero",
      "  - Credits reset to initial amount",
      "  - All resources cleared",
      "  - Ship fitting reset to default",
      "  - Notification appears",
      "  - Debug menu closes",
      "  - Console shows success message",
      "Open debug menu again - verify changes persisted",
      "Close/reopen browser - verify reset state persisted"
    ],
    "automated": [
      "Could create test_reset_player_state.js to verify reset functionality",
      "Test localStorage clearing",
      "Test in-memory state reset",
      "Test confirmation dialog behavior"
    ]
  },
  
  "uiMockup": {
    "debugMenuSection": {
      "title": "SYSTEM",
      "buttons": [
        {
          "icon": "⚠️",
          "text": "Reset Player State",
          "style": "warning/danger (red/orange)",
          "action": "Show confirmation dialog"
        }
      ]
    },
    "confirmationDialog": {
      "backdrop": "Semi-transparent overlay",
      "panel": "Centered dialog box with warning colors",
      "title": "⚠️ Reset Player State",
      "message": "This will completely reset ALL player progress:\n• Position and velocity\n• Credits and resources\n• Ship fitting and modules\n• Skills and progression\n• All saved data\n\nThis action cannot be undone.\n\nAre you sure?",
      "buttons": [
        {
          "text": "Cancel",
          "style": "secondary/gray"
        },
        {
          "text": "Confirm Reset",
          "style": "danger/red"
        }
      ]
    }
  },
  
  "implementationNotes": {
    "initial_values": {
      "credits": 5000,
      "position": { "x": 0, "y": 0, "z": 0 },
      "velocity": { "x": 0, "y": 0, "z": 0 },
      "resources": {},
      "skills": "Default SkillSystem initial state",
      "shipFitting": "Default ship configuration from Ship.js"
    },
    "localStorage_keys": [
      "superstarships_savegame",
      "superstarships_savegame_backup",
      "Any other game-specific keys"
    ],
    "safety": {
      "confirmation_required": true,
      "warning_styling": true,
      "console_logging": true,
      "no_undo": true
    }
  },
  
  "futureEnhancements": [
    "Add 'Reset to Checkpoint' option (save specific states)",
    "Add 'Partial Reset' options (reset only economy, only skills, etc.)",
    "Add 'Export/Import' save functionality",
    "Add reset history logging",
    "Add undo functionality (save state before reset)",
    "Add keyboard shortcut for reset (e.g., Ctrl+Shift+R with confirmation)"
  ]
}
```

## Summary

This feature adds a **Reset Player State** button to the existing debug menu that completely resets the player back to a fresh start. The implementation involves:

### Key Components:
1. **New Debug Menu Section**: Add "SYSTEM" section with warning-styled reset button
2. **Confirmation Dialog**: Modal dialog with clear warning and Cancel/Confirm options
3. **Complete State Reset**: Clears localStorage, resets player position/velocity, credits, resources, ship fitting, skills, and progression
4. **User Feedback**: Shows notification after reset and logs to console

### Technical Requirements:
- **Primary File**: `js/debug/DebugMenu.js` - Add resetPlayerState() method and confirmation dialog
- **CSS Updates**: `css/debug-menu.css` - Add warning button styles and dialog styles
- **Integration**: Calls reset methods on EconomyManager, ResourceManager, ShipFittingManager, SkillSystem
- **Persistence**: Clears localStorage and triggers SaveGameManager to save fresh state

### Safety Features:
- ⚠️ Warning-styled button (red/orange)
- Mandatory confirmation dialog with explicit warning text
- Clear messaging about irreversibility
- Console logging for debugging
- No accidental activation possible

### Edge Cases Handled:
- Null/undefined manager checks
- Mid-operation resets (mining, combat, docked)
- localStorage availability
- Rapid click prevention
- ESC key closes dialog

DECISION: feature_defined