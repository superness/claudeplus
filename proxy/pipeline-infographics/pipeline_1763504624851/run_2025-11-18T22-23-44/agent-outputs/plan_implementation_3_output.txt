Perfect! Now I have enough context to create a comprehensive implementation plan. Let me compile this into a detailed technical plan:

```json
{
  "featureName": "Reset Player State (Debug Menu)",
  "architecture": {
    "overview": "Add a complete player state reset function to the existing DebugMenu.js that clears all game progress and returns the player to a fresh start. The feature will create a confirmation dialog modal and coordinate reset operations across multiple game systems.",
    
    "newClasses": [],
    
    "modifiedClasses": [
      {
        "name": "DebugMenu",
        "path": "js/debug/DebugMenu.js",
        "changes": [
          "Add new 'SYSTEM' section in createMenu() HTML structure",
          "Add 'Reset Player State' button with warning styling",
          "Create resetPlayerState() method to orchestrate complete state reset",
          "Create showResetConfirmation() method to display confirmation dialog",
          "Create hideResetConfirmation() method to close confirmation dialog",
          "Update bindDebugButtons() to add reset button event listener",
          "Add confirmation dialog HTML structure with backdrop"
        ],
        "newMethods": [
          {
            "name": "resetPlayerState()",
            "responsibility": "Orchestrate complete reset of all player state across all game systems",
            "implementation": "Calls reset methods on all manager instances, clears localStorage, resets ship position/velocity"
          },
          {
            "name": "showResetConfirmation()",
            "responsibility": "Display modal confirmation dialog before reset",
            "implementation": "Creates/shows modal with warning message and Confirm/Cancel buttons"
          },
          {
            "name": "hideResetConfirmation()",
            "responsibility": "Hide confirmation dialog",
            "implementation": "Hides modal dialog and backdrop"
          }
        ]
      }
    ],
    
    "patterns": [
      "Modal Dialog Pattern - Backdrop + centered panel for confirmation",
      "Orchestrator Pattern - DebugMenu orchestrates reset across multiple managers",
      "Null-safe Pattern - Check for manager existence before calling reset methods",
      "Defensive Programming - Use try-catch blocks for individual reset operations"
    ],
    
    "systemIntegration": {
      "saveGameManager": "Call deleteSave() to clear localStorage, markDirty() to trigger new save",
      "economyManager": "Reset playerCredits to 100000 (initial value from line 10)",
      "resourceManager": "Call clearPlayerResources() to reset all resources to 0",
      "shipFittingManager": "Reset to default Atron fitting (initializePlayerShip method exists)",
      "skillSystem": "Reset character to initializeCharacter() state",
      "stationManager": "Reset docking state (isDocked, isApproaching, targetStation)",
      "playerShip": "Reset position to (0,0,0) and velocity to (0,0,0)",
      "hudManager": "Show success notification after reset"
    }
  },
  
  "fileStructure": {
    "create": [],
    "modify": [
      {
        "path": "/mnt/c/github/superstarships/js/debug/DebugMenu.js",
        "changes": [
          "Add SYSTEM section HTML in createMenu() method (after line 90)",
          "Add Reset Player State button HTML",
          "Add confirmation dialog HTML structure",
          "Add showResetConfirmation() method",
          "Add hideResetConfirmation() method",
          "Add resetPlayerState() method",
          "Add button binding in bindDebugButtons() method"
        ],
        "estimatedLines": "+150 lines"
      },
      {
        "path": "/mnt/c/github/superstarships/css/debug-menu.css",
        "changes": [
          "Add .debug-btn-warning class for destructive action styling",
          "Add .debug-confirmation-dialog styles",
          "Add .confirmation-backdrop styles",
          "Add .confirmation-panel styles",
          "Add .confirmation-title, .confirmation-message, .confirmation-buttons styles",
          "Add hover/active states for warning buttons"
        ],
        "estimatedLines": "+80 lines"
      }
    ]
  },
  
  "implementationSteps": [
    {
      "order": 1,
      "task": "Add warning button styles to debug-menu.css",
      "details": [
        "Create .debug-btn-warning class (red/orange colors, border, hover effects)",
        "Create .debug-btn-warning:hover with red glow effect",
        "Create .debug-btn-warning:active with pressed state"
      ],
      "estimatedTime": "10 minutes",
      "dependencies": [],
      "testingStep": "Visually inspect button styling in browser DevTools"
    },
    {
      "order": 2,
      "task": "Add confirmation dialog styles to debug-menu.css",
      "details": [
        "Create .confirmation-backdrop (semi-transparent overlay, z-index 16000)",
        "Create .confirmation-panel (centered modal with warning colors)",
        "Create .confirmation-title (large text with warning icon)",
        "Create .confirmation-message (warning message text styling)",
        "Create .confirmation-buttons (button container with flex layout)",
        "Create .btn-cancel and .btn-confirm styles"
      ],
      "estimatedTime": "15 minutes",
      "dependencies": [1],
      "testingStep": "Inspect dialog appearance in browser"
    },
    {
      "order": 3,
      "task": "Add SYSTEM section HTML to DebugMenu.createMenu()",
      "details": [
        "Add new debug-section div after UNIVERSE section (after line 90)",
        "Add section-title 'SYSTEM'",
        "Add button with id='debugResetPlayerState'",
        "Add warning icon ‚ö†Ô∏è and text 'Reset Player State'",
        "Apply debug-btn and debug-btn-warning classes"
      ],
      "file": "js/debug/DebugMenu.js",
      "estimatedTime": "5 minutes",
      "dependencies": [1],
      "testingStep": "Verify button appears in debug menu"
    },
    {
      "order": 4,
      "task": "Add confirmation dialog HTML to DebugMenu.createMenu()",
      "details": [
        "Add confirmation-backdrop div (hidden by default)",
        "Add confirmation-panel div",
        "Add confirmation-title with ‚ö†Ô∏è icon",
        "Add confirmation-message with multi-line warning text",
        "Add confirmation-buttons container",
        "Add btn-cancel and btn-confirm buttons",
        "Set display:none by default"
      ],
      "file": "js/debug/DebugMenu.js",
      "estimatedTime": "10 minutes",
      "dependencies": [2],
      "testingStep": "Verify dialog structure in DOM inspector"
    },
    {
      "order": 5,
      "task": "Implement showResetConfirmation() method",
      "details": [
        "Query .confirmation-backdrop element",
        "Set display to 'flex'",
        "Add event listener to backdrop click ‚Üí hideResetConfirmation()",
        "Add event listener to Cancel button ‚Üí hideResetConfirmation()",
        "Add event listener to Confirm button ‚Üí resetPlayerState() + hideResetConfirmation()"
      ],
      "file": "js/debug/DebugMenu.js",
      "estimatedTime": "10 minutes",
      "dependencies": [4],
      "testingStep": "Click reset button, verify dialog appears"
    },
    {
      "order": 6,
      "task": "Implement hideResetConfirmation() method",
      "details": [
        "Query .confirmation-backdrop element",
        "Set display to 'none'",
        "Remove all event listeners (cleanup)"
      ],
      "file": "js/debug/DebugMenu.js",
      "estimatedTime": "5 minutes",
      "dependencies": [5],
      "testingStep": "Click Cancel, verify dialog closes"
    },
    {
      "order": 7,
      "task": "Implement resetPlayerState() method (core logic)",
      "details": [
        "Step 1: Clear localStorage (all save keys)",
        "Step 2: Reset player ship position to (0,0,0)",
        "Step 3: Reset player ship velocity to (0,0,0)",
        "Step 4: Reset economyManager.playerCredits to 100000",
        "Step 5: Call resourceManager.clearPlayerResources()",
        "Step 6: Call shipFittingManager.initializePlayerShip()",
        "Step 7: Reset skillSystem.character to initializeCharacter()",
        "Step 8: Reset stationManager docking state",
        "Step 9: Call saveGameManager.markDirty() to trigger save",
        "Step 10: Show notification via hudManager",
        "Step 11: Close debug menu",
        "Step 12: Console log success message",
        "Use try-catch blocks for each step",
        "Add null checks before calling methods"
      ],
      "file": "js/debug/DebugMenu.js",
      "estimatedTime": "30 minutes",
      "dependencies": [3],
      "testingStep": "Execute reset, verify all state cleared"
    },
    {
      "order": 8,
      "task": "Add button binding in bindDebugButtons()",
      "details": [
        "Add event listener to #debugResetPlayerState button",
        "Call showResetConfirmation() on click"
      ],
      "file": "js/debug/DebugMenu.js",
      "estimatedTime": "5 minutes",
      "dependencies": [5],
      "testingStep": "Click button, verify confirmation appears"
    },
    {
      "order": 9,
      "task": "Add ESC key handler for confirmation dialog",
      "details": [
        "Update existing ESC keydown listener in bindEvents()",
        "Check if confirmation dialog is visible",
        "If visible, call hideResetConfirmation() instead of hiding debug menu"
      ],
      "file": "js/debug/DebugMenu.js",
      "estimatedTime": "5 minutes",
      "dependencies": [6],
      "testingStep": "Open dialog, press ESC, verify it closes"
    },
    {
      "order": 10,
      "task": "Manual testing - Complete feature verification",
      "details": [
        "Open debug menu (Left Control)",
        "Verify SYSTEM section and Reset button exist",
        "Verify button has warning styling",
        "Add test data (credits, resources, fitted items)",
        "Click Reset button",
        "Verify confirmation dialog appears",
        "Click Cancel - verify no changes",
        "Click Reset button again",
        "Click Confirm - verify:",
        "  - Position reset to origin",
        "  - Velocity is zero",
        "  - Credits reset to 100000",
        "  - Resources cleared",
        "  - Ship fitting reset",
        "  - Skills cleared",
        "  - Notification shown",
        "  - Debug menu closed",
        "Refresh page - verify reset persisted"
      ],
      "estimatedTime": "15 minutes",
      "dependencies": [9],
      "testingStep": "Full manual test scenario"
    },
    {
      "order": 11,
      "task": "Automated testing with browser automation",
      "details": [
        "Use existing test_reset_player_state.js",
        "Launch Chrome with ChromeManager",
        "Connect to WebSocket automation",
        "Run main test scenario (13 test cases)",
        "Run edge case tests (2 scenarios)",
        "Collect console logs",
        "Save evidence JSON",
        "Verify all tests pass"
      ],
      "estimatedTime": "10 minutes",
      "dependencies": [10],
      "testingStep": "Run: node test_reset_player_state.js"
    }
  ],
  
  "technicalConsiderations": {
    "performance": {
      "impact": "Minimal - reset is a one-time operation triggered manually",
      "optimization": "Use batch operations where possible (e.g., single localStorage.clear() call)"
    },
    
    "memory": {
      "impact": "Positive - clears accumulated state and resets to minimal footprint",
      "consideration": "Confirmation dialog creates temporary DOM elements (cleaned up on hide)"
    },
    
    "compatibility": {
      "browsers": "All modern browsers (Chrome, Firefox, Edge, Safari)",
      "localStorage": "Gracefully handle localStorage being disabled/full",
      "managerAvailability": "Null-safe checks for all manager instances"
    },
    
    "security": {
      "consideration": "No security concerns - purely client-side reset operation",
      "confirmation": "Mandatory confirmation dialog prevents accidental data loss"
    },
    
    "codeReusability": {
      "pattern": "Modal dialog pattern can be reused for other confirmation dialogs",
      "resetLogic": "Individual reset methods on managers can be called independently"
    }
  },
  
  "initialValues": {
    "credits": 100000,
    "position": { "x": 0, "y": 0, "z": 0 },
    "velocity": { "x": 0, "y": 0, "z": 0 },
    "resources": "All resources set to 0 via clearPlayerResources()",
    "shipFitting": "Default Atron hull with empty slots via initializePlayerShip()",
    "skills": "Default character state via initializeCharacter()",
    "dockingState": { "isDocked": false, "isApproaching": false, "targetStation": null },
    "localStorage": "All game save keys cleared: superstarships_savegame, superstarships_savegame_backup"
  },
  
  "edgeCases": [
    {
      "case": "Player is docked at station when reset triggered",
      "handling": "Reset dockingState to undocked, move ship to origin"
    },
    {
      "case": "Player is actively mining when reset triggered",
      "handling": "Mining will stop automatically when position changes to origin"
    },
    {
      "case": "SaveGameManager is null/undefined",
      "handling": "Skip localStorage clear, log warning, continue with in-memory reset"
    },
    {
      "case": "EconomyManager is null/undefined",
      "handling": "Skip credits reset, log warning, continue with other resets"
    },
    {
      "case": "localStorage is disabled by browser",
      "handling": "Catch exception in try-catch, log warning, continue with in-memory reset"
    },
    {
      "case": "Rapid clicking of Reset button",
      "handling": "Confirmation dialog prevents multiple simultaneous resets"
    },
    {
      "case": "Confirmation dialog already open",
      "handling": "Check if dialog is visible before showing again"
    },
    {
      "case": "User presses ESC during confirmation",
      "handling": "ESC handler closes dialog (same as Cancel button)"
    },
    {
      "case": "Reset triggered during auto-save",
      "handling": "Auto-save will save the reset state after reset completes"
    },
    {
      "case": "Player has no resources/credits to reset",
      "handling": "Reset operations are idempotent - safe to call on empty state"
    }
  ],
  
  "codeSnippets": {
    "confirmationDialogHTML": {
      "location": "DebugMenu.createMenu() after line 96",
      "code": "<!-- Confirmation Dialog (hidden by default) -->\n<div class=\"confirmation-backdrop\" style=\"display: none;\">\n  <div class=\"confirmation-panel\">\n    <div class=\"confirmation-title\">‚ö†Ô∏è Reset Player State</div>\n    <div class=\"confirmation-message\">\n      This will completely reset ALL player progress:\n      <br>‚Ä¢ Position and velocity\n      <br>‚Ä¢ Credits and resources  \n      <br>‚Ä¢ Ship fitting and modules\n      <br>‚Ä¢ Skills and progression\n      <br>‚Ä¢ All saved data\n      <br><br>\n      This action cannot be undone.\n      <br><br>\n      Are you sure?\n    </div>\n    <div class=\"confirmation-buttons\">\n      <button class=\"btn-cancel\">Cancel</button>\n      <button class=\"btn-confirm\">Confirm Reset</button>\n    </div>\n  </div>\n</div>"
    },
    
    "resetPlayerStateMethod": {
      "location": "DebugMenu class, after clearAllObjects() method",
      "pseudocode": "resetPlayerState() {\n  console.log('üîÑ Resetting player state...');\n  \n  // 1. Clear localStorage\n  try {\n    localStorage.removeItem('superstarships_savegame');\n    localStorage.removeItem('superstarships_savegame_backup');\n  } catch (e) { console.warn('localStorage clear failed:', e); }\n  \n  // 2. Reset player ship physics\n  if (this.simulator.playerShip) {\n    this.simulator.playerShip.physics.position.x = 0;\n    this.simulator.playerShip.physics.position.y = 0;\n    this.simulator.playerShip.physics.position.z = 0;\n    this.simulator.playerShip.physics.velocity.x = 0;\n    this.simulator.playerShip.physics.velocity.y = 0;\n    this.simulator.playerShip.physics.velocity.z = 0;\n  }\n  \n  // 3. Reset economy\n  if (this.simulator.economyManager) {\n    this.simulator.economyManager.playerCredits = 100000;\n  }\n  \n  // 4. Reset resources\n  if (this.simulator.resourceManager) {\n    this.simulator.resourceManager.clearPlayerResources();\n  }\n  \n  // 5. Reset ship fitting\n  if (this.simulator.shipFittingManager) {\n    this.simulator.shipFittingManager.initializePlayerShip();\n  }\n  \n  // 6. Reset skills\n  if (this.simulator.skillSystem) {\n    this.simulator.skillSystem.character = this.simulator.skillSystem.initializeCharacter();\n  }\n  \n  // 7. Reset docking state\n  if (this.simulator.stationManager) {\n    this.simulator.stationManager.dockingState = {\n      isDocked: false,\n      isApproaching: false,\n      targetStation: null\n    };\n  }\n  \n  // 8. Trigger save\n  if (this.simulator.saveGameManager) {\n    this.simulator.saveGameManager.markDirty();\n  }\n  \n  // 9. Show notification\n  if (this.simulator.hudManager) {\n    this.simulator.hudManager.showNotification(\n      'Player state reset - Starting fresh!',\n      { color: '#ff6600' }\n    );\n  }\n  \n  // 10. Close debug menu\n  this.hide();\n  \n  console.log('‚úÖ Player state completely reset');\n}"
    },
    
    "warningButtonCSS": {
      "location": "css/debug-menu.css, after existing debug-btn styles",
      "code": ".debug-btn-warning {\n  background: rgba(255, 60, 0, 0.2);\n  border: 1px solid #ff3c00;\n  color: #ffaa88;\n}\n\n.debug-btn-warning:hover {\n  background: rgba(255, 60, 0, 0.3);\n  border-color: #ff6600;\n  box-shadow: 0 0 15px rgba(255, 60, 0, 0.4);\n}\n\n.debug-btn-warning:active {\n  background: rgba(255, 60, 0, 0.4);\n  transform: translateX(1px);\n}"
    }
  },
  
  "risks": [
    {
      "risk": "User accidentally confirms reset and loses progress",
      "mitigation": "Strong warning styling, explicit confirmation dialog with clear message, no keyboard shortcuts"
    },
    {
      "risk": "Incomplete reset if a manager is null",
      "mitigation": "Null-safe checks, continue with other resets, log warnings"
    },
    {
      "risk": "localStorage quota exceeded when saving reset state",
      "mitigation": "Reset reduces localStorage usage, so quota issues unlikely"
    },
    {
      "risk": "Reset doesn't persist after page refresh",
      "mitigation": "Call saveGameManager.markDirty() to trigger auto-save after reset"
    },
    {
      "risk": "Confirmation dialog z-index conflicts with other UI",
      "mitigation": "Set z-index: 16000 (higher than debug menu's 15000)"
    }
  ],
  
  "testingStrategy": {
    "manual": [
      "Open debug menu and verify button exists",
      "Verify warning styling on button",
      "Click button and verify confirmation dialog appears",
      "Test Cancel button - verify no changes",
      "Test ESC key - verify dialog closes",
      "Add test data (credits, resources, fitted items)",
      "Confirm reset and verify all state cleared",
      "Verify notification appears",
      "Verify debug menu closes",
      "Refresh page and verify reset persisted"
    ],
    
    "automated": [
      {
        "script": "test_reset_player_state.js",
        "tests": [
          "TC-001: Debug menu has Reset button",
          "TC-002: Add test inventory",
          "TC-003: Verify inventory before reset",
          "TC-004: Add test credits",
          "TC-005: Verify state before reset",
          "TC-006: Click Reset button",
          "TC-007: Verify confirmation dialog",
          "TC-008: Click Confirm",
          "TC-009: Verify inventory cleared",
          "TC-010: Verify credits reset",
          "TC-011: Verify position reset",
          "TC-012: Verify modules cleared",
          "TC-013: Verify skills cleared",
          "TC-014: Verify localStorage cleared"
        ],
        "edgeCases": [
          "Cancel button test",
          "Reset during mining test"
        ]
      }
    ]
  },
  
  "documentation": {
    "userFacing": "Press Left Control to open debug menu. Click 'Reset Player State' in SYSTEM section. Confirm to completely reset all progress.",
    "developerNotes": "Reset is orchestrated through DebugMenu.resetPlayerState(). Each manager is reset independently with null-safe checks. SaveGameManager.markDirty() triggers auto-save of reset state.",
    "codeComments": "All methods include detailed inline comments explaining each reset operation and edge case handling."
  }
}
```

## Summary

This is a comprehensive implementation plan for adding a **Reset Player State** feature to the debug menu. The implementation involves:

### Key Components:
1. **New Debug Menu Section** (SYSTEM) with warning-styled reset button
2. **Confirmation Dialog** - Modal with backdrop, warning message, and Cancel/Confirm buttons  
3. **Reset Orchestrator** - resetPlayerState() method that coordinates reset across all game systems
4. **CSS Styling** - Warning button styles and confirmation dialog styles

### Implementation Order (11 Steps):
1. Add warning button CSS styles
2. Add confirmation dialog CSS styles
3. Add SYSTEM section HTML to debug menu
4. Add confirmation dialog HTML
5. Implement showResetConfirmation() method
6. Implement hideResetConfirmation() method
7. Implement resetPlayerState() core logic (12 sub-steps)
8. Add button binding
9. Add ESC key handler
10. Manual testing
11. Automated testing

### Reset Operations:
- Clear localStorage (all save keys)
- Reset position to (0,0,0), velocity to (0,0,0)
- Reset credits to 100,000
- Clear all resources
- Reset ship fitting to default Atron
- Reset skills to initial state
- Reset docking state
- Trigger auto-save
- Show notification

### Safety Features:
- ‚ö†Ô∏è Warning-styled button
- Mandatory confirmation dialog
- Clear warning message about irreversibility
- ESC key closes dialog
- Null-safe checks throughout
- Try-catch blocks for error handling

### Files Modified:
- `js/debug/DebugMenu.js` (+150 lines)
- `css/debug-menu.css` (+80 lines)

### Testing:
- Comprehensive manual test plan (10 scenarios)
- Automated test script already exists: `test_reset_player_state.js` (14 test cases + 2 edge cases)

DECISION: implementation_plan_ready