Excellent! I've created a comprehensive test plan and the actual test script for the intro popup reset feature.

## Test Plan Summary

**Feature:** Reset Intro/Tutorial Popup State on Player State Reset

**Total Test Coverage:**
- **14 main test cases** covering the complete reset flow
- **2 edge cases** for Cancel button and missing key scenarios
- **Console log verification** to ensure proper logging

### Main Test Scenario (`defineScenario()`)

The test script validates:

1. âœ… **Setup**: Set `quantum_controls_seen` to simulate a returning player
2. âœ… **Pre-Reset Verification**: Confirm the key exists and player has modified state
3. âœ… **Reset Flow**: Click Reset Player State â†’ Confirm dialog â†’ Execute reset
4. âœ… **ðŸŽ¯ CRITICAL TEST**: Verify `quantum_controls_seen` is REMOVED from localStorage
5. âœ… **State Verification**: Confirm all player state reset (credits, inventory, etc.)
6. âœ… **Console Verification**: Check for "âœ… Tutorial/intro popup state cleared" message

### Edge Cases

1. **Cancel Button Test**: Verifies that clicking Cancel preserves the intro state
2. **Missing Key Test**: Ensures no errors when resetting without the key present

### Test Script Features

The script (`test_intro_popup_reset.js`) includes:

- **ChromeManager Integration**: Automatic Chrome lifecycle management
- **WebSocket Automation**: Commands sent to game's automation endpoint
- **Evidence Collection**: 
  - Command execution results
  - Console logs with error detection
  - Detailed pass/fail tracking
- **Console Log Analysis**: Verifies the "Tutorial/intro popup state cleared" message
- **JSON Evidence File**: Complete test results saved for analysis
- **Exit Codes**: 0 for pass, 1 for fail (CI/CD compatible)

### Critical Test Case

The test includes a **ðŸŽ¯ CRITICAL** verification step:

```javascript
{
  command: 'getLocalStorageItem',
  params: {key: 'quantum_controls_seen'},
  verify: (response) => {
    // Key should be removed (null, undefined, or empty string)
    return response.value === null ||
           response.value === undefined ||
           response.value === '' ||
           response.exists === false;
  },
  desc: 'ðŸŽ¯ CRITICAL: Verify quantum_controls_seen removed from localStorage'
}
```

This is the **core validation** that ensures the feature works correctly.

### Running the Test

```bash
# Run the test
node test_intro_popup_reset.js

# Or with executable permission
./test_intro_popup_reset.js
```

### Expected Output

```
=== INTRO POPUP RESET FEATURE TEST ===
Testing: Intro/Tutorial popup state reset functionality

[1/6] Launching Chrome...
[2/6] Connecting to game WebSocket...
[3/6] Running main test scenario...
  â†’ Set quantum_controls_seen to true...
    âœ“ PASSED
  ...
  â†’ ðŸŽ¯ CRITICAL: Verify quantum_controls_seen removed from localStorage...
    âœ“ PASSED
  ...
[4/6] Running edge case tests...
[5/6] Collecting console logs...
[6/6] Saving evidence...

=== TEST SUMMARY ===
Status: FEATURE_VERIFIED
Main commands executed: 14
Edge cases tested: 2
ðŸŽ¯ CRITICAL TEST: quantum_controls_seen removed: âœ“ PASS
```

### Evidence File

The test generates a JSON evidence file:
- `intro_popup_reset_test_evidence_[timestamp].json` - Complete test results
- Includes all command responses, console logs, and verification results
- Windows path to Chrome debug log for detailed debugging

DECISION: test_plan_ready