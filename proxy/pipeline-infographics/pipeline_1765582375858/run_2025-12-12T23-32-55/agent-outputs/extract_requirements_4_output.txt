Now I have all the design documents. Let me compile the complete requirements for the Items/Loot feature.

## Feature: Items/Loot System

### Specifications from Design Docs

---

#### From combat-design.md (Lines 897-1001): Loot Drop Tables

**Standard Enemy Drops:**
> ```
> COMMON ENEMY (e.g., Guardsman, Fire Warrior, Slugga Boy)
> ├── Currency: 10-25 Thrones (100%)
> ├── T1 Material: 60% chance, 1-2 quantity
> ├── T2 Material: 15% chance, 1 quantity
> ├── T3 Material: 1% chance
> ├── T1 Consumable: 10% chance
> ├── T2 Consumable: 2% chance
> ├── Equipment: 0.5% chance (T1-T2)
> └── Special: 0.1% chance named item
> ```

**Elite Enemy Drops:**
> ```
> ELITE ENEMY (e.g., Space Marine, Crisis Suit, Nob)
> ├── Currency: 35-60 Thrones (100%)
> ├── T1 Material: 30% chance, 2-3 quantity
> ├── T2 Material: 40% chance, 1-2 quantity
> ├── T3 Material: 15% chance, 1 quantity
> ├── T4 Material: 5% chance
> ├── T2 Consumable: 20% chance
> ├── T3 Consumable: 5% chance
> ├── Equipment: 5% chance (T2-T3)
> └── Special: 1% chance named item
> ```

**Boss Drops:**
> ```
> BOSS ENEMY (e.g., Warboss, Commander)
> ├── Currency: 200-500 Thrones (100%)
> ├── T3 Material: 100% chance, 2-4 quantity
> ├── T4 Material: 50% chance, 1-2 quantity
> ├── T5 Material: 10% chance
> ├── T3 Consumable: 50% chance
> ├── T4 Consumable: 20% chance
> ├── Equipment: 25% chance (T3-T4)
> ├── Named Equipment: 5% chance
> └── Special: 1% chance legendary
> ```

---

#### Equipment Tier System (Lines 948-985):

> ```
> TIER 1: BASIC
> ├── Stats: Base values, no bonuses
> ├── Sources: Starting gear, common drops, basic vendors
> ├── Example: Standard Lasgun (40 damage, 1.0 attack speed)
> └── Level Requirement: 1-5
> 
> TIER 2: IMPROVED
> ├── Stats: +15% base stats, 1 bonus stat
> ├── Sources: Quest rewards, uncommon drops, crafted
> ├── Example: Kantrael Pattern Lasgun (46 damage, 1.0 speed, +10 Initiative)
> └── Level Requirement: 6-10
> 
> TIER 3: SUPERIOR
> ├── Stats: +30% base stats, 2 bonus stats
> ├── Sources: Elite content, rare drops, advanced crafting
> ├── Example: Hellgun (52 damage, 1.1 speed, +15 Ballistics, +10% crit)
> └── Level Requirement: 11-15
> 
> TIER 4: EXCEPTIONAL
> ├── Stats: +50% base stats, 3 bonus stats, 1 special effect
> ├── Sources: Endgame content, boss drops, master crafting
> ├── Example: Hot-Shot Lasgun (60 damage, 1.2 speed, +20 Ballistics, +15% crit, "Armor Piercing")
> └── Level Requirement: 16-20
> 
> TIER 5: MASTERWORK
> ├── Stats: +75% base stats, 4 bonus stats, 1-2 special effects
> ├── Sources: Raid content, legendary crafting, ultra-rare drops
> ├── Example: Artificer Hellgun (70 damage, 1.3 speed, +25 Ballistics, +20% crit, "Emperor's Wrath", "Armor Bane")
> └── Level Requirement: 20+
> 
> LEGENDARY: NAMED ITEMS
> ├── Stats: Unique combinations, powerful special effects
> ├── Sources: Specific bosses, quest chains, world events
> ├── Example: "Saint Celestine's Grace" - Holy weapon with unique skill unlock
> └── Level Requirement: Varies
> ```

---

#### Special Effects (Lines 987-1001):

| Effect Name | Description | Equipment Slots |
|-------------|-------------|-----------------|
| Armor Piercing | Ignore 25% of enemy armor | Weapons |
| Armor Bane | +50% damage vs heavily armored | Weapons |
| Holy | +50% damage vs Daemons/Chaos | Weapons |
| Blessed | +20% healing received | Armor |
| Fortified | -15% damage from crits | Armor |
| Swift | +10% movement speed | Boots |
| Energized | +5 energy regeneration | Accessories |
| Vampiric | Heal 5% of damage dealt | Weapons |
| Explosive | 20% chance for AoE on hit | Ranged Weapons |
| Chained | 15% chance to hit additional target | Ranged Weapons |

---

#### From data-model.md: Item Entity Structures

**Item Templates (Lines 715-772):**
> ```sql
> CREATE TABLE item_templates (
>     template_id         SERIAL PRIMARY KEY,
>     item_code           VARCHAR(50) NOT NULL UNIQUE,
>     display_name        VARCHAR(100) NOT NULL,
>     description         TEXT,
>     item_tier           item_tier NOT NULL,
>     item_slot           item_slot NOT NULL,
>     weapon_type         weapon_type,
>     required_level      INTEGER DEFAULT 1,
>     required_class_ids  INTEGER[],
>     required_faction_id INTEGER REFERENCES factions(faction_id),
>     base_damage         INTEGER DEFAULT 0,
>     base_armor          INTEGER DEFAULT 0,
>     attack_speed        DECIMAL(4,2) DEFAULT 1.0,
>     stat_bonuses        JSONB DEFAULT '{}',
>     possible_effects    VARCHAR(50)[],
>     guaranteed_effects  VARCHAR(50)[],
>     set_id              INTEGER,
>     vendor_buy_price    INTEGER DEFAULT 0,
>     vendor_sell_price   INTEGER DEFAULT 0,
>     is_tradeable        BOOLEAN DEFAULT TRUE,
>     is_bound_on_pickup  BOOLEAN DEFAULT FALSE,
>     is_bound_on_equip   BOOLEAN DEFAULT FALSE,
>     icon_asset_path     VARCHAR(255),
>     model_asset_path    VARCHAR(255),
>     is_craftable        BOOLEAN DEFAULT FALSE,
>     recipe_id           INTEGER
> );
> ```

**Item Instances (Lines 774-824):**
> ```sql
> CREATE TABLE items (
>     item_id             UUID PRIMARY KEY DEFAULT gen_random_uuid(),
>     template_id         INTEGER NOT NULL REFERENCES item_templates(template_id),
>     owner_character_id  UUID REFERENCES characters(character_id),
>     owner_account_id    UUID REFERENCES accounts(account_id),
>     location_type       VARCHAR(20) NOT NULL,  -- INVENTORY, EQUIPPED, BANK, AUCTION, MAIL
>     inventory_slot      INTEGER,
>     equipment_slot      item_slot,
>     rolled_stats        JSONB DEFAULT '{}',    -- {"strength": 15, "ballistics": 10}
>     active_effects      VARCHAR(50)[],
>     refinement_level    INTEGER DEFAULT 0,
>     infusion_effect     VARCHAR(50),
>     is_bound            BOOLEAN DEFAULT FALSE,
>     bound_to            UUID,
>     max_durability      INTEGER DEFAULT 100,
>     current_durability  INTEGER DEFAULT 100,
>     stack_count         INTEGER DEFAULT 1,
>     created_at          TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
>     created_by          VARCHAR(50),           -- DROP, CRAFT, VENDOR, TRADE
>     source_details      JSONB DEFAULT '{}'
> );
> ```

**Item Slot Enumeration (Lines 291-302):**
> ```sql
> CREATE TYPE item_slot AS ENUM (
>     'WEAPON_PRIMARY',
>     'WEAPON_SECONDARY',
>     'WEAPON_TWO_HANDED',
>     'ARMOR_HEAD',
>     'ARMOR_CHEST',
>     'ARMOR_HANDS',
>     'ARMOR_FEET',
>     'ACCESSORY_1',
>     'ACCESSORY_2'
> );
> ```

**Item Tier Enumeration (Lines 280-289):**
> ```sql
> CREATE TYPE item_tier AS ENUM (
>     'T1_BASIC',
>     'T2_IMPROVED',
>     'T3_SUPERIOR',
>     'T4_EXCEPTIONAL',
>     'T5_MASTERWORK',
>     'LEGENDARY'
> );
> ```

**Material Definitions (Lines 926-958):**
> ```sql
> CREATE TYPE material_tier AS ENUM ('T1', 'T2', 'T3', 'T4', 'T5', 'LEGENDARY');
> 
> CREATE TABLE materials (
>     material_def_id     SERIAL PRIMARY KEY,
>     material_code       VARCHAR(50) NOT NULL UNIQUE,
>     display_name        VARCHAR(100) NOT NULL,
>     tier                material_tier NOT NULL,
>     faction_id          INTEGER REFERENCES factions(faction_id),
>     source_description  TEXT,
>     vendor_value        INTEGER DEFAULT 0,
>     icon_asset_path     VARCHAR(255)
> );
> ```

**Sample Materials:**
> - SCRAP_METAL (T1): Common drop from enemies
> - REFINED_METAL (T2): Crafted from Scrap Metal or elite drops
> - PLASTEEL (T3): Hard mode enemy drops
> - ADAMANTIUM_SHARD (T4): Veteran content drops
> - LIVING_METAL (T5): Nightmare content drops
> - CELESTINE_FRAGMENT (LEGENDARY): Legendary bosses only

**Loot Tables (Lines 1203-1232):**
> ```sql
> CREATE TABLE loot_tables (
>     table_id            SERIAL PRIMARY KEY,
>     table_code          VARCHAR(50) NOT NULL UNIQUE,
>     description         TEXT
> );
> 
> CREATE TABLE loot_table_entries (
>     entry_id            SERIAL PRIMARY KEY,
>     table_id            INTEGER NOT NULL REFERENCES loot_tables(table_id),
>     drop_type           VARCHAR(20) NOT NULL,  -- ITEM, MATERIAL, CURRENCY
>     item_template_id    INTEGER REFERENCES item_templates(template_id),
>     material_code       VARCHAR(50),
>     currency_min        INTEGER,
>     currency_max        INTEGER,
>     drop_chance         DECIMAL(5,4) NOT NULL,  -- 0.0001 to 1.0000
>     quantity_min        INTEGER DEFAULT 1,
>     quantity_max        INTEGER DEFAULT 1,
>     difficulty_min      difficulty_level,
>     first_kill_bonus    DECIMAL(4,2) DEFAULT 1.0
> );
> ```

---

#### From api-specification.md: Loot WebSocket Events (Lines 1326-1344)

**Loot Drop Message:**
> ```json
> {
>   "type": "LOOT_DROP",
>   "source_entity_id": "enemy-instance-uuid",
>   "loot_container_id": "loot-uuid",
>   "position": {"x": 130.0, "y": 460.0, "z": 0.0},
>   "items": [
>     {
>       "item_id": "new-item-uuid",
>       "display_name": "Chainsword",
>       "item_tier": "T3_SUPERIOR",
>       "eligible_characters": ["a1b2c3d4-e5f6-7890-abcd-ef1234567890"]
>     }
>   ],
>   "currency": 45,
>   "materials": [
>     {"material_code": "SCRAP_METAL", "quantity": 3}
>   ],
>   "expires_in_sec": 60
> }
> ```

---

#### From systems-integration.md: Combat → Economy Flow (Lines 89-116)

> ```
> PLAYER ACTION: COMBAT VICTORY
> │
> ├──► CURRENCY (→ Economy)
> │    ├── 10-25 Thrones (Common)
> │    ├── 35-60 Thrones (Elite)
> │    ├── 200-500 Thrones (Boss)
> │
> ├──► MATERIALS (→ Economy → Crafting)
> │    ├── T1-T2 (Levels 1-10)
> │    ├── T2-T3 (Levels 11-20)
> │    └── T4-T5 (Levels 21-30+)
> │
> ├──► EQUIPMENT (→ Progression → Combat)
> │    ├── Drops by level tier
> │    └── Enables harder content
> ```

---

#### Visual Requirements (From Client Perspective)

**From api-specification.md Loot Drop Event:**
- Loot drops at enemy death position
- Loot container has expiration timer (60 seconds default)
- Different item tiers should have visual distinction
- Currency (Thrones) shown as currency icon
- Materials shown with quantity
- Items show tier indicator

**Faction Aesthetics (Implied from faction design):**
- **Imperial**: Gold/red/white colors, gothic aesthetic
- **Tau**: Blue/white/orange, sleek technological 
- **Ork**: Green/brown/rusty, crude/scrap aesthetic

---

### Implementation Checklist

#### Core Loot System
- [ ] Create LootDrop class/entity that spawns at enemy death position
- [ ] Implement loot container with position (x, y) and expiration timer (60 sec)
- [ ] Create visual representation for loot drops (ground item, glow effect)

#### Drop Tables Implementation
- [ ] Implement currency drops: Common (10-25), Elite (35-60), Boss (200-500)
- [ ] Implement material drops with tier-based chances per enemy type
- [ ] Implement equipment drops with rarity percentages
- [ ] Add first-kill bonus multiplier support

#### Item System
- [ ] Create Item class with properties:
  - item_id, template_id, display_name
  - item_tier (T1-T5, LEGENDARY)
  - item_slot (WEAPON_PRIMARY, ARMOR_CHEST, etc.)
  - base_damage/base_armor/attack_speed
  - rolled_stats (JSON object)
  - active_effects (array of effect codes)
  - durability (current/max)
- [ ] Implement item tier stat modifiers:
  - T1: Base values
  - T2: +15% base stats, 1 bonus stat
  - T3: +30% base stats, 2 bonus stats
  - T4: +50% base stats, 3 bonus stats, 1 effect
  - T5: +75% base stats, 4 bonus stats, 1-2 effects
- [ ] Implement stat rolling system for random bonuses

#### Material System  
- [ ] Create Material storage system
- [ ] Implement materials: SCRAP_METAL (T1), REFINED_METAL (T2), PLASTEEL (T3), ADAMANTIUM_SHARD (T4), LIVING_METAL (T5)
- [ ] Display material quantity in loot drops

#### Special Effects
- [ ] Implement effect system for items:
  - ARMOR_PIERCING: 25% armor ignore
  - ARMOR_BANE: +50% vs armored
  - HOLY: +50% vs Daemons
  - VAMPIRIC: 5% lifesteal
  - EXPLOSIVE: 20% AoE chance
  - BLESSED: +20% healing received
  - SWIFT: +10% movement
  - ENERGIZED: +5 energy regen

#### Loot Pickup
- [ ] Implement click-to-pickup interaction
- [ ] Add items to player inventory on pickup
- [ ] Add currency to player wallet on pickup
- [ ] Add materials to player material storage on pickup
- [ ] Show pickup notification/feedback

#### UI Elements
- [ ] Loot drop visual indicator on ground
- [ ] Item tooltip showing stats, tier, effects
- [ ] Inventory UI for viewing collected items
- [ ] Material storage display
- [ ] Currency (Thrones) display

#### Enemy Integration
- [ ] Call loot generation on enemy death
- [ ] Use enemy type to select appropriate loot table (COMMON, ELITE, BOSS)
- [ ] Spawn loot at enemy death position

DECISION: requirements_extracted