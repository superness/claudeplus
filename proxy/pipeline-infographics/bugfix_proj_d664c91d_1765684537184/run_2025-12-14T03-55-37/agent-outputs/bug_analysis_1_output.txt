## Bug Analysis

### Summary
Three.js rendering crash when enemy dies and drops loot in combat

### Expected Behavior
When an enemy (specifically a Cultist) is killed in combat, loot orbs should spawn and the game should continue rendering without errors. The scene should remain stable with remaining enemies and companions continuing combat.

### Actual Behavior
After killing a Cultist enemy, the Three.js renderer crashes with repeated `TypeError: Cannot read properties of undefined (reading 'value')` in `refreshUniformsCommon`. The error occurs continuously in every subsequent render frame, making the game unplayable. The error originates from Three.js trying to access shader uniform values that no longer exist.

### Trigger Condition
1. Player is in combat with multiple enemies including at least one Cultist
2. Player or companion kills the Cultist (in this case, Crusader Marcus uses "Holy Strike")
3. Cultist's health drops to 0 and death is triggered
4. Loot system generates 2 loot orbs (CURRENCY and MATERIAL types)
5. LootVisualization creates visual loot orbs at the death location
6. Next render frame attempts to render the scene and crashes

### Error Messages
```
Uncaught TypeError: Cannot read properties of undefined (reading 'value')
    at refreshUniformsCommon (three.js:16544:25)
    at Object.refreshMaterialUniforms (three.js:16497:7)
    at setProgram (three.js:18074:19)
    at WebGLRenderer.renderBufferDirect (three.js:17369:23)
```

The error repeats continuously on every frame in the game loop (`Game.ts:940` â†’ `gameLoop @ Game.ts:877`).

### Affected Systems
- **3D Rendering**: Three.js WebGL renderer (primary)
- **Loot System**: Loot generation and visualization (trigger)
- **Enemy System**: Enemy death handling and cleanup
- **Material/Shader System**: Shader uniforms management
- **Scene Graph**: Object removal from Three.js scene

### Reproduction Approach
A test should:
1. Set up a combat scenario with at least one Cultist enemy
2. Deal damage to reduce Cultist health to 0
3. Trigger death and loot drop sequence
4. Attempt to render the next frame
5. Verify that shader uniforms are properly cleaned up
6. Check if the dead enemy's mesh/material is properly disposed
7. Confirm loot orbs are created without breaking existing scene objects

The bug likely indicates that when an enemy dies, its Three.js mesh or material is removed from the scene but shader uniforms are not properly cleaned up, or a reference to the dead enemy's material persists somewhere in the render pipeline.

DECISION: analysis_complete