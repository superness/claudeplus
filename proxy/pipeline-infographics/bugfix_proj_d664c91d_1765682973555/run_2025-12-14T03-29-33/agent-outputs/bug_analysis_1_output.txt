Now I have a complete understanding of the bug. The issue is clear:

**Bug Summary**: Three.js rendering crash after enemy death - "Cannot read properties of undefined (reading 'value')" in refreshUniformsCommon

**Expected Behavior**: When an enemy dies and plays its death animation with material property changes (opacity, emissive), the rendering should continue smoothly without errors.

**Actual Behavior**: After killing an enemy (specifically mentioned "purple guy" = Chaos faction enemy), Three.js throws repeated TypeError crashes in `refreshUniformsCommon` trying to access `.value` on an undefined uniform. The errors spam continuously during the game loop, breaking rendering.

**Affected Systems**: 
- Rendering system (Three.js WebGL renderer)
- Enemy death animation system
- Material management system
- Combat system (triggers enemy death)

**Severity**: HIGH

**Reproduction Steps**:
1. Start combat encounter with enemies
2. Kill a Chaos Marine or other "purple" Chaos faction enemy
3. Enemy dies and triggers death animation (THERMAL, PHOTON, or KINETIC)
4. Three.js immediately starts throwing uniform access errors
5. Errors spam every frame, breaking rendering

**Likely Source Files**: 
- `/mnt/c/github/40kgw/output/client/src/game/entities/Enemy.ts` (lines 1383-1489 - death animation)
- `/mnt/c/github/40kgw/output/client/src/game/entities/Enemy.ts` (lines 237-952 - material creation)
- `/mnt/c/github/40kgw/output/client/src/game/entities/Enemy.ts` (lines 1703-1724 - disposal)
- `/mnt/c/github/40kgw/output/client/src/game/Game.ts` (line 940 - render call)

**Initial Hypothesis**: 

The bug is caused by a **material property modification timing issue**. During the death animation (`updateDeathAnimation` at lines 1393-1435), the code directly modifies material properties (opacity, emissive, emissiveIntensity) on `MeshStandardMaterial` objects. However:

1. **Materials are not initialized with `transparent: true`**: Most materials (lines 237-952) don't have the `transparent` flag set. When opacity is modified at line 1395 or 1432, Three.js needs to recompile the shader program, which can cause uniforms to become undefined during the transition.

2. **Material properties are mutated during render loop**: The death animation modifies materials every frame while they're actively being rendered. Three.js caches shader programs based on material properties, and changing `transparent`, `opacity`, or `emissive` values can trigger shader recompilation mid-frame.

3. **Race condition with material disposal**: When the death callback fires (line 1316), loot generation occurs, which may trigger other game logic. The enemy mesh remains in the scene during the death animation, but its materials are being actively modified. If something else tries to dispose or modify these shared materials, uniforms become undefined.

4. **The uniform `.value` is undefined**: The Three.js error occurs when trying to access a uniform's value property that doesn't exist, typically when a shader program is in an inconsistent state due to material property changes requiring shader recompilation.

**Root cause**: Materials need `transparent: true` set at initialization OR before modifying opacity, and material modifications should not happen while the mesh is being rendered, or should trigger proper material.needsUpdate flags.

DECISION: analysis_complete