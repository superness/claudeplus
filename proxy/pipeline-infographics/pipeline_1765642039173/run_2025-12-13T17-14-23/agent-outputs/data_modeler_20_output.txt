## Summary

I've created a comprehensive data model for Cosmic Tic-Tac-Toe that translates the game design into concrete database schemas. The document includes:

**Core Tables (8)**: Player identity, progression tracking, wallet (6 currencies), inventory, equipped loadout, and win/draw streak management.

**Cosmetic System**: Full item catalog with tiered pricing (Commonâ†’Legendary), faction alignment (Orbis/Crucia/Neutral/Awakened), particle effect configurations stored as JSONB, and time-limited availability support.

**Skill Trees**: Three-tree structure with 12 nodes each for Orbis/Crucia, plus the Awakened Path. Node prerequisites enforce branch progression, with currency costs matching the design docs.

**Match System**: Complete game recording including move-by-move history, cell positions, impact scores, strategic classifications (fork, block, comeback), and AI tier tracking.

**Economy**: Immutable wallet transaction ledger, player-to-player trading with 10% tax and daily limits, shop rotation system, and consumable inventory.

**Critical Balance Fixes Applied**:
- Streak rewards (VF/AC/PS) gated behind Grid Walker+ AI via database trigger
- Currency caps enforced at database level (200 VF, 50 AC, 10 PS)
- Draw streak tracking added for The Eternal achievement

**Performance**: Includes indexes for common queries, table partitioning strategy for high-volume tables (matches, transactions), caching recommendations, and a materialized view for the player dashboard.

**Migration Strategy**: Schema versioning table with rollback templates for safe deployments.

DECISION: schemas_complete