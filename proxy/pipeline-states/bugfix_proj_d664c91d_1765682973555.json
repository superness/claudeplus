{
  "id": "bugfix_proj_d664c91d_1765682973555",
  "name": "Game Bug Fix Pipeline",
  "startTime": "2025-12-14T03:29:33.625Z",
  "stages": [
    {
      "id": "bug_analysis",
      "name": "Bug Analysis",
      "type": "analyzer",
      "agent": "game_bug_analyzer",
      "description": "Analyze the bug report to understand symptoms, expected behavior, and gather context",
      "decisions": [
        {
          "choice": "analysis_complete",
          "description": "Bug analysis complete with clear understanding"
        }
      ]
    },
    {
      "id": "create_reproduction",
      "name": "Create Reproduction",
      "type": "creator",
      "agent": "game_bug_reproducer",
      "description": "Create a test script that reproduces the bug so we can confirm it exists",
      "inputs": [
        "bug_analysis"
      ],
      "decisions": [
        {
          "choice": "reproduction_ready",
          "description": "Reproduction script created and ready to run"
        }
      ]
    },
    {
      "id": "confirm_bug",
      "name": "Confirm Bug Exists",
      "type": "executor",
      "agent": "game_bug_confirmer",
      "description": "Run the reproduction script to confirm the bug exists before we try to fix it",
      "inputs": [
        "create_reproduction",
        "bug_analysis"
      ],
      "decisions": [
        {
          "choice": "bug_confirmed",
          "description": "Bug successfully reproduced - proceed with fix"
        },
        {
          "choice": "bug_not_reproduced",
          "description": "Bug could not be reproduced - needs investigation"
        },
        {
          "choice": "reproduction_failed",
          "description": "Reproduction script failed to run"
        }
      ]
    },
    {
      "id": "code_investigation",
      "name": "Code Investigation",
      "type": "analyzer",
      "agent": "game_code_investigator",
      "description": "Investigate game code to locate the source of the bug and identify root cause",
      "inputs": [
        "confirm_bug",
        "bug_analysis"
      ],
      "decisions": [
        {
          "choice": "root_cause_found",
          "description": "Root cause identified with clear fix strategy"
        },
        {
          "choice": "need_more_context",
          "description": "Need additional information to pinpoint issue"
        }
      ]
    },
    {
      "id": "gather_context",
      "name": "Gather Additional Context",
      "type": "analyzer",
      "agent": "game_context_gatherer",
      "description": "Gather additional context by examining related code and dependencies",
      "inputs": [
        "code_investigation"
      ],
      "decisions": [
        {
          "choice": "context_gathered",
          "description": "Additional context collected, ready to re-investigate"
        }
      ]
    },
    {
      "id": "implement_fix",
      "name": "Implement Bug Fix",
      "type": "executor",
      "agent": "game_bug_fixer",
      "description": "Implement the bug fix based on root cause analysis",
      "inputs": [
        "code_investigation"
      ],
      "decisions": [
        {
          "choice": "fix_implemented",
          "description": "Bug fix implemented in game code"
        },
        {
          "choice": "fix_requires_refactor",
          "description": "Fix requires broader refactoring"
        }
      ]
    },
    {
      "id": "refactor_for_fix",
      "name": "Refactor for Fix",
      "type": "executor",
      "agent": "game_refactorer",
      "description": "Perform necessary refactoring to properly implement the bug fix",
      "inputs": [
        "implement_fix"
      ],
      "decisions": [
        {
          "choice": "refactor_complete",
          "description": "Refactoring complete, fix can be applied"
        }
      ]
    },
    {
      "id": "verify_fix",
      "name": "Verify Bug Fix",
      "type": "validator",
      "agent": "game_fix_verifier",
      "description": "Run the reproduction script again - bug should NOT reproduce now. Also check for regressions.",
      "inputs": [
        "implement_fix",
        "create_reproduction",
        "bug_analysis"
      ],
      "decisions": [
        {
          "choice": "FIX_VERIFIED",
          "description": "Reproduction now passes - bug is fixed!"
        },
        {
          "choice": "FIX_INCOMPLETE",
          "description": "Bug still reproduces - fix didn't work"
        },
        {
          "choice": "REGRESSION_DETECTED",
          "description": "Fix introduced new issues"
        }
      ]
    },
    {
      "id": "document_fix",
      "name": "Document Fix",
      "type": "executor",
      "agent": "game_fix_documenter",
      "description": "Document the bug fix with comments and update any relevant documentation",
      "inputs": [
        "verify_fix",
        "bug_analysis",
        "code_investigation"
      ],
      "decisions": [
        {
          "choice": "documentation_complete",
          "description": "Fix documented and ready for deployment"
        }
      ]
    }
  ],
  "connections": [
    {
      "from": "bug_analysis",
      "to": "create_reproduction",
      "condition": "analysis_complete",
      "description": "Bug analyzed, create reproduction test"
    },
    {
      "from": "create_reproduction",
      "to": "confirm_bug",
      "condition": "reproduction_ready",
      "description": "Run reproduction to confirm bug exists"
    },
    {
      "from": "confirm_bug",
      "to": "code_investigation",
      "condition": "bug_confirmed",
      "description": "Bug confirmed! Now investigate root cause"
    },
    {
      "from": "confirm_bug",
      "to": "bug_analysis",
      "condition": "bug_not_reproduced",
      "description": "Bug not reproduced, re-analyze with more detail"
    },
    {
      "from": "confirm_bug",
      "to": "create_reproduction",
      "condition": "reproduction_failed",
      "description": "Script failed, try different reproduction approach"
    },
    {
      "from": "code_investigation",
      "to": "implement_fix",
      "condition": "root_cause_found",
      "description": "Root cause found, implement fix"
    },
    {
      "from": "code_investigation",
      "to": "gather_context",
      "condition": "need_more_context",
      "description": "Need more information, gather context"
    },
    {
      "from": "gather_context",
      "to": "code_investigation",
      "condition": "context_gathered",
      "description": "Context gathered, re-investigate"
    },
    {
      "from": "implement_fix",
      "to": "verify_fix",
      "condition": "fix_implemented",
      "description": "Fix implemented, verify with reproduction test"
    },
    {
      "from": "implement_fix",
      "to": "refactor_for_fix",
      "condition": "fix_requires_refactor",
      "description": "Fix needs refactoring first"
    },
    {
      "from": "refactor_for_fix",
      "to": "implement_fix",
      "condition": "refactor_complete",
      "description": "Refactoring done, apply fix"
    },
    {
      "from": "verify_fix",
      "to": "document_fix",
      "condition": "FIX_VERIFIED",
      "description": "Reproduction passes - bug is fixed!"
    },
    {
      "from": "verify_fix",
      "to": "code_investigation",
      "condition": "FIX_INCOMPLETE",
      "description": "Bug still reproduces, re-investigate"
    },
    {
      "from": "verify_fix",
      "to": "implement_fix",
      "condition": "REGRESSION_DETECTED",
      "description": "Regression found, revise fix"
    },
    {
      "from": "document_fix",
      "to": null,
      "condition": "documentation_complete",
      "description": "Bug fix complete - PIPELINE ENDS"
    }
  ],
  "userContext": "Bug Report:\n\nWe have this visual bug - after killing a purple guy I think [Combat] DAMAGE: Righteous Fury -> demo-chaos-2 (51)\nEnemy.ts:1557 [Enemy] Chaos Marine took 25 damage (800 -> 775)\nCombatManager.ts:834 [CombatManager] Applied BURNING to enemy demo-chaos-3 (1 stacks)\nCombatManager.ts:1244 [Combat] DAMAGE: Righteous Fury -> demo-chaos-3 (25)\nCombatManager.ts:352 [CombatManager] Skill result: damage=undefined, target=undefined\nInputManager.ts:339 [InputManager] Skill result: Object\nPlayer.ts:302 [Player] Skill 2 requested\n2CompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nInputManager.ts:329 [InputManager] executeSkill(0) called, combatManager=true\nCombatManager.ts:211 [CombatManager] executeSkill(0) called\nCombatManager.ts:219 [CombatManager] Using skill: Holy Strike (ENEMY, range: 2)\nCombatManager.ts:283 [CombatManager] Target enemy: Cultist\nCombatManager.ts:286 [CombatManager] Distance to target: 1.3 (skill range: 2)\nCombatManager.ts:350 [CombatManager] Validation passed! Executing Holy Strike...\nEnemy.ts:1557 [Enemy] Cultist took 70 damage (69 -> 0)\nGame.ts:681 [Loot] Enemy Cultist died - Threat tier: MINORIS\nLootVisualization.ts:88 [LootOrb] Created loot orb at (-34.7, 40.0) - Type: CURRENCY\nLootVisualization.ts:88 [LootOrb] Created loot orb at (-35.3, 40.0) - Type: MATERIAL\nGame.ts:689 [Loot] Generated 2 drops\nCombatManager.ts:834 [CombatManager] Applied BURNING to enemy demo-chaos-1 (2 stacks)\nCombatManager.ts:1244 [Combat] DAMAGE: Holy Strike -> demo-chaos-1 (70)\nCombatManager.ts:352 [CombatManager] Skill result: damage=70, target=demo-chaos-1\nInputManager.ts:339 [InputManager] Skill result: Object\nPlayer.ts:302 [Player] Skill 0 requested\n22three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nInputManager.ts:329 [InputManager] executeSkill(0) called, combatManager=true\nCombatManager.ts:211 [CombatManager] executeSkill(0) called\nCombatManager.ts:219 [CombatManager] Using skill: Holy Strike (ENEMY, range: 2)\nCombatManager.ts:283 [CombatManager] Target enemy: Cultist\nCombatManager.ts:286 [CombatManager] Distance to target: 1.3 (skill range: 2)\nCombatManager.ts:325 [CombatManager] Skill Holy Strike failed: Skill on cooldown: 4s remaining\nInputManager.ts:339 [InputManager] Skill result: Object\nInputManager.ts:348 [InputManager] Skill failed: Skill on cooldown: 4s remaining\n26three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Chaos Marine's Attack -> player (3)\nCombatManager.ts:1401 [Combat] Chaos Marine attacks Player for 3 damage\n14three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Engaging enemy (no skills ready))\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n86three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n81three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n4three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Possessed's Attack -> player (4)\nCombatManager.ts:1401 [Combat] Possessed attacks Player for 4 damage\n82three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Slugga Boy's Attack -> companion_IMP_HENCH_ENGINSEER_COG_1765682551383 (1)\nCombatManager.ts:1401 [Combat] Slugga Boy attacks Enginseer Cog-7 for 1 damage\nCombatManager.ts:1244 [Combat] DAMAGE: Nob's Attack -> companion_IMP_HENCH_ENGINSEER_COG_1765682551383 (3)\nCombatManager.ts:1401 [Combat] Nob attacks Enginseer Cog-7 for 3 damage\nCombatManager.ts:1244 [Combat] DAMAGE: Meganob's Attack -> companion_IMP_HENCH_ENGINSEER_COG_1765682551383 (5)\nCombatManager.ts:1401 [Combat] Meganob attacks Enginseer Cog-7 for 5 damage\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n100three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n100three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Moving into attack range for Precise Shot)\n15three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:913 [CombatManager] BURNING expired on enemy demo-chaos-2\nCombatManager.ts:913 [CombatManager] BURNING expired on enemy demo-chaos-3\n35three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Cultist's Attack -> player (1)\nCombatManager.ts:1401 [Combat] Cultist attacks Player for 1 damage\n2three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)",
  "workingDir": "/mnt/c/github/40kgw/output",
  "currentStageIndex": 2,
  "completedStages": [
    "bug_analysis",
    "create_reproduction"
  ],
  "status": "running",
  "results": {
    "bug_analysis": "Now I have a complete understanding of the bug. The issue is clear:\n\n**Bug Summary**: Three.js rendering crash after enemy death - \"Cannot read properties of undefined (reading 'value')\" in refreshUniformsCommon\n\n**Expected Behavior**: When an enemy dies and plays its death animation with material property changes (opacity, emissive), the rendering should continue smoothly without errors.\n\n**Actual Behavior**: After killing an enemy (specifically mentioned \"purple guy\" = Chaos faction enemy), Three.js throws repeated TypeError crashes in `refreshUniformsCommon` trying to access `.value` on an undefined uniform. The errors spam continuously during the game loop, breaking rendering.\n\n**Affected Systems**: \n- Rendering system (Three.js WebGL renderer)\n- Enemy death animation system\n- Material management system\n- Combat system (triggers enemy death)\n\n**Severity**: HIGH\n\n**Reproduction Steps**:\n1. Start combat encounter with enemies\n2. Kill a Chaos Marine or other \"purple\" Chaos faction enemy\n3. Enemy dies and triggers death animation (THERMAL, PHOTON, or KINETIC)\n4. Three.js immediately starts throwing uniform access errors\n5. Errors spam every frame, breaking rendering\n\n**Likely Source Files**: \n- `/mnt/c/github/40kgw/output/client/src/game/entities/Enemy.ts` (lines 1383-1489 - death animation)\n- `/mnt/c/github/40kgw/output/client/src/game/entities/Enemy.ts` (lines 237-952 - material creation)\n- `/mnt/c/github/40kgw/output/client/src/game/entities/Enemy.ts` (lines 1703-1724 - disposal)\n- `/mnt/c/github/40kgw/output/client/src/game/Game.ts` (line 940 - render call)\n\n**Initial Hypothesis**: \n\nThe bug is caused by a **material property modification timing issue**. During the death animation (`updateDeathAnimation` at lines 1393-1435), the code directly modifies material properties (opacity, emissive, emissiveIntensity) on `MeshStandardMaterial` objects. However:\n\n1. **Materials are not initialized with `transparent: true`**: Most materials (lines 237-952) don't have the `transparent` flag set. When opacity is modified at line 1395 or 1432, Three.js needs to recompile the shader program, which can cause uniforms to become undefined during the transition.\n\n2. **Material properties are mutated during render loop**: The death animation modifies materials every frame while they're actively being rendered. Three.js caches shader programs based on material properties, and changing `transparent`, `opacity`, or `emissive` values can trigger shader recompilation mid-frame.\n\n3. **Race condition with material disposal**: When the death callback fires (line 1316), loot generation occurs, which may trigger other game logic. The enemy mesh remains in the scene during the death animation, but its materials are being actively modified. If something else tries to dispose or modify these shared materials, uniforms become undefined.\n\n4. **The uniform `.value` is undefined**: The Three.js error occurs when trying to access a uniform's value property that doesn't exist, typically when a shader program is in an inconsistent state due to material property changes requiring shader recompilation.\n\n**Root cause**: Materials need `transparent: true` set at initialization OR before modifying opacity, and material modifications should not happen while the mesh is being rendered, or should trigger proper material.needsUpdate flags.\n\nDECISION: analysis_complete",
    "create_reproduction": "## Bug Reproduction Script Created\n\nI've created a Playwright test that will:\n\n1. **Load the game** in a real browser\n2. **Spawn a Chaos Marine** (purple faction enemy as mentioned in the bug report)\n3. **Kill the enemy** by repeatedly using skills\n4. **Wait for the death animation** to play (~2 seconds)\n5. **Capture all console errors** during this period\n6. **Check for the specific Three.js error**: \"Cannot read properties of undefined (reading 'value')\" in `refreshUniformsCommon`\n\nThe test will **FAIL if the bug exists** (errors found) and **PASS if the bug is fixed** (no errors).\n\n### To run this reproduction:\n\n```bash\ncd /mnt/c/github/40kgw/output/client\nnpx playwright test reproduce-threejs-uniform-bug.spec.ts --reporter=list\n```\n\nThe test will spawn an actual Chaos enemy, kill it with skills, and observe whether the Three.js rendering crashes with the uniform access error during the death animation - exactly replicating the conditions from the bug report.\n\nDECISION: reproduction_ready"
  },
  "currentStage": "Confirm Bug Exists",
  "pid": 512111
}