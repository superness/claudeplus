{
  "id": "pipeline_1763328200126",
  "name": "Development Cycle Meta-Router V1",
  "startTime": "2025-11-16T21:23:20.126Z",
  "stages": [
    {
      "id": "classify_request",
      "name": "Request Classification",
      "type": "classifier",
      "agent": "request_classifier",
      "description": "Classify user request as bug fix, feature request, refactor, or question",
      "decisions": [
        {
          "choice": "BUG_FIX",
          "description": "Request is a bug fix"
        },
        {
          "choice": "QUICK_CHANGE",
          "description": "Request is a simple code modification"
        },
        {
          "choice": "FEATURE_REQUEST",
          "description": "Request is a new feature"
        },
        {
          "choice": "REFACTOR",
          "description": "Request is code refactoring"
        },
        {
          "choice": "QUESTION",
          "description": "Request is a question"
        }
      ]
    },
    {
      "id": "route_to_bug_pipeline",
      "name": "Bug Fix Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute bug-fix-v1 pipeline for bug fixes",
      "inputs": [
        "classify_request"
      ],
      "config": {
        "pipeline": "bug-fix-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_quick_change",
      "name": "Quick Code Change",
      "type": "executor",
      "agent": "code_implementer",
      "description": "Handle simple, direct code modifications (1-5 lines)",
      "inputs": [
        "classify_request"
      ]
    },
    {
      "id": "route_to_feature_pipeline",
      "name": "Feature Development Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute feature-development-v1 pipeline for new features",
      "inputs": [
        "classify_request"
      ],
      "config": {
        "pipeline": "feature-development-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_refactor",
      "name": "Handle Refactor Request",
      "type": "executor",
      "agent": "task_executor",
      "description": "Handle code refactoring requests",
      "inputs": [
        "classify_request"
      ]
    },
    {
      "id": "handle_question",
      "name": "Handle Question",
      "type": "executor",
      "agent": "task_executor",
      "description": "Answer user questions about code or system",
      "inputs": [
        "classify_request"
      ]
    }
  ],
  "connections": [
    {
      "from": "classify_request",
      "to": "route_to_bug_pipeline",
      "condition": "BUG_FIX",
      "description": "Bug detected, route to bug-fix pipeline"
    },
    {
      "from": "classify_request",
      "to": "handle_quick_change",
      "condition": "QUICK_CHANGE",
      "description": "Simple change requested, use direct code implementer"
    },
    {
      "from": "classify_request",
      "to": "route_to_feature_pipeline",
      "condition": "FEATURE_REQUEST",
      "description": "Feature requested, route to feature-development pipeline"
    },
    {
      "from": "classify_request",
      "to": "handle_refactor",
      "condition": "REFACTOR",
      "description": "Refactor requested, use general executor"
    },
    {
      "from": "classify_request",
      "to": "handle_question",
      "condition": "QUESTION",
      "description": "Question asked, provide answer"
    },
    {
      "from": "route_to_bug_pipeline",
      "to": null,
      "condition": "complete",
      "description": "Bug fix pipeline complete - PIPELINE ENDS"
    },
    {
      "from": "handle_quick_change",
      "to": null,
      "condition": "complete",
      "description": "Quick change complete - PIPELINE ENDS"
    },
    {
      "from": "route_to_feature_pipeline",
      "to": null,
      "condition": "complete",
      "description": "Feature development pipeline complete - PIPELINE ENDS"
    },
    {
      "from": "handle_refactor",
      "to": null,
      "condition": "complete",
      "description": "Refactor complete - PIPELINE ENDS"
    },
    {
      "from": "handle_question",
      "to": null,
      "condition": "complete",
      "description": "Question answered - PIPELINE ENDS"
    }
  ],
  "userContext": "There is a critical bug in the ship navigation system. When a player starts with no items fitted to their ship, docks at a station, builds an item (like an afterburner), adds it to their inventory, fits it to their ship, and then undocks - they become completely unable to control their ship. Specifically: they cannot change navigation direction, cannot increase speed (even though throttle is set), clicking on objects doesn't trigger navigation, and double-clicking in space produces no direction change notification. This suggests the ship control/navigation system is not properly initializing or reconnecting after the fitting process. Investigate the ship fitting system, the undocking process, and the navigation/control initialization to find why the controls become unresponsive after fitting items for the first time. Then implement a fix to ensure ship controls work properly after fitting items and undocking.",
  "workingDir": "/mnt/c/github/superstarships",
  "currentStageIndex": 1,
  "completedStages": [
    "classify_request"
  ],
  "status": "running",
  "results": {
    "classify_request": "```json\n{\n  \"classification\": \"BUG_FIX\",\n  \"confidence\": 0.99,\n  \"reasoning\": \"This is clearly a bug fix request. The user explicitly states 'There is a critical bug' and describes a specific broken workflow where ship controls become completely unresponsive after a sequence of actions (dock → build → fit → undock). The issue manifests as: inability to change navigation direction, inability to increase speed despite throttle settings, non-functional object clicking, and non-functional double-clicking. This is a functional failure requiring investigation and repair of existing systems.\",\n  \"context\": {\n    \"originalRequest\": \"Critical bug in ship navigation system where controls become unresponsive after fitting items for the first time and undocking\",\n    \"keyIndicators\": [\n      \"critical bug\",\n      \"completely unable to control\",\n      \"cannot change navigation\",\n      \"cannot increase speed\",\n      \"clicking on objects doesn't trigger\",\n      \"controls become unresponsive\",\n      \"not properly initializing\"\n    ],\n    \"affectedArea\": \"ship navigation system, ship fitting system, undocking process, control initialization\",\n    \"priority\": \"high\",\n    \"reproductionSteps\": [\n      \"Start with no fitted items\",\n      \"Dock at station\",\n      \"Build item (e.g., afterburner)\",\n      \"Add to inventory\",\n      \"Fit to ship\",\n      \"Undock\",\n      \"Attempt to control ship (fails)\"\n    ],\n    \"symptoms\": [\n      \"Cannot change navigation direction\",\n      \"Cannot increase speed (throttle set but no effect)\",\n      \"Object clicking non-functional\",\n      \"Double-clicking in space produces no response\"\n    ],\n    \"investigationAreas\": [\n      \"ShipFittingManager.js - fitting process\",\n      \"StationManager.js - undocking process\",\n      \"Ship.js - control/navigation initialization\",\n      \"InputManager.js - input handling after undock\",\n      \"NavigationManager.js - navigation system state\"\n    ]\n  }\n}\n```\n\nDECISION: BUG_FIX"
  },
  "currentStage": "Bug Fix Pipeline",
  "pid": 61128
}