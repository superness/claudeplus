{
  "id": "bugfix_proj_d664c91d_1765684537184",
  "name": "Game Bug Fix Pipeline",
  "startTime": "2025-12-14T03:55:37.250Z",
  "stages": [
    {
      "id": "bug_analysis",
      "name": "Analyze Bug",
      "type": "analyzer",
      "agent": "game_bug_analyzer",
      "description": "Analyze the bug report to understand symptoms and affected systems",
      "decisions": [
        {
          "choice": "analysis_complete",
          "description": "Bug analyzed, ready to reproduce"
        }
      ]
    },
    {
      "id": "reproduce_and_confirm",
      "name": "Reproduce & Confirm Bug",
      "type": "creator",
      "agent": "game_bug_reproducer",
      "description": "Create a reproduction test AND run it to confirm the bug exists",
      "inputs": [
        "bug_analysis"
      ],
      "decisions": [
        {
          "choice": "bug_confirmed",
          "description": "Bug reproduced - saw the actual error"
        },
        {
          "choice": "bug_not_reproduced",
          "description": "Test ran but no error occurred"
        },
        {
          "choice": "reproduction_failed",
          "description": "Test couldn't run (server down, etc.)"
        }
      ]
    },
    {
      "id": "investigate_and_fix",
      "name": "Investigate & Fix",
      "type": "executor",
      "agent": "game_bug_fixer",
      "description": "Find the root cause in code and implement the fix",
      "inputs": [
        "reproduce_and_confirm",
        "bug_analysis"
      ],
      "decisions": [
        {
          "choice": "fix_implemented",
          "description": "Root cause found and fix implemented"
        },
        {
          "choice": "fix_requires_refactor",
          "description": "Fix requires broader refactoring"
        },
        {
          "choice": "cannot_identify_cause",
          "description": "Couldn't find root cause in code"
        }
      ]
    },
    {
      "id": "gather_context",
      "name": "Gather More Context",
      "type": "analyzer",
      "agent": "game_context_gatherer",
      "description": "Gather additional context by examining related code and dependencies",
      "inputs": [
        "investigate_and_fix"
      ],
      "decisions": [
        {
          "choice": "context_gathered",
          "description": "Additional context collected, retry investigation"
        }
      ]
    },
    {
      "id": "refactor_for_fix",
      "name": "Refactor for Fix",
      "type": "executor",
      "agent": "game_refactorer",
      "description": "Perform necessary refactoring to properly implement the bug fix",
      "inputs": [
        "investigate_and_fix"
      ],
      "decisions": [
        {
          "choice": "refactor_complete",
          "description": "Refactoring complete, fix can be applied"
        }
      ]
    },
    {
      "id": "verify_fix",
      "name": "Verify Fix",
      "type": "validator",
      "agent": "game_fix_verifier",
      "description": "Re-run the reproduction test - bug should NOT reproduce now",
      "inputs": [
        "investigate_and_fix",
        "reproduce_and_confirm"
      ],
      "decisions": [
        {
          "choice": "FIX_VERIFIED",
          "description": "Bug no longer reproduces - fix works!"
        },
        {
          "choice": "FIX_INCOMPLETE",
          "description": "Bug still reproduces - fix didn't work"
        },
        {
          "choice": "REGRESSION_DETECTED",
          "description": "Fix introduced new issues"
        }
      ]
    },
    {
      "id": "document_fix",
      "name": "Document Fix",
      "type": "executor",
      "agent": "game_fix_documenter",
      "description": "Document the bug fix",
      "inputs": [
        "verify_fix",
        "bug_analysis",
        "investigate_and_fix"
      ],
      "decisions": [
        {
          "choice": "documentation_complete",
          "description": "Fix documented - pipeline complete"
        }
      ]
    }
  ],
  "connections": [
    {
      "from": "bug_analysis",
      "to": "reproduce_and_confirm",
      "condition": "analysis_complete",
      "description": "Bug analyzed, create and run reproduction test"
    },
    {
      "from": "reproduce_and_confirm",
      "to": "investigate_and_fix",
      "condition": "bug_confirmed",
      "description": "Bug confirmed! Now investigate and fix"
    },
    {
      "from": "reproduce_and_confirm",
      "to": "bug_analysis",
      "condition": "bug_not_reproduced",
      "description": "Bug not reproduced, re-analyze"
    },
    {
      "from": "reproduce_and_confirm",
      "to": "reproduce_and_confirm",
      "condition": "reproduction_failed",
      "description": "Script failed, try again"
    },
    {
      "from": "investigate_and_fix",
      "to": "verify_fix",
      "condition": "fix_implemented",
      "description": "Fix implemented, verify it works"
    },
    {
      "from": "investigate_and_fix",
      "to": "gather_context",
      "condition": "cannot_identify_cause",
      "description": "Need more context to find root cause"
    },
    {
      "from": "investigate_and_fix",
      "to": "refactor_for_fix",
      "condition": "fix_requires_refactor",
      "description": "Fix needs refactoring first"
    },
    {
      "from": "gather_context",
      "to": "investigate_and_fix",
      "condition": "context_gathered",
      "description": "Context gathered, retry investigation"
    },
    {
      "from": "refactor_for_fix",
      "to": "investigate_and_fix",
      "condition": "refactor_complete",
      "description": "Refactoring done, apply fix"
    },
    {
      "from": "verify_fix",
      "to": "document_fix",
      "condition": "FIX_VERIFIED",
      "description": "Bug is fixed!"
    },
    {
      "from": "verify_fix",
      "to": "investigate_and_fix",
      "condition": "FIX_INCOMPLETE",
      "description": "Bug still reproduces, re-investigate"
    },
    {
      "from": "verify_fix",
      "to": "investigate_and_fix",
      "condition": "REGRESSION_DETECTED",
      "description": "Regression found, revise fix"
    },
    {
      "from": "document_fix",
      "to": null,
      "condition": "documentation_complete",
      "description": "Bug fix complete - PIPELINE ENDS"
    }
  ],
  "userContext": "Bug Report:\n\nWe get this rendering bug after killing a purple guy [Combat] DAMAGE: Righteous Fury -> demo-chaos-2 (51)\nEnemy.ts:1557 [Enemy] Chaos Marine took 25 damage (800 -> 775)\nCombatManager.ts:834 [CombatManager] Applied BURNING to enemy demo-chaos-3 (1 stacks)\nCombatManager.ts:1244 [Combat] DAMAGE: Righteous Fury -> demo-chaos-3 (25)\nCombatManager.ts:352 [CombatManager] Skill result: damage=undefined, target=undefined\nInputManager.ts:339 [InputManager] Skill result: Object\nPlayer.ts:302 [Player] Skill 2 requested\n2CompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nInputManager.ts:329 [InputManager] executeSkill(0) called, combatManager=true\nCombatManager.ts:211 [CombatManager] executeSkill(0) called\nCombatManager.ts:219 [CombatManager] Using skill: Holy Strike (ENEMY, range: 2)\nCombatManager.ts:283 [CombatManager] Target enemy: Cultist\nCombatManager.ts:286 [CombatManager] Distance to target: 1.3 (skill range: 2)\nCombatManager.ts:350 [CombatManager] Validation passed! Executing Holy Strike...\nEnemy.ts:1557 [Enemy] Cultist took 70 damage (69 -> 0)\nGame.ts:681 [Loot] Enemy Cultist died - Threat tier: MINORIS\nLootVisualization.ts:88 [LootOrb] Created loot orb at (-34.7, 40.0) - Type: CURRENCY\nLootVisualization.ts:88 [LootOrb] Created loot orb at (-35.3, 40.0) - Type: MATERIAL\nGame.ts:689 [Loot] Generated 2 drops\nCombatManager.ts:834 [CombatManager] Applied BURNING to enemy demo-chaos-1 (2 stacks)\nCombatManager.ts:1244 [Combat] DAMAGE: Holy Strike -> demo-chaos-1 (70)\nCombatManager.ts:352 [CombatManager] Skill result: damage=70, target=demo-chaos-1\nInputManager.ts:339 [InputManager] Skill result: Object\nPlayer.ts:302 [Player] Skill 0 requested\n22three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nInputManager.ts:329 [InputManager] executeSkill(0) called, combatManager=true\nCombatManager.ts:211 [CombatManager] executeSkill(0) called\nCombatManager.ts:219 [CombatManager] Using skill: Holy Strike (ENEMY, range: 2)\nCombatManager.ts:283 [CombatManager] Target enemy: Cultist\nCombatManager.ts:286 [CombatManager] Distance to target: 1.3 (skill range: 2)\nCombatManager.ts:325 [CombatManager] Skill Holy Strike failed: Skill on cooldown: 4s remaining\nInputManager.ts:339 [InputManager] Skill result: Object\nInputManager.ts:348 [InputManager] Skill failed: Skill on cooldown: 4s remaining\n26three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Chaos Marine's Attack -> player (3)\nCombatManager.ts:1401 [Combat] Chaos Marine attacks Player for 3 damage\n14three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Engaging enemy (no skills ready))\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n86three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n81three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n4three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Possessed's Attack -> player (4)\nCombatManager.ts:1401 [Combat] Possessed attacks Player for 4 damage\n82three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Slugga Boy's Attack -> companion_IMP_HENCH_ENGINSEER_COG_1765682551383 (1)\nCombatManager.ts:1401 [Combat] Slugga Boy attacks Enginseer Cog-7 for 1 damage\nCombatManager.ts:1244 [Combat] DAMAGE: Nob's Attack -> companion_IMP_HENCH_ENGINSEER_COG_1765682551383 (3)\nCombatManager.ts:1401 [Combat] Nob attacks Enginseer Cog-7 for 3 damage\nCombatManager.ts:1244 [Combat] DAMAGE: Meganob's Attack -> companion_IMP_HENCH_ENGINSEER_COG_1765682551383 (5)\nCombatManager.ts:1401 [Combat] Meganob attacks Enginseer Cog-7 for 5 damage\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n100three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n100three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Moving into attack range for Precise Shot)\n15three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:913 [CombatManager] BURNING expired on enemy demo-chaos-2\nCombatManager.ts:913 [CombatManager] BURNING expired on enemy demo-chaos-3\n35three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Cultist's Attack -> player (1)\nCombatManager.ts:1401 [Combat] Cultist attacks Player for 1 damage\n2three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)",
  "workingDir": "/mnt/c/github/40kgw/output",
  "currentStageIndex": 4,
  "completedStages": [
    "bug_analysis",
    "reproduce_and_confirm",
    "bug_analysis",
    "reproduce_and_confirm"
  ],
  "status": "running",
  "results": {
    "bug_analysis": "## Bug Analysis\n\n### Summary\nThree.js rendering error triggered when killing a Cultist enemy during combat with multiple enemies present\n\n### Expected Behavior\nWhen an enemy dies in combat:\n- The enemy's death animation should play\n- Loot orbs should spawn at the enemy's position\n- The scene should continue rendering without errors\n- All visual effects (burning status, combat effects) should display correctly\n\n### Actual Behavior\nAfter killing a Cultist enemy, the game throws continuous Three.js rendering errors in the render loop. The error occurs in `refreshUniformsCommon` when attempting to read `.value` property of an undefined uniform. The errors spam continuously every frame, causing potential performance degradation and visual glitches.\n\n### Trigger Condition\nThe bug triggers specifically when:\n1. A Cultist enemy is killed in combat (specifically mentioned as \"purple guy\")\n2. Multiple other enemies are present (Chaos Marines, Possessed, Slugga Boys, Nobs, Meganobs)\n3. Status effects are active (BURNING status on multiple enemies)\n4. Loot orbs are generated after the kill\n5. Combat continues after the death\n\nThe key sequence from logs:\n- `Holy Strike` kills Cultist (70 damage, 69â†’0 HP)\n- Loot system generates 2 drops (CURRENCY + MATERIAL)\n- `LootVisualization.ts` creates loot orbs\n- Immediately after: Three.js error in `refreshUniformsCommon`\n\n### Error Messages\n```\nUncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js:16544:25)\n    at Object.refreshMaterialUniforms (three.js:16497:7)\n    at setProgram (three.js:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js:17369:23)\n    at renderObject (three.js:17809:15)\n    at renderObjects (three.js:17791:11)\n    at renderScene (three.js:17710:37)\n    at WebGLRenderer.render (three.js:17621:9)\n    at Game.render (Game.ts:940)\n    at gameLoop (Game.ts:877)\n```\n\n### Affected Systems\n- **3D Rendering**: Three.js WebGLRenderer material uniform system\n- **Enemy System**: Enemy death handling and cleanup\n- **Loot System**: Loot orb spawning and visualization\n- **Material Management**: Shader uniform lifecycle during entity removal\n- **Combat System**: Ongoing combat effects while enemy dies\n- **Visual Effects**: Status effect rendering (BURNING stacks)\n\n### Reproduction Approach\nA test should:\n1. Start combat with multiple enemies including at least one Cultist\n2. Apply status effects (BURNING) to multiple enemies\n3. Reduce a Cultist's health to near-death\n4. Deal a killing blow that triggers loot drops\n5. Monitor render loop during the frame cycles immediately after death\n6. Check for Three.js errors related to undefined uniform values\n7. Verify if enemy mesh/material is properly disposed when removed from scene\n8. Check if loot orb materials share references with enemy materials\n\n**Key investigation areas:**\n- Enemy.ts cleanup/disposal on death\n- LootVisualization.ts material creation and references\n- Material uniform lifecycle when objects are removed mid-render\n- Potential race condition between enemy removal and render frame\n\nDECISION: analysis_complete",
    "reproduce_and_confirm": "The bug is NOT being reproduced. The cultist died (`Enemy Cultist died`, `Loot Generated 3 drops`), and the render loop ran for many frames afterward, but no Three.js errors occurred.\n\n## Bug Reproduction & Confirmation\n\n### Test Created\nFiles:\n- `tests/reproduce-cultist-death-bug.spec.ts`\n- `tests/reproduce-cultist-exact-scenario.spec.ts`\n\n### Test Run Output\nBoth tests successfully:\n1. Spawned a Cultist enemy in a combat scenario\n2. Spawned multiple additional enemies (Chaos Marines, Possessed, Orks) to match the bug report conditions\n3. Killed the Cultist, triggering loot generation\n4. Monitored the render loop for 3-5 seconds after death\n5. Captured all console errors and page errors\n\n**Console logs confirm:**\n```\n[Enemy] Cultist took 35 damage (15 -> 0)\n[Loot] Enemy Cultist died - Threat tier: MINORIS\n[Loot] Generated 3 drops\n```\n\n**Error capture results:**\n```\nTotal errors: 0\nThree.js rendering errors: 0\nNO THREE.JS ERRORS OBSERVED\n```\n\n### What I Observed\nThe Cultist was successfully killed during combat, loot orbs were spawned, and the render loop continued running for several seconds. No Three.js `refreshUniformsCommon` errors were captured despite monitoring for them specifically.\n\n### Verdict\n**BUG NOT REPRODUCED** - The test was able to kill a Cultist and trigger loot generation, but the Three.js rendering error did not occur. The bug may require specific conditions not captured in the automated test environment, such as:\n- Specific timing/race conditions with frame rendering\n- Particular enemy death animations or visual effects states\n- Specific material/shader combinations that only occur in certain scenarios\n- Environmental factors in the full game that aren't present in the test scenario\n\nDECISION: bug_not_reproduced"
  },
  "currentStage": "Analyze Bug",
  "pid": 518308
}