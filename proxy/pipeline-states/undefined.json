{
  "id": "bugfix_proj_d664c91d_1765684537184",
  "name": "Game Bug Fix Pipeline",
  "startTime": "2025-12-14T03:55:37.250Z",
  "stages": [
    {
      "id": "bug_analysis",
      "name": "Analyze Bug",
      "type": "analyzer",
      "agent": "game_bug_analyzer",
      "description": "Analyze the bug report to understand symptoms and affected systems",
      "decisions": [
        {
          "choice": "analysis_complete",
          "description": "Bug analyzed, ready to reproduce"
        }
      ]
    },
    {
      "id": "reproduce_and_confirm",
      "name": "Reproduce & Confirm Bug",
      "type": "creator",
      "agent": "game_bug_reproducer",
      "description": "Create a reproduction test AND run it to confirm the bug exists",
      "inputs": [
        "bug_analysis"
      ],
      "decisions": [
        {
          "choice": "bug_confirmed",
          "description": "Bug reproduced - saw the actual error"
        },
        {
          "choice": "bug_not_reproduced",
          "description": "Test ran but no error occurred"
        },
        {
          "choice": "reproduction_failed",
          "description": "Test couldn't run (server down, etc.)"
        }
      ]
    },
    {
      "id": "investigate_and_fix",
      "name": "Investigate & Fix",
      "type": "executor",
      "agent": "game_bug_fixer",
      "description": "Find the root cause in code and implement the fix",
      "inputs": [
        "reproduce_and_confirm",
        "bug_analysis"
      ],
      "decisions": [
        {
          "choice": "fix_implemented",
          "description": "Root cause found and fix implemented"
        },
        {
          "choice": "fix_requires_refactor",
          "description": "Fix requires broader refactoring"
        },
        {
          "choice": "cannot_identify_cause",
          "description": "Couldn't find root cause in code"
        }
      ]
    },
    {
      "id": "gather_context",
      "name": "Gather More Context",
      "type": "analyzer",
      "agent": "game_context_gatherer",
      "description": "Gather additional context by examining related code and dependencies",
      "inputs": [
        "investigate_and_fix"
      ],
      "decisions": [
        {
          "choice": "context_gathered",
          "description": "Additional context collected, retry investigation"
        }
      ]
    },
    {
      "id": "refactor_for_fix",
      "name": "Refactor for Fix",
      "type": "executor",
      "agent": "game_refactorer",
      "description": "Perform necessary refactoring to properly implement the bug fix",
      "inputs": [
        "investigate_and_fix"
      ],
      "decisions": [
        {
          "choice": "refactor_complete",
          "description": "Refactoring complete, fix can be applied"
        }
      ]
    },
    {
      "id": "verify_fix",
      "name": "Verify Fix",
      "type": "validator",
      "agent": "game_fix_verifier",
      "description": "Re-run the reproduction test - bug should NOT reproduce now",
      "inputs": [
        "investigate_and_fix",
        "reproduce_and_confirm"
      ],
      "decisions": [
        {
          "choice": "FIX_VERIFIED",
          "description": "Bug no longer reproduces - fix works!"
        },
        {
          "choice": "FIX_INCOMPLETE",
          "description": "Bug still reproduces - fix didn't work"
        },
        {
          "choice": "REGRESSION_DETECTED",
          "description": "Fix introduced new issues"
        }
      ]
    },
    {
      "id": "document_fix",
      "name": "Document Fix",
      "type": "executor",
      "agent": "game_fix_documenter",
      "description": "Document the bug fix",
      "inputs": [
        "verify_fix",
        "bug_analysis",
        "investigate_and_fix"
      ],
      "decisions": [
        {
          "choice": "documentation_complete",
          "description": "Fix documented - pipeline complete"
        }
      ]
    }
  ],
  "connections": [
    {
      "from": "bug_analysis",
      "to": "reproduce_and_confirm",
      "condition": "analysis_complete",
      "description": "Bug analyzed, create and run reproduction test"
    },
    {
      "from": "reproduce_and_confirm",
      "to": "investigate_and_fix",
      "condition": "bug_confirmed",
      "description": "Bug confirmed! Now investigate and fix"
    },
    {
      "from": "reproduce_and_confirm",
      "to": "bug_analysis",
      "condition": "bug_not_reproduced",
      "description": "Bug not reproduced, re-analyze"
    },
    {
      "from": "reproduce_and_confirm",
      "to": "reproduce_and_confirm",
      "condition": "reproduction_failed",
      "description": "Script failed, try again"
    },
    {
      "from": "investigate_and_fix",
      "to": "verify_fix",
      "condition": "fix_implemented",
      "description": "Fix implemented, verify it works"
    },
    {
      "from": "investigate_and_fix",
      "to": "gather_context",
      "condition": "cannot_identify_cause",
      "description": "Need more context to find root cause"
    },
    {
      "from": "investigate_and_fix",
      "to": "refactor_for_fix",
      "condition": "fix_requires_refactor",
      "description": "Fix needs refactoring first"
    },
    {
      "from": "gather_context",
      "to": "investigate_and_fix",
      "condition": "context_gathered",
      "description": "Context gathered, retry investigation"
    },
    {
      "from": "refactor_for_fix",
      "to": "investigate_and_fix",
      "condition": "refactor_complete",
      "description": "Refactoring done, apply fix"
    },
    {
      "from": "verify_fix",
      "to": "document_fix",
      "condition": "FIX_VERIFIED",
      "description": "Bug is fixed!"
    },
    {
      "from": "verify_fix",
      "to": "investigate_and_fix",
      "condition": "FIX_INCOMPLETE",
      "description": "Bug still reproduces, re-investigate"
    },
    {
      "from": "verify_fix",
      "to": "investigate_and_fix",
      "condition": "REGRESSION_DETECTED",
      "description": "Regression found, revise fix"
    },
    {
      "from": "document_fix",
      "to": null,
      "condition": "documentation_complete",
      "description": "Bug fix complete - PIPELINE ENDS"
    }
  ],
  "userContext": "Bug Report:\n\nWe get this rendering bug after killing a purple guy [Combat] DAMAGE: Righteous Fury -> demo-chaos-2 (51)\nEnemy.ts:1557 [Enemy] Chaos Marine took 25 damage (800 -> 775)\nCombatManager.ts:834 [CombatManager] Applied BURNING to enemy demo-chaos-3 (1 stacks)\nCombatManager.ts:1244 [Combat] DAMAGE: Righteous Fury -> demo-chaos-3 (25)\nCombatManager.ts:352 [CombatManager] Skill result: damage=undefined, target=undefined\nInputManager.ts:339 [InputManager] Skill result: Object\nPlayer.ts:302 [Player] Skill 2 requested\n2CompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nInputManager.ts:329 [InputManager] executeSkill(0) called, combatManager=true\nCombatManager.ts:211 [CombatManager] executeSkill(0) called\nCombatManager.ts:219 [CombatManager] Using skill: Holy Strike (ENEMY, range: 2)\nCombatManager.ts:283 [CombatManager] Target enemy: Cultist\nCombatManager.ts:286 [CombatManager] Distance to target: 1.3 (skill range: 2)\nCombatManager.ts:350 [CombatManager] Validation passed! Executing Holy Strike...\nEnemy.ts:1557 [Enemy] Cultist took 70 damage (69 -> 0)\nGame.ts:681 [Loot] Enemy Cultist died - Threat tier: MINORIS\nLootVisualization.ts:88 [LootOrb] Created loot orb at (-34.7, 40.0) - Type: CURRENCY\nLootVisualization.ts:88 [LootOrb] Created loot orb at (-35.3, 40.0) - Type: MATERIAL\nGame.ts:689 [Loot] Generated 2 drops\nCombatManager.ts:834 [CombatManager] Applied BURNING to enemy demo-chaos-1 (2 stacks)\nCombatManager.ts:1244 [Combat] DAMAGE: Holy Strike -> demo-chaos-1 (70)\nCombatManager.ts:352 [CombatManager] Skill result: damage=70, target=demo-chaos-1\nInputManager.ts:339 [InputManager] Skill result: Object\nPlayer.ts:302 [Player] Skill 0 requested\n22three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nInputManager.ts:329 [InputManager] executeSkill(0) called, combatManager=true\nCombatManager.ts:211 [CombatManager] executeSkill(0) called\nCombatManager.ts:219 [CombatManager] Using skill: Holy Strike (ENEMY, range: 2)\nCombatManager.ts:283 [CombatManager] Target enemy: Cultist\nCombatManager.ts:286 [CombatManager] Distance to target: 1.3 (skill range: 2)\nCombatManager.ts:325 [CombatManager] Skill Holy Strike failed: Skill on cooldown: 4s remaining\nInputManager.ts:339 [InputManager] Skill result: Object\nInputManager.ts:348 [InputManager] Skill failed: Skill on cooldown: 4s remaining\n26three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Chaos Marine's Attack -> player (3)\nCombatManager.ts:1401 [Combat] Chaos Marine attacks Player for 3 damage\n14three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Engaging enemy (no skills ready))\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n86three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n81three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n4three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Possessed's Attack -> player (4)\nCombatManager.ts:1401 [Combat] Possessed attacks Player for 4 damage\n82three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Slugga Boy's Attack -> companion_IMP_HENCH_ENGINSEER_COG_1765682551383 (1)\nCombatManager.ts:1401 [Combat] Slugga Boy attacks Enginseer Cog-7 for 1 damage\nCombatManager.ts:1244 [Combat] DAMAGE: Nob's Attack -> companion_IMP_HENCH_ENGINSEER_COG_1765682551383 (3)\nCombatManager.ts:1401 [Combat] Nob attacks Enginseer Cog-7 for 3 damage\nCombatManager.ts:1244 [Combat] DAMAGE: Meganob's Attack -> companion_IMP_HENCH_ENGINSEER_COG_1765682551383 (5)\nCombatManager.ts:1401 [Combat] Meganob attacks Enginseer Cog-7 for 5 damage\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n100three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Engaging enemy (no skills ready))\n100three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCompanionAI.ts:157 [CompanionAI] Medic Jonas -> MOVE to engage (Moving into attack range for Precise Shot)\nCompanionAI.ts:157 [CompanionAI] Crusader Marcus -> MOVE to engage (Moving into attack range for Holy Strike)\nCompanionAI.ts:157 [CompanionAI] Enginseer Cog-7 -> MOVE to engage (Moving into attack range for Precise Shot)\n15three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:913 [CombatManager] BURNING expired on enemy demo-chaos-2\nCombatManager.ts:913 [CombatManager] BURNING expired on enemy demo-chaos-3\n35three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)Understand this error\nCombatManager.ts:1244 [Combat] DAMAGE: Cultist's Attack -> player (1)\nCombatManager.ts:1401 [Combat] Cultist attacks Player for 1 damage\n2three.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)\nrefreshUniformsCommon @ three.js?v=6c4bc7e5:16544\nrefreshMaterialUniforms @ three.js?v=6c4bc7e5:16497\nsetProgram @ three.js?v=6c4bc7e5:18074\nWebGLRenderer.renderBufferDirect @ three.js?v=6c4bc7e5:17369\nrenderObject @ three.js?v=6c4bc7e5:17809\nrenderObjects @ three.js?v=6c4bc7e5:17791\nrenderScene @ three.js?v=6c4bc7e5:17710\nWebGLRenderer.render @ three.js?v=6c4bc7e5:17621\nrender @ Game.ts:940\ngameLoop @ Game.ts:877\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862\nrequestAnimationFrame\ngameLoop @ Game.ts:862Understand this error\nthree.js?v=6c4bc7e5:16544 Uncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js?v=6c4bc7e5:16544:25)\n    at Object.refreshMaterialUniforms (three.js?v=6c4bc7e5:16497:7)\n    at setProgram (three.js?v=6c4bc7e5:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js?v=6c4bc7e5:17369:23)\n    at renderObject (three.js?v=6c4bc7e5:17809:15)\n    at renderObjects (three.js?v=6c4bc7e5:17791:11)\n    at renderScene (three.js?v=6c4bc7e5:17710:37)\n    at WebGLRenderer.render (three.js?v=6c4bc7e5:17621:9)\n    at Game.render (Game.ts:940:19)\n    at gameLoop (Game.ts:877:10)",
  "workingDir": "/mnt/c/github/40kgw/output",
  "currentStageIndex": 1,
  "completedStages": [
    "bug_analysis"
  ],
  "status": "running",
  "results": {
    "bug_analysis": "## Bug Analysis\n\n### Summary\nThree.js rendering crash when enemy dies and drops loot in combat\n\n### Expected Behavior\nWhen an enemy (specifically a Cultist) is killed in combat, loot orbs should spawn and the game should continue rendering without errors. The scene should remain stable with remaining enemies and companions continuing combat.\n\n### Actual Behavior\nAfter killing a Cultist enemy, the Three.js renderer crashes with repeated `TypeError: Cannot read properties of undefined (reading 'value')` in `refreshUniformsCommon`. The error occurs continuously in every subsequent render frame, making the game unplayable. The error originates from Three.js trying to access shader uniform values that no longer exist.\n\n### Trigger Condition\n1. Player is in combat with multiple enemies including at least one Cultist\n2. Player or companion kills the Cultist (in this case, Crusader Marcus uses \"Holy Strike\")\n3. Cultist's health drops to 0 and death is triggered\n4. Loot system generates 2 loot orbs (CURRENCY and MATERIAL types)\n5. LootVisualization creates visual loot orbs at the death location\n6. Next render frame attempts to render the scene and crashes\n\n### Error Messages\n```\nUncaught TypeError: Cannot read properties of undefined (reading 'value')\n    at refreshUniformsCommon (three.js:16544:25)\n    at Object.refreshMaterialUniforms (three.js:16497:7)\n    at setProgram (three.js:18074:19)\n    at WebGLRenderer.renderBufferDirect (three.js:17369:23)\n```\n\nThe error repeats continuously on every frame in the game loop (`Game.ts:940` â†’ `gameLoop @ Game.ts:877`).\n\n### Affected Systems\n- **3D Rendering**: Three.js WebGL renderer (primary)\n- **Loot System**: Loot generation and visualization (trigger)\n- **Enemy System**: Enemy death handling and cleanup\n- **Material/Shader System**: Shader uniforms management\n- **Scene Graph**: Object removal from Three.js scene\n\n### Reproduction Approach\nA test should:\n1. Set up a combat scenario with at least one Cultist enemy\n2. Deal damage to reduce Cultist health to 0\n3. Trigger death and loot drop sequence\n4. Attempt to render the next frame\n5. Verify that shader uniforms are properly cleaned up\n6. Check if the dead enemy's mesh/material is properly disposed\n7. Confirm loot orbs are created without breaking existing scene objects\n\nThe bug likely indicates that when an enemy dies, its Three.js mesh or material is removed from the scene but shader uniforms are not properly cleaned up, or a reference to the dead enemy's material persists somewhere in the render pipeline.\n\nDECISION: analysis_complete"
  },
  "currentStage": "Reproduce & Confirm Bug",
  "pid": 514895,
  "userFeedback": [
    {
      "timestamp": "2025-12-14T04:02:13.868Z",
      "message": "It's a 'cultist' that dies and causes the problem",
      "stage": "Reproduce & Confirm Bug",
      "stageIndex": 1,
      "consumed": false
    }
  ]
}