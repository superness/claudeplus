{
  "id": "pipeline_1763326508425",
  "name": "Development Cycle Meta-Router V1",
  "startTime": "2025-11-16T20:55:08.425Z",
  "stages": [
    {
      "id": "classify_request",
      "name": "Request Classification",
      "type": "classifier",
      "agent": "request_classifier",
      "description": "Classify user request as bug fix, feature request, refactor, or question",
      "decisions": [
        {
          "choice": "BUG_FIX",
          "description": "Request is a bug fix"
        },
        {
          "choice": "QUICK_CHANGE",
          "description": "Request is a simple code modification"
        },
        {
          "choice": "FEATURE_REQUEST",
          "description": "Request is a new feature"
        },
        {
          "choice": "REFACTOR",
          "description": "Request is code refactoring"
        },
        {
          "choice": "QUESTION",
          "description": "Request is a question"
        }
      ]
    },
    {
      "id": "route_to_bug_pipeline",
      "name": "Bug Fix Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute bug-fix-v1 pipeline for bug fixes",
      "inputs": [
        "classify_request"
      ],
      "config": {
        "pipeline": "bug-fix-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_quick_change",
      "name": "Quick Code Change",
      "type": "executor",
      "agent": "code_implementer",
      "description": "Handle simple, direct code modifications (1-5 lines)",
      "inputs": [
        "classify_request"
      ]
    },
    {
      "id": "route_to_feature_pipeline",
      "name": "Feature Development Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute feature-development-v1 pipeline for new features",
      "inputs": [
        "classify_request"
      ],
      "config": {
        "pipeline": "feature-development-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_refactor",
      "name": "Handle Refactor Request",
      "type": "executor",
      "agent": "task_executor",
      "description": "Handle code refactoring requests",
      "inputs": [
        "classify_request"
      ]
    },
    {
      "id": "handle_question",
      "name": "Handle Question",
      "type": "executor",
      "agent": "task_executor",
      "description": "Answer user questions about code or system",
      "inputs": [
        "classify_request"
      ]
    }
  ],
  "connections": [
    {
      "from": "classify_request",
      "to": "route_to_bug_pipeline",
      "condition": "BUG_FIX",
      "description": "Bug detected, route to bug-fix pipeline"
    },
    {
      "from": "classify_request",
      "to": "handle_quick_change",
      "condition": "QUICK_CHANGE",
      "description": "Simple change requested, use direct code implementer"
    },
    {
      "from": "classify_request",
      "to": "route_to_feature_pipeline",
      "condition": "FEATURE_REQUEST",
      "description": "Feature requested, route to feature-development pipeline"
    },
    {
      "from": "classify_request",
      "to": "handle_refactor",
      "condition": "REFACTOR",
      "description": "Refactor requested, use general executor"
    },
    {
      "from": "classify_request",
      "to": "handle_question",
      "condition": "QUESTION",
      "description": "Question asked, provide answer"
    },
    {
      "from": "route_to_bug_pipeline",
      "to": null,
      "condition": "complete",
      "description": "Bug fix pipeline complete - PIPELINE ENDS"
    },
    {
      "from": "handle_quick_change",
      "to": null,
      "condition": "complete",
      "description": "Quick change complete - PIPELINE ENDS"
    },
    {
      "from": "route_to_feature_pipeline",
      "to": null,
      "condition": "complete",
      "description": "Feature development pipeline complete - PIPELINE ENDS"
    },
    {
      "from": "handle_refactor",
      "to": null,
      "condition": "complete",
      "description": "Refactor complete - PIPELINE ENDS"
    },
    {
      "from": "handle_question",
      "to": null,
      "condition": "complete",
      "description": "Question answered - PIPELINE ENDS"
    }
  ],
  "userContext": "Critical bug: After the player fits an item to their ship (for example an afterburner) and undocks, the ship becomes completely unresponsive. The player cannot navigate anywhere or generate thrust. Clicking on objects does not make the ship navigate to them, and double-clicking has no effect. The ship fitting system appears to be breaking the ship's movement and navigation controls. Investigate why fitting items breaks ship controls, identify the root cause, and fix it so that fitted items work properly without disabling ship movement.",
  "workingDir": "/mnt/c/github/superstarships",
  "currentStageIndex": 1,
  "completedStages": [
    "classify_request",
    "route_to_bug_pipeline"
  ],
  "status": "completed",
  "results": {
    "classify_request": "```json\n{\n  \"classification\": \"BUG_FIX\",\n  \"confidence\": 0.98,\n  \"reasoning\": \"User explicitly states 'Critical bug' and describes broken functionality - ship becomes completely unresponsive after fitting items. The ship fitting system is breaking core movement and navigation controls. This is clearly a bug where existing functionality (ship movement) is broken by another system (ship fitting).\",\n  \"context\": {\n    \"originalRequest\": \"Critical bug: After the player fits an item to their ship (for example an afterburner) and undocks, the ship becomes completely unresponsive. The player cannot navigate anywhere or generate thrust. Clicking on objects does not make the ship navigate to them, and double-clicking has no effect. The ship fitting system appears to be breaking the ship's movement and navigation controls. Investigate why fitting items breaks ship controls, identify the root cause, and fix it so that fitted items work properly without disabling ship movement.\",\n    \"keyIndicators\": [\n      \"Critical bug\",\n      \"becomes completely unresponsive\",\n      \"cannot navigate\",\n      \"has no effect\",\n      \"breaking the ship's movement\",\n      \"breaking ship controls\"\n    ],\n    \"affectedArea\": \"Ship fitting system, ship movement controls, navigation system, ShipFittingManager.js, ShipPhysics.js, InputManager.js\",\n    \"priority\": \"high\",\n    \"reproductionSteps\": [\n      \"1. Fit an item (e.g., afterburner) to ship\",\n      \"2. Undock from station\",\n      \"3. Attempt to navigate or generate thrust\",\n      \"4. Observe that ship is completely unresponsive\"\n    ],\n    \"symptoms\": [\n      \"No thrust generation\",\n      \"Navigation controls not working\",\n      \"Click/double-click interactions broken\",\n      \"Ship controls completely disabled\"\n    ]\n  }\n}\n```\n\nThis is a critical bug affecting core gameplay functionality. The ship fitting system is inadvertently disabling ship movement controls when items are fitted and the player undocks. This requires investigation of the ship fitting save/restore logic and how it interacts with the ship's physics and control systems.\n\nDECISION: BUG_FIX"
  },
  "currentStage": "Bug Fix Pipeline",
  "pid": 53442,
  "endTime": "2025-11-16T21:08:30.360Z"
}