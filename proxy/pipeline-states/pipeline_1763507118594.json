{
  "id": "pipeline_1763507118594",
  "name": "Development Cycle Meta-Router V1",
  "startTime": "2025-11-18T23:05:18.594Z",
  "stages": [
    {
      "id": "classify_request",
      "name": "Request Classification",
      "type": "classifier",
      "agent": "request_classifier",
      "description": "Classify user request as bug fix, feature request, refactor, or question",
      "decisions": [
        {
          "choice": "BUG_FIX",
          "description": "Request is a bug fix"
        },
        {
          "choice": "QUICK_CHANGE",
          "description": "Request is a simple code modification"
        },
        {
          "choice": "FEATURE_REQUEST",
          "description": "Request is a new feature"
        },
        {
          "choice": "REFACTOR",
          "description": "Request is code refactoring"
        },
        {
          "choice": "QUESTION",
          "description": "Request is a question"
        }
      ]
    },
    {
      "id": "route_to_bug_pipeline",
      "name": "Bug Fix Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute bug-fix-v1 pipeline for bug fixes",
      "inputs": [
        "classify_request"
      ],
      "config": {
        "pipeline": "bug-fix-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_quick_change",
      "name": "Quick Code Change",
      "type": "executor",
      "agent": "code_implementer",
      "description": "Handle simple, direct code modifications (1-5 lines)",
      "inputs": [
        "classify_request"
      ]
    },
    {
      "id": "route_to_feature_pipeline",
      "name": "Feature Development Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute feature-development-v1 pipeline for new features",
      "inputs": [
        "classify_request"
      ],
      "config": {
        "pipeline": "feature-development-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_refactor",
      "name": "Handle Refactor Request",
      "type": "executor",
      "agent": "task_executor",
      "description": "Handle code refactoring requests",
      "inputs": [
        "classify_request"
      ]
    },
    {
      "id": "handle_question",
      "name": "Handle Question",
      "type": "executor",
      "agent": "task_executor",
      "description": "Answer user questions about code or system",
      "inputs": [
        "classify_request"
      ]
    }
  ],
  "connections": [
    {
      "from": "classify_request",
      "to": "route_to_bug_pipeline",
      "condition": "BUG_FIX",
      "description": "Bug detected, route to bug-fix pipeline"
    },
    {
      "from": "classify_request",
      "to": "handle_quick_change",
      "condition": "QUICK_CHANGE",
      "description": "Simple change requested, use direct code implementer"
    },
    {
      "from": "classify_request",
      "to": "route_to_feature_pipeline",
      "condition": "FEATURE_REQUEST",
      "description": "Feature requested, route to feature-development pipeline"
    },
    {
      "from": "classify_request",
      "to": "handle_refactor",
      "condition": "REFACTOR",
      "description": "Refactor requested, use general executor"
    },
    {
      "from": "classify_request",
      "to": "handle_question",
      "condition": "QUESTION",
      "description": "Question asked, provide answer"
    },
    {
      "from": "route_to_bug_pipeline",
      "to": null,
      "condition": "complete",
      "description": "Bug fix pipeline complete - PIPELINE ENDS"
    },
    {
      "from": "handle_quick_change",
      "to": null,
      "condition": "complete",
      "description": "Quick change complete - PIPELINE ENDS"
    },
    {
      "from": "route_to_feature_pipeline",
      "to": null,
      "condition": "complete",
      "description": "Feature development pipeline complete - PIPELINE ENDS"
    },
    {
      "from": "handle_refactor",
      "to": null,
      "condition": "complete",
      "description": "Refactor complete - PIPELINE ENDS"
    },
    {
      "from": "handle_question",
      "to": null,
      "condition": "complete",
      "description": "Question answered - PIPELINE ENDS"
    }
  ],
  "userContext": "The debug menu reset function is not properly resetting the game state. Specifically:\n\n1. Tutorial popups like 'choose awakening' are not being reset and won't show again\n2. The first mission cannot be reopened or replayed after reset\n3. Ship fitting/loadout is persisting across resets when it should be cleared\n\nThe reset should clear ALL tutorial states, mission progress, and ship customization data so the user can test the full new player experience from scratch. Investigate the current reset implementation in the debug menu, identify what localStorage keys and game state variables need to be cleared, and fix the reset function to properly clear everything including:\n- Tutorial/popup shown flags (awakening selection, etc.)\n- Mission progress and availability\n- Ship fitting and loadout data\n- Any other persistent state that would affect a fresh playthrough\n\nTest the fix to ensure a full reset works properly.",
  "workingDir": "/mnt/c/github/superstarships",
  "currentStageIndex": 1,
  "completedStages": [
    "classify_request",
    "route_to_bug_pipeline"
  ],
  "status": "completed",
  "results": {
    "classify_request": "```json\n{\n  \"classification\": \"BUG_FIX\",\n  \"confidence\": 0.98,\n  \"reasoning\": \"This is clearly a bug fix request. The user explicitly states 'is not properly resetting' and describes broken functionality - the debug menu reset function fails to clear certain game state. They provide specific symptoms (tutorial popups not resetting, first mission cannot be replayed, ship fitting persisting) and request investigation and fixing of the reset implementation. The keywords 'not properly', 'should be cleared', 'fix the reset function' and the detailed description of broken behavior are strong indicators of a bug fix.\",\n  \"context\": {\n    \"originalRequest\": \"The debug menu reset function is not properly resetting the game state. Specifically: 1. Tutorial popups like 'choose awakening' are not being reset and won't show again 2. The first mission cannot be reopened or replayed after reset 3. Ship fitting/loadout is persisting across resets when it should be cleared\",\n    \"keyIndicators\": [\n      \"not properly resetting\",\n      \"are not being reset\",\n      \"won't show again\",\n      \"cannot be reopened\",\n      \"persisting across resets when it should be cleared\",\n      \"fix the reset function\"\n    ],\n    \"affectedArea\": \"Debug menu, game state management, localStorage persistence, tutorial system, mission system, ship fitting system\",\n    \"priority\": \"high\",\n    \"specificIssues\": [\n      \"Tutorial popup states not clearing\",\n      \"Mission progress not resetting\",\n      \"Ship fitting data persisting incorrectly\"\n    ],\n    \"requiredActions\": [\n      \"Investigate current reset implementation in debug menu\",\n      \"Identify localStorage keys to clear\",\n      \"Identify game state variables to reset\",\n      \"Fix reset function implementation\",\n      \"Test full reset functionality\"\n    ]\n  }\n}\n```\n\nDECISION: BUG_FIX"
  },
  "currentStage": "Bug Fix Pipeline",
  "pid": 404212,
  "endTime": "2025-11-18T23:28:59.252Z"
}