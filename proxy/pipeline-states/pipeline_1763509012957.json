{
  "id": "pipeline_1763509012957",
  "name": "Development Cycle Meta-Router V1",
  "startTime": "2025-11-18T23:36:52.957Z",
  "stages": [
    {
      "id": "classify_request",
      "name": "Request Classification",
      "type": "classifier",
      "agent": "request_classifier",
      "description": "Classify user request as bug fix, feature request, refactor, or question",
      "decisions": [
        {
          "choice": "BUG_FIX",
          "description": "Request is a bug fix"
        },
        {
          "choice": "QUICK_CHANGE",
          "description": "Request is a simple code modification"
        },
        {
          "choice": "FEATURE_REQUEST",
          "description": "Request is a new feature"
        },
        {
          "choice": "REFACTOR",
          "description": "Request is code refactoring"
        },
        {
          "choice": "QUESTION",
          "description": "Request is a question"
        }
      ]
    },
    {
      "id": "route_to_bug_pipeline",
      "name": "Bug Fix Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute bug-fix-v1 pipeline for bug fixes",
      "inputs": [
        "classify_request"
      ],
      "config": {
        "pipeline": "bug-fix-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_quick_change",
      "name": "Quick Code Change",
      "type": "executor",
      "agent": "code_implementer",
      "description": "Handle simple, direct code modifications (1-5 lines)",
      "inputs": [
        "classify_request"
      ]
    },
    {
      "id": "route_to_feature_pipeline",
      "name": "Feature Development Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute feature-development-v1 pipeline for new features",
      "inputs": [
        "classify_request"
      ],
      "config": {
        "pipeline": "feature-development-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_refactor",
      "name": "Handle Refactor Request",
      "type": "executor",
      "agent": "task_executor",
      "description": "Handle code refactoring requests",
      "inputs": [
        "classify_request"
      ]
    },
    {
      "id": "handle_question",
      "name": "Handle Question",
      "type": "executor",
      "agent": "task_executor",
      "description": "Answer user questions about code or system",
      "inputs": [
        "classify_request"
      ]
    }
  ],
  "connections": [
    {
      "from": "classify_request",
      "to": "route_to_bug_pipeline",
      "condition": "BUG_FIX",
      "description": "Bug detected, route to bug-fix pipeline"
    },
    {
      "from": "classify_request",
      "to": "handle_quick_change",
      "condition": "QUICK_CHANGE",
      "description": "Simple change requested, use direct code implementer"
    },
    {
      "from": "classify_request",
      "to": "route_to_feature_pipeline",
      "condition": "FEATURE_REQUEST",
      "description": "Feature requested, route to feature-development pipeline"
    },
    {
      "from": "classify_request",
      "to": "handle_refactor",
      "condition": "REFACTOR",
      "description": "Refactor requested, use general executor"
    },
    {
      "from": "classify_request",
      "to": "handle_question",
      "condition": "QUESTION",
      "description": "Question asked, provide answer"
    },
    {
      "from": "route_to_bug_pipeline",
      "to": null,
      "condition": "complete",
      "description": "Bug fix pipeline complete - PIPELINE ENDS"
    },
    {
      "from": "handle_quick_change",
      "to": null,
      "condition": "complete",
      "description": "Quick change complete - PIPELINE ENDS"
    },
    {
      "from": "route_to_feature_pipeline",
      "to": null,
      "condition": "complete",
      "description": "Feature development pipeline complete - PIPELINE ENDS"
    },
    {
      "from": "handle_refactor",
      "to": null,
      "condition": "complete",
      "description": "Refactor complete - PIPELINE ENDS"
    },
    {
      "from": "handle_question",
      "to": null,
      "condition": "complete",
      "description": "Question answered - PIPELINE ENDS"
    }
  ],
  "userContext": "There is a critical bug in the first mission tutorial where players are asked to craft and equip an afterburner. The bug: When the player successfully crafts an afterburner and equips it to their ship, the mission objective does not complete - it stays stuck on this step and the player cannot progress. Investigation needed: 1) Review the first mission definition to see how the 'craft and fit item' objective is defined, 2) Check the mission progress tracking code to understand how it detects when items are crafted and equipped, 3) Test the actual workflow of crafting an afterburner and equipping it, 4) Identify why the mission is not detecting completion, 5) Fix the bug so the mission properly advances when the player equips the afterburner. This is blocking new players from completing the tutorial.",
  "workingDir": "/mnt/c/github/superstarships",
  "currentStageIndex": 1,
  "completedStages": [
    "classify_request"
  ],
  "status": "running",
  "results": {
    "classify_request": "```json\n{\n  \"classification\": \"BUG_FIX\",\n  \"confidence\": 0.99,\n  \"reasoning\": \"This is clearly a bug fix request. The user explicitly states 'critical bug' and describes a broken workflow where mission objectives don't complete despite the player performing the required actions. The afterburner crafting/equipping process works, but the mission tracking system fails to detect completion, blocking player progression. This is a functional defect in the mission progression system, not a new feature or simple change.\",\n  \"context\": {\n    \"originalRequest\": \"There is a critical bug in the first mission tutorial where players are asked to craft and equip an afterburner. The bug: When the player successfully crafts an afterburner and equips it to their ship, the mission objective does not complete - it stays stuck on this step and the player cannot progress.\",\n    \"keyIndicators\": [\n      \"critical bug\",\n      \"does not complete\",\n      \"stays stuck\",\n      \"cannot progress\",\n      \"blocking new players\"\n    ],\n    \"affectedArea\": \"Mission system, tutorial progression, crafting and fitting tracking, objective completion detection\",\n    \"priority\": \"high\",\n    \"additionalContext\": {\n      \"blocksProgression\": true,\n      \"affectsNewPlayers\": true,\n      \"requiresInvestigation\": true,\n      \"investigationSteps\": [\n        \"Review first mission definition\",\n        \"Check mission progress tracking code\",\n        \"Test crafting and equipping workflow\",\n        \"Identify detection failure point\",\n        \"Fix mission completion detection\"\n      ]\n    }\n  }\n}\n```\n\nDECISION: BUG_FIX"
  },
  "currentStage": "Bug Fix Pipeline",
  "pid": 414087
}