{
  "id": "pipeline_1763328680969",
  "name": "Development Cycle Meta-Router V1",
  "startTime": "2025-11-16T21:31:20.969Z",
  "stages": [
    {
      "id": "classify_request",
      "name": "Request Classification",
      "type": "classifier",
      "agent": "request_classifier",
      "description": "Classify user request as bug fix, feature request, refactor, or question",
      "decisions": [
        {
          "choice": "BUG_FIX",
          "description": "Request is a bug fix"
        },
        {
          "choice": "QUICK_CHANGE",
          "description": "Request is a simple code modification"
        },
        {
          "choice": "FEATURE_REQUEST",
          "description": "Request is a new feature"
        },
        {
          "choice": "REFACTOR",
          "description": "Request is code refactoring"
        },
        {
          "choice": "QUESTION",
          "description": "Request is a question"
        }
      ]
    },
    {
      "id": "route_to_bug_pipeline",
      "name": "Bug Fix Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute bug-fix-v1 pipeline for bug fixes",
      "inputs": [
        "classify_request"
      ],
      "config": {
        "pipeline": "bug-fix-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_quick_change",
      "name": "Quick Code Change",
      "type": "executor",
      "agent": "code_implementer",
      "description": "Handle simple, direct code modifications (1-5 lines)",
      "inputs": [
        "classify_request"
      ]
    },
    {
      "id": "route_to_feature_pipeline",
      "name": "Feature Development Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute feature-development-v1 pipeline for new features",
      "inputs": [
        "classify_request"
      ],
      "config": {
        "pipeline": "feature-development-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_refactor",
      "name": "Handle Refactor Request",
      "type": "executor",
      "agent": "task_executor",
      "description": "Handle code refactoring requests",
      "inputs": [
        "classify_request"
      ]
    },
    {
      "id": "handle_question",
      "name": "Handle Question",
      "type": "executor",
      "agent": "task_executor",
      "description": "Answer user questions about code or system",
      "inputs": [
        "classify_request"
      ]
    }
  ],
  "connections": [
    {
      "from": "classify_request",
      "to": "route_to_bug_pipeline",
      "condition": "BUG_FIX",
      "description": "Bug detected, route to bug-fix pipeline"
    },
    {
      "from": "classify_request",
      "to": "handle_quick_change",
      "condition": "QUICK_CHANGE",
      "description": "Simple change requested, use direct code implementer"
    },
    {
      "from": "classify_request",
      "to": "route_to_feature_pipeline",
      "condition": "FEATURE_REQUEST",
      "description": "Feature requested, route to feature-development pipeline"
    },
    {
      "from": "classify_request",
      "to": "handle_refactor",
      "condition": "REFACTOR",
      "description": "Refactor requested, use general executor"
    },
    {
      "from": "classify_request",
      "to": "handle_question",
      "condition": "QUESTION",
      "description": "Question asked, provide answer"
    },
    {
      "from": "route_to_bug_pipeline",
      "to": null,
      "condition": "complete",
      "description": "Bug fix pipeline complete - PIPELINE ENDS"
    },
    {
      "from": "handle_quick_change",
      "to": null,
      "condition": "complete",
      "description": "Quick change complete - PIPELINE ENDS"
    },
    {
      "from": "route_to_feature_pipeline",
      "to": null,
      "condition": "complete",
      "description": "Feature development pipeline complete - PIPELINE ENDS"
    },
    {
      "from": "handle_refactor",
      "to": null,
      "condition": "complete",
      "description": "Refactor complete - PIPELINE ENDS"
    },
    {
      "from": "handle_question",
      "to": null,
      "condition": "complete",
      "description": "Question answered - PIPELINE ENDS"
    }
  ],
  "userContext": "Bug Report: Navigation System Not Working After Fitting Items\n\nReproduction Steps:\n1. Start with a ship that has no items fitted\n2. Dock at a station\n3. Build an item (e.g., afterburner) in the station\n4. Move the item to inventory\n5. Fit the item to the ship\n6. Undock from the station\n\nObserved Behavior:\n- Player cannot change navigation direction\n- Player cannot increase speed (throttle shows as set but no effect)\n- Clicking on objects does not initiate navigation\n- Double-clicking in space produces no notification about direction changes\n- Ship appears unresponsive to all navigation commands\n\nExpected Behavior:\n- After undocking with fitted items, the ship should respond normally to navigation commands\n- Double-clicking should set navigation targets with notifications\n- Clicking objects should initiate navigation\n- Throttle controls should affect ship speed\n\nThis appears to be a critical bug in the ship fitting/undocking flow that breaks the navigation system. Please investigate the ship fitting, undocking, and navigation systems to identify the root cause and implement a fix.",
  "workingDir": "/mnt/c/github/superstarships",
  "currentStageIndex": 1,
  "completedStages": [
    "classify_request",
    "route_to_bug_pipeline"
  ],
  "status": "completed",
  "results": {
    "classify_request": "```json\n{\n  \"classification\": \"BUG_FIX\",\n  \"confidence\": 0.99,\n  \"reasoning\": \"This is clearly a bug report with a detailed reproduction scenario. The user describes specific broken functionality (navigation system not working) that occurs after a particular sequence of actions (fitting items and undocking). This has all the hallmarks of a bug: clear reproduction steps, observed vs expected behavior, and a critical system failure.\",\n  \"context\": {\n    \"originalRequest\": \"Bug Report: Navigation System Not Working After Fitting Items\",\n    \"keyIndicators\": [\"Bug Report\", \"not working\", \"appears unresponsive\", \"breaks the navigation system\", \"critical bug\"],\n    \"affectedArea\": \"Navigation system, ship fitting system, undocking flow\",\n    \"priority\": \"high\",\n    \"reproductionSteps\": [\n      \"Start with ship that has no items fitted\",\n      \"Dock at station\",\n      \"Build item (afterburner)\",\n      \"Move item to inventory\",\n      \"Fit item to ship\",\n      \"Undock from station\"\n    ],\n    \"symptoms\": [\n      \"Cannot change navigation direction\",\n      \"Cannot increase speed (throttle ineffective)\",\n      \"Object clicking doesn't initiate navigation\",\n      \"Double-clicking produces no notifications\",\n      \"Ship unresponsive to all navigation commands\"\n    ],\n    \"suspectedSystems\": [\n      \"ShipFittingManager.js\",\n      \"StationManager.js (undocking flow)\",\n      \"NavigationManager.js\",\n      \"InputManager.js\"\n    ]\n  }\n}\n```\n\n**DECISION: BUG_FIX**"
  },
  "currentStage": "Bug Fix Pipeline",
  "pid": 63531,
  "endTime": "2025-11-16T22:03:53.034Z"
}