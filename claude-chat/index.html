<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claude Chat</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="header">
    <h1>Claude Chat</h1>
    <div class="hat-selector" id="hatSelector">
      <!-- Populated by JS -->
    </div>
    <div class="pipeline-selector" id="pipelineSelector">
      <label>Pipeline:</label>
      <select id="pipelineSelect" onchange="app.setPipeline(this.value)">
        <option value="">Direct Chat</option>
        <!-- Populated by JS -->
      </select>
    </div>
    <div class="connection-status">
      <div class="status-dot" id="statusDot"></div>
      <span id="statusText">Disconnected</span>
    </div>
    <div class="directory-input">
      <label>Working Directory:</label>
      <input type="text" id="workingDir" value="/mnt/c/github/claudeplus" placeholder="/path/to/project">
      <button class="btn" onclick="app.setDirectory()">Set</button>
      <button class="btn btn-secondary" onclick="app.clearChat()" title="Clear chat history">Clear</button>
      <button class="btn btn-danger" onclick="app.abortClaude()" id="abortBtn" style="display:none">Abort</button>
    </div>
  </div>

  <div class="tab-bar" id="tabBar">
    <div class="tab-list" id="tabList"></div>
    <button class="tab-add-btn" onclick="app.createTab()" title="New Tab">+</button>
  </div>

  <div class="main-container">
    <div class="chat-panel">
      <div class="chat-messages" id="chatMessages">
        <div class="empty-state" id="emptyState">
          <div class="icon">&#128172;</div>
          <h3>Start a conversation</h3>
          <p>Ask Claude about your codebase, request changes, or get help with development tasks.</p>
        </div>
      </div>
      <div class="chat-input-container">
        <div class="chat-input-row">
          <textarea
            class="chat-input"
            id="chatInput"
            placeholder="Ask Claude anything about your project..."
            rows="1"
          ></textarea>
          <button class="send-btn" id="sendBtn" onclick="app.sendMessage()">Send</button>
        </div>
      </div>
    </div>

    <div class="activity-panel">
      <div class="activity-header">
        <span class="agent-icon">&#129302;</span>
        <span class="agent-name" id="agentName">Claude</span>
        <span class="agent-status" id="agentStatus">Idle</span>
      </div>
      <div class="activity-content">
        <div class="thinking-panel" id="thinkingPanel"></div>

        <div class="todo-panel" id="todoPanel">
          <h4>Tasks</h4>
          <div id="todoList"></div>
        </div>

        <div class="tool-panel" id="toolPanel">
          <h4>Tool Activity</h4>
          <div id="toolList">
            <div class="tool-empty">No tool activity yet</div>
          </div>
        </div>

        <div class="stream-panel" id="streamPanel">
          <h4>Response</h4>
          <div class="stream-content" id="streamContent"></div>
        </div>

        <div class="usage-panel">
          <h4>Session Usage</h4>
          <div class="usage-stats">
            <div class="usage-stat">
              <span class="label">Total Cost</span>
              <span class="value cost" id="totalCost">$0.0000</span>
            </div>
            <div class="usage-stat">
              <span class="label">Input Tokens</span>
              <span class="value" id="inputTokens">0</span>
            </div>
            <div class="usage-stat">
              <span class="label">Output Tokens</span>
              <span class="value" id="outputTokens">0</span>
            </div>
            <div class="usage-stat">
              <span class="label">Messages</span>
              <span class="value" id="messageCount">0</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Hat Editor Modal -->
  <div class="hat-editor-modal" id="hatEditorModal">
    <!-- Populated by JS -->
  </div>

  <script src="js/app.js"></script>
</body>
</html>
