{
  "id": "pool-feature-development",
  "name": "pool-feature-development",
  "version": "2.0.0",
  "description": "Develop new CoiniumServ features with mining cycle validation - implements test-driven development workflow integrated with real mining infrastructure",
  "category": "development",
  "stages": [
    {
      "id": "define_feature",
      "name": "Define Feature",
      "agent": "task_planner",
      "description": "Document feature requirements, acceptance criteria, integration points with CoiniumServ",
      "inputs": [],
      "decisions": [
        {
          "choice": "success",
          "description": "define_feature completed successfully"
        },
        {
          "choice": "failed",
          "description": "define_feature failed"
        }
      ]
    },
    {
      "id": "analyze_architecture",
      "name": "Analyze Architecture",
      "agent": "task_planner",
      "description": "Analyze existing CoiniumServ architecture, identify affected modules",
      "inputs": [
        "define_feature"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "analyze_architecture completed successfully"
        },
        {
          "choice": "failed",
          "description": "analyze_architecture failed"
        }
      ]
    },
    {
      "id": "document_specification",
      "name": "Document Specification",
      "agent": "task_planner",
      "description": "Document feature specification with technical details and test scenarios",
      "inputs": [
        "analyze_architecture"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "document_specification completed successfully"
        },
        {
          "choice": "failed",
          "description": "document_specification failed"
        }
      ]
    },
    {
      "id": "create_implementation_plan",
      "name": "Create Implementation Plan",
      "agent": "task_planner",
      "description": "Create detailed implementation plan with code structure and integration strategy",
      "inputs": [
        "document_specification"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "create_implementation_plan completed successfully"
        },
        {
          "choice": "failed",
          "description": "create_implementation_plan failed"
        }
      ]
    },
    {
      "id": "plan_mining_cycle_integration",
      "name": "Plan Mining Cycle Integration",
      "agent": "task_planner",
      "description": "Design how feature integrates with mining cycle (daemon, miner, wallet interactions)",
      "inputs": [
        "create_implementation_plan"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "plan_mining_cycle_integration completed successfully"
        },
        {
          "choice": "failed",
          "description": "plan_mining_cycle_integration failed"
        }
      ]
    },
    {
      "id": "document_plan",
      "name": "Document Plan",
      "agent": "task_planner",
      "description": "Document implementation plan with integration steps and validation strategy",
      "inputs": [
        "plan_mining_cycle_integration"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "document_plan completed successfully"
        },
        {
          "choice": "failed",
          "description": "document_plan failed"
        }
      ]
    },
    {
      "id": "implement_feature",
      "name": "Implement Feature",
      "agent": "task_executor",
      "description": "Implement feature in CoiniumServ following patterns with logging and error handling",
      "inputs": [
        "document_plan"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "implement_feature completed successfully"
        },
        {
          "choice": "failed",
          "description": "implement_feature failed"
        }
      ]
    },
    {
      "id": "build_coiniumserv",
      "name": "Build Coiniumserv",
      "agent": "task_executor",
      "description": "Build CoiniumServ with new feature, verify compilation",
      "inputs": [
        "implement_feature"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "build_coiniumserv completed successfully"
        },
        {
          "choice": "failed",
          "description": "build_coiniumserv failed"
        }
      ]
    },
    {
      "id": "document_changes",
      "name": "Document Changes",
      "agent": "task_executor",
      "description": "Document code changes, API changes, config changes with changelog",
      "inputs": [
        "build_coiniumserv"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "document_changes completed successfully"
        },
        {
          "choice": "failed",
          "description": "document_changes failed"
        }
      ]
    },
    {
      "id": "setup_integration_test",
      "name": "Setup Integration Test",
      "agent": "cycle_integration_tester",
      "description": "Set up test mining infrastructure (daemon + pool + miner)",
      "inputs": [
        "document_changes"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "setup_integration_test completed successfully"
        },
        {
          "choice": "failed",
          "description": "setup_integration_test failed"
        }
      ]
    },
    {
      "id": "run_integration_test",
      "name": "Run Integration Test",
      "agent": "cycle_integration_tester",
      "description": "Test feature with real mining cycle (shares, jobs, blocks)",
      "inputs": [
        "setup_integration_test"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "run_integration_test completed successfully"
        },
        {
          "choice": "failed",
          "description": "run_integration_test failed"
        }
      ]
    },
    {
      "id": "validate_feature_behavior",
      "name": "Validate Feature Behavior",
      "agent": "cycle_integration_tester",
      "description": "Validate feature behavior against acceptance criteria",
      "inputs": [
        "run_integration_test"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "validate_feature_behavior completed successfully"
        },
        {
          "choice": "failed",
          "description": "validate_feature_behavior failed"
        }
      ]
    },
    {
      "id": "cleanup_integration_test",
      "name": "Cleanup Integration Test",
      "agent": "cycle_integration_tester",
      "description": "Stop components, archive integration test logs",
      "inputs": [
        "validate_feature_behavior"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "cleanup_integration_test completed successfully"
        },
        {
          "choice": "failed",
          "description": "cleanup_integration_test failed"
        }
      ]
    },
    {
      "id": "setup_stratum_monitoring",
      "name": "Setup Stratum Monitoring",
      "agent": "stratum_monitor",
      "description": "Set up stratum protocol monitoring and traffic capture",
      "inputs": [
        "cleanup_integration_test"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "setup_stratum_monitoring completed successfully"
        },
        {
          "choice": "failed",
          "description": "setup_stratum_monitoring failed"
        }
      ]
    },
    {
      "id": "validate_stratum_protocol",
      "name": "Validate Stratum Protocol",
      "agent": "stratum_monitor",
      "description": "Validate stratum protocol compliance (subscribe, authorize, jobs, shares)",
      "inputs": [
        "setup_stratum_monitoring"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "validate_stratum_protocol completed successfully"
        },
        {
          "choice": "failed",
          "description": "validate_stratum_protocol failed"
        }
      ]
    },
    {
      "id": "validate_feature_stratum",
      "name": "Validate Feature Stratum",
      "agent": "stratum_monitor",
      "description": "Validate feature-specific stratum behavior and backward compatibility",
      "inputs": [
        "validate_stratum_protocol"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "validate_feature_stratum completed successfully"
        },
        {
          "choice": "failed",
          "description": "validate_feature_stratum failed"
        }
      ]
    },
    {
      "id": "generate_stratum_report",
      "name": "Generate Stratum Report",
      "agent": "stratum_monitor",
      "description": "Generate stratum validation report with message samples and timing",
      "inputs": [
        "validate_feature_stratum"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "generate_stratum_report completed successfully"
        },
        {
          "choice": "failed",
          "description": "generate_stratum_report failed"
        }
      ]
    },
    {
      "id": "setup_performance_baseline",
      "name": "Setup Performance Baseline",
      "agent": "performance_analyzer",
      "description": "Measure performance baseline without feature (CPU, memory, throughput)",
      "inputs": [
        "generate_stratum_report"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "setup_performance_baseline completed successfully"
        },
        {
          "choice": "failed",
          "description": "setup_performance_baseline failed"
        }
      ]
    },
    {
      "id": "run_performance_test",
      "name": "Run Performance Test",
      "agent": "performance_analyzer",
      "description": "Run performance test with feature enabled (multiple miners)",
      "inputs": [
        "setup_performance_baseline"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "run_performance_test completed successfully"
        },
        {
          "choice": "failed",
          "description": "run_performance_test failed"
        }
      ]
    },
    {
      "id": "compare_performance",
      "name": "Compare Performance",
      "agent": "performance_analyzer",
      "description": "Compare baseline vs test, identify regressions",
      "inputs": [
        "run_performance_test"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "compare_performance completed successfully"
        },
        {
          "choice": "failed",
          "description": "compare_performance failed"
        }
      ]
    },
    {
      "id": "generate_performance_report",
      "name": "Generate Performance Report",
      "agent": "performance_analyzer",
      "description": "Generate performance report with graphs and recommendations",
      "inputs": [
        "compare_performance"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "generate_performance_report completed successfully"
        },
        {
          "choice": "failed",
          "description": "generate_performance_report failed"
        }
      ]
    },
    {
      "id": "consolidate_test_results",
      "name": "Consolidate Test Results",
      "agent": "task_planner",
      "description": "Consolidate all test results (integration, stratum, performance)",
      "inputs": [
        "generate_performance_report"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "consolidate_test_results completed successfully"
        },
        {
          "choice": "failed",
          "description": "consolidate_test_results failed"
        }
      ]
    },
    {
      "id": "generate_feature_report",
      "name": "Generate Feature Report",
      "agent": "task_planner",
      "description": "Generate comprehensive feature report with all validations",
      "inputs": [
        "consolidate_test_results"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "generate_feature_report completed successfully"
        },
        {
          "choice": "failed",
          "description": "generate_feature_report failed"
        }
      ]
    },
    {
      "id": "feature_validation_complete",
      "name": "Feature Validation Complete",
      "agent": "task_planner",
      "description": "Mark feature as validated and ready for production",
      "inputs": [
        "generate_feature_report"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "feature_validation_complete completed successfully"
        },
        {
          "choice": "failed",
          "description": "feature_validation_complete failed"
        }
      ]
    }
  ],
  "flow": {
    "type": "sequential",
    "connections": [
      {
        "from": "define_feature",
        "to": "analyze_architecture",
        "condition": "success"
      },
      {
        "from": "define_feature",
        "to": null,
        "condition": "failed",
        "description": "define_feature failed - END"
      },
      {
        "from": "analyze_architecture",
        "to": "document_specification",
        "condition": "success"
      },
      {
        "from": "analyze_architecture",
        "to": null,
        "condition": "failed",
        "description": "analyze_architecture failed - END"
      },
      {
        "from": "document_specification",
        "to": "create_implementation_plan",
        "condition": "success"
      },
      {
        "from": "document_specification",
        "to": null,
        "condition": "failed",
        "description": "document_specification failed - END"
      },
      {
        "from": "create_implementation_plan",
        "to": "plan_mining_cycle_integration",
        "condition": "success"
      },
      {
        "from": "create_implementation_plan",
        "to": null,
        "condition": "failed",
        "description": "create_implementation_plan failed - END"
      },
      {
        "from": "plan_mining_cycle_integration",
        "to": "document_plan",
        "condition": "success"
      },
      {
        "from": "plan_mining_cycle_integration",
        "to": null,
        "condition": "failed",
        "description": "plan_mining_cycle_integration failed - END"
      },
      {
        "from": "document_plan",
        "to": "implement_feature",
        "condition": "success"
      },
      {
        "from": "document_plan",
        "to": null,
        "condition": "failed",
        "description": "document_plan failed - END"
      },
      {
        "from": "implement_feature",
        "to": "build_coiniumserv",
        "condition": "success"
      },
      {
        "from": "implement_feature",
        "to": null,
        "condition": "failed",
        "description": "implement_feature failed - END"
      },
      {
        "from": "build_coiniumserv",
        "to": "document_changes",
        "condition": "success"
      },
      {
        "from": "build_coiniumserv",
        "to": null,
        "condition": "failed",
        "description": "build_coiniumserv failed - END"
      },
      {
        "from": "document_changes",
        "to": "setup_integration_test",
        "condition": "success"
      },
      {
        "from": "document_changes",
        "to": null,
        "condition": "failed",
        "description": "document_changes failed - END"
      },
      {
        "from": "setup_integration_test",
        "to": "run_integration_test",
        "condition": "success"
      },
      {
        "from": "setup_integration_test",
        "to": null,
        "condition": "failed",
        "description": "setup_integration_test failed - END"
      },
      {
        "from": "run_integration_test",
        "to": "validate_feature_behavior",
        "condition": "success"
      },
      {
        "from": "run_integration_test",
        "to": null,
        "condition": "failed",
        "description": "run_integration_test failed - END"
      },
      {
        "from": "validate_feature_behavior",
        "to": "cleanup_integration_test",
        "condition": "success"
      },
      {
        "from": "validate_feature_behavior",
        "to": null,
        "condition": "failed",
        "description": "validate_feature_behavior failed - END"
      },
      {
        "from": "cleanup_integration_test",
        "to": "setup_stratum_monitoring",
        "condition": "success"
      },
      {
        "from": "cleanup_integration_test",
        "to": null,
        "condition": "failed",
        "description": "cleanup_integration_test failed - END"
      },
      {
        "from": "setup_stratum_monitoring",
        "to": "validate_stratum_protocol",
        "condition": "success"
      },
      {
        "from": "setup_stratum_monitoring",
        "to": null,
        "condition": "failed",
        "description": "setup_stratum_monitoring failed - END"
      },
      {
        "from": "validate_stratum_protocol",
        "to": "validate_feature_stratum",
        "condition": "success"
      },
      {
        "from": "validate_stratum_protocol",
        "to": null,
        "condition": "failed",
        "description": "validate_stratum_protocol failed - END"
      },
      {
        "from": "validate_feature_stratum",
        "to": "generate_stratum_report",
        "condition": "success"
      },
      {
        "from": "validate_feature_stratum",
        "to": null,
        "condition": "failed",
        "description": "validate_feature_stratum failed - END"
      },
      {
        "from": "generate_stratum_report",
        "to": "setup_performance_baseline",
        "condition": "success"
      },
      {
        "from": "generate_stratum_report",
        "to": null,
        "condition": "failed",
        "description": "generate_stratum_report failed - END"
      },
      {
        "from": "setup_performance_baseline",
        "to": "run_performance_test",
        "condition": "success"
      },
      {
        "from": "setup_performance_baseline",
        "to": null,
        "condition": "failed",
        "description": "setup_performance_baseline failed - END"
      },
      {
        "from": "run_performance_test",
        "to": "compare_performance",
        "condition": "success"
      },
      {
        "from": "run_performance_test",
        "to": null,
        "condition": "failed",
        "description": "run_performance_test failed - END"
      },
      {
        "from": "compare_performance",
        "to": "generate_performance_report",
        "condition": "success"
      },
      {
        "from": "compare_performance",
        "to": null,
        "condition": "failed",
        "description": "compare_performance failed - END"
      },
      {
        "from": "generate_performance_report",
        "to": "consolidate_test_results",
        "condition": "success"
      },
      {
        "from": "generate_performance_report",
        "to": null,
        "condition": "failed",
        "description": "generate_performance_report failed - END"
      },
      {
        "from": "consolidate_test_results",
        "to": "generate_feature_report",
        "condition": "success"
      },
      {
        "from": "consolidate_test_results",
        "to": null,
        "condition": "failed",
        "description": "consolidate_test_results failed - END"
      },
      {
        "from": "generate_feature_report",
        "to": "feature_validation_complete",
        "condition": "success"
      },
      {
        "from": "generate_feature_report",
        "to": null,
        "condition": "failed",
        "description": "generate_feature_report failed - END"
      },
      {
        "from": "feature_validation_complete",
        "to": null,
        "condition": "success"
      },
      {
        "from": "feature_validation_complete",
        "to": null,
        "condition": "failed",
        "description": "feature_validation_complete failed - END"
      }
    ]
  },
  "metadata": {
    "tags": [
      "feature-development",
      "coiniumserv",
      "mining-cycle",
      "integration-testing",
      "stratum-validation",
      "performance-testing",
      "test-driven-development"
    ],
    "author": "Mining Cycle Automation System",
    "estimatedTime": "2-4 hours per feature",
    "requiresWSL": true,
    "basedOn": "Section 3.3 of MINING_CYCLE_AUTOMATION_PLAN.md",
    "refactored": "2025-01-22 - Converted from actions-based to 24 atomic stages"
  }
}