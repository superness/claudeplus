{
  "id": "technical-systems-design-v1",
  "name": "Technical Systems Design Pipeline",
  "description": "Transforms thesis/vision documents into peer-reviewed technical specifications with dual-track review: technical feasibility AND vision alignment",
  "version": "3.2.0",
  "category": "design",
  "stages": [
    {
      "id": "analyze_thesis",
      "name": "Thesis Analysis",
      "type": "analyzer",
      "agent": "thesis_analyzer",
      "description": "Analyze thesis document to extract design principles and requirements",
      "decisions": [
        {"choice": "analysis_complete", "description": "Design principles and requirements extracted"}
      ]
    },
    {
      "id": "design_architecture",
      "name": "Architecture Design",
      "type": "architect",
      "agent": "systems_architect",
      "description": "Design system architecture based on analyzed requirements",
      "inputs": ["analyze_thesis"],
      "decisions": [
        {"choice": "architecture_complete", "description": "System architecture designed"}
      ]
    },
    {
      "id": "technical_feasibility_review",
      "name": "Technical Feasibility Review",
      "type": "validator",
      "agent": "technical_feasibility_reviewer",
      "description": "Senior engineer review: code architecture, complexity, performance, security, testing strategy, dependencies, implementation risk",
      "inputs": ["design_architecture", "analyze_thesis"],
      "decisions": [
        {"choice": "approved", "description": "Technically feasible, proceed to vision review"},
        {"choice": "needs_revision", "description": "Technical issues found, revise architecture"},
        {"choice": "major_concerns", "description": "Significant technical problems, rethink architecture"}
      ]
    },
    {
      "id": "vision_alignment_review",
      "name": "Vision Alignment Review",
      "type": "validator",
      "agent": "vision_alignment_reviewer",
      "description": "Vision owner review: thesis alignment, compromise detection, enablement check, spirit vs letter",
      "inputs": ["design_architecture", "analyze_thesis", "technical_feasibility_review"],
      "decisions": [
        {"choice": "vision_aligned", "description": "Specification honors the thesis vision"},
        {"choice": "needs_realignment", "description": "Vision compromised, needs revision to restore alignment"},
        {"choice": "vision_betrayed", "description": "Fundamental misalignment, requires significant rethink"}
      ]
    },
    {
      "id": "revise_architecture",
      "name": "Revise Architecture",
      "type": "executor",
      "agent": "systems_architect",
      "description": "Revise architecture based on technical, vision, and/or thoroughness review feedback",
      "inputs": ["technical_feasibility_review", "vision_alignment_review", "thoroughness_review", "design_architecture", "analyze_thesis"],
      "decisions": [
        {"choice": "revision_complete", "description": "Architecture revised, ready for re-review"}
      ]
    },
    {
      "id": "write_specification",
      "name": "Write Technical Specification",
      "type": "writer",
      "agent": "technical_spec_writer",
      "description": "Write detailed technical specification from approved architecture",
      "inputs": ["design_architecture", "analyze_thesis", "technical_feasibility_review", "vision_alignment_review"],
      "decisions": [
        {"choice": "spec_written", "description": "Technical specification written to file"}
      ]
    },
    {
      "id": "spec_peer_review",
      "name": "Specification Peer Review",
      "type": "validator",
      "agent": "spec_peer_reviewer",
      "description": "Final review of written specification for completeness and clarity",
      "inputs": ["write_specification", "analyze_thesis", "design_architecture", "technical_feasibility_review", "vision_alignment_review"],
      "decisions": [
        {"choice": "approved", "description": "Specification approved - ready for implementation planning"},
        {"choice": "needs_revision", "description": "Specification needs revision based on feedback"}
      ]
    },
    {
      "id": "revise_specification",
      "name": "Revise Specification",
      "type": "executor",
      "agent": "spec_reviser",
      "description": "Revise specification based on peer review feedback",
      "inputs": ["spec_peer_review", "write_specification", "analyze_thesis", "design_architecture", "technical_feasibility_review", "vision_alignment_review"],
      "decisions": [
        {"choice": "revision_complete", "description": "Specification revised and ready for re-review"}
      ]
    },
    {
      "id": "create_implementation_plan",
      "name": "Create Implementation Plan",
      "type": "planner",
      "agent": "implementation_planner_spec",
      "description": "Convert approved specification into actionable implementation tasks",
      "inputs": ["spec_peer_review", "write_specification", "design_architecture", "analyze_thesis", "technical_feasibility_review", "vision_alignment_review"],
      "decisions": [
        {"choice": "planning_complete", "description": "Implementation plan created with concrete tasks"}
      ]
    },
    {
      "id": "thoroughness_review",
      "name": "Thoroughness Review",
      "type": "validator",
      "agent": "thoroughness_expander",
      "description": "Reviews entire documentation for implementation-ready specificity - visuals, sounds, interactions, subsystems all need concrete detail",
      "inputs": ["create_implementation_plan", "write_specification", "design_architecture", "analyze_thesis", "technical_feasibility_review", "vision_alignment_review"],
      "decisions": [
        {"choice": "IMPLEMENTATION_READY", "description": "All systems documented with implementation-level detail"},
        {"choice": "NEEDS_EXPANSION", "description": "Good foundation but lacks specific detail in key areas"},
        {"choice": "TOO_ABSTRACT", "description": "High-level concepts only, significant expansion required"}
      ]
    }
  ],
  "flow": {
    "type": "conditional",
    "description": "Thesis → Architecture → DUAL REVIEW (Technical + Vision) → Specification → Final Review → Implementation Plan → Thoroughness Review → (loop back to revise if not detailed enough)",
    "connections": [
      {
        "from": "analyze_thesis",
        "to": "design_architecture",
        "condition": "analysis_complete",
        "description": "Analysis complete, design architecture"
      },
      {
        "from": "design_architecture",
        "to": "technical_feasibility_review",
        "condition": "architecture_complete",
        "description": "Architecture complete, submit for technical review"
      },
      {
        "from": "technical_feasibility_review",
        "to": "vision_alignment_review",
        "condition": "approved",
        "description": "Technically feasible, now check vision alignment"
      },
      {
        "from": "technical_feasibility_review",
        "to": "revise_architecture",
        "condition": "needs_revision",
        "description": "Technical issues, revise architecture"
      },
      {
        "from": "technical_feasibility_review",
        "to": "revise_architecture",
        "condition": "major_concerns",
        "description": "Major technical concerns, rethink architecture"
      },
      {
        "from": "vision_alignment_review",
        "to": "write_specification",
        "condition": "vision_aligned",
        "description": "Vision aligned, write detailed specification"
      },
      {
        "from": "vision_alignment_review",
        "to": "revise_architecture",
        "condition": "needs_realignment",
        "description": "Vision compromised, revise to restore alignment"
      },
      {
        "from": "vision_alignment_review",
        "to": "revise_architecture",
        "condition": "vision_betrayed",
        "description": "Vision betrayed, significant architecture rethink required"
      },
      {
        "from": "revise_architecture",
        "to": "technical_feasibility_review",
        "condition": "revision_complete",
        "description": "Architecture revised, re-submit for dual review"
      },
      {
        "from": "write_specification",
        "to": "spec_peer_review",
        "condition": "spec_written",
        "description": "Specification written, submit for final review"
      },
      {
        "from": "spec_peer_review",
        "to": "create_implementation_plan",
        "condition": "approved",
        "description": "Specification approved, create implementation plan"
      },
      {
        "from": "spec_peer_review",
        "to": "revise_specification",
        "condition": "needs_revision",
        "description": "Needs revision, address feedback"
      },
      {
        "from": "revise_specification",
        "to": "spec_peer_review",
        "condition": "revision_complete",
        "description": "Revision complete, re-submit for peer review"
      },
      {
        "from": "create_implementation_plan",
        "to": "thoroughness_review",
        "condition": "planning_complete",
        "description": "Implementation plan created, now check thoroughness"
      },
      {
        "from": "thoroughness_review",
        "to": null,
        "condition": "IMPLEMENTATION_READY",
        "description": "All documentation is implementation-ready - PIPELINE ENDS"
      },
      {
        "from": "thoroughness_review",
        "to": "revise_architecture",
        "condition": "NEEDS_EXPANSION",
        "description": "Documentation lacks specificity, revise architecture with expansion requirements"
      },
      {
        "from": "thoroughness_review",
        "to": "revise_architecture",
        "condition": "TOO_ABSTRACT",
        "description": "Documentation too high-level, significant expansion required at architecture level"
      }
    ]
  },
  "metadata": {
    "tags": ["technical-design", "specification", "peer-review", "architecture", "implementation-planning", "vision-alignment", "feasibility", "thoroughness"],
    "author": "Claude Plus Development System",
    "usesWindowsCommands": false,
    "requiresBrowser": false,
    "methodology": "Thesis-driven design with dual-track peer review (technical feasibility + vision alignment) and thoroughness expansion loop"
  }
}
