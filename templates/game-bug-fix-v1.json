{
  "id": "game-bug-fix-v1",
  "name": "Game Bug Fix Pipeline",
  "description": "Bug fix workflow: analyze, reproduce+confirm, investigate+fix, verify, document",
  "version": "2.0.0",
  "category": "game-development",
  "stages": [
    {
      "id": "bug_analysis",
      "name": "Analyze Bug",
      "type": "analyzer",
      "agent": "game_bug_analyzer",
      "description": "Analyze the bug report to understand symptoms and affected systems",
      "decisions": [
        {"choice": "analysis_complete", "description": "Bug analyzed, ready to reproduce"}
      ]
    },
    {
      "id": "reproduce_and_confirm",
      "name": "Reproduce & Confirm Bug",
      "type": "creator",
      "agent": "game_bug_reproducer",
      "description": "Create a reproduction test AND run it to confirm the bug exists",
      "inputs": ["bug_analysis"],
      "decisions": [
        {"choice": "bug_confirmed", "description": "Bug reproduced - saw the actual error"},
        {"choice": "bug_not_reproduced", "description": "Test ran but no error occurred"},
        {"choice": "reproduction_failed", "description": "Test couldn't run (server down, etc.)"}
      ]
    },
    {
      "id": "investigate_and_fix",
      "name": "Investigate & Fix",
      "type": "executor",
      "agent": "game_bug_fixer",
      "description": "Find the root cause in code and implement the fix",
      "inputs": ["reproduce_and_confirm", "bug_analysis"],
      "decisions": [
        {"choice": "fix_implemented", "description": "Root cause found and fix implemented"},
        {"choice": "fix_requires_refactor", "description": "Fix requires broader refactoring"},
        {"choice": "cannot_identify_cause", "description": "Couldn't find root cause in code"}
      ]
    },
    {
      "id": "gather_context",
      "name": "Gather More Context",
      "type": "analyzer",
      "agent": "game_context_gatherer",
      "description": "Gather additional context by examining related code and dependencies",
      "inputs": ["investigate_and_fix"],
      "decisions": [
        {"choice": "context_gathered", "description": "Additional context collected, retry investigation"}
      ]
    },
    {
      "id": "refactor_for_fix",
      "name": "Refactor for Fix",
      "type": "executor",
      "agent": "game_refactorer",
      "description": "Perform necessary refactoring to properly implement the bug fix",
      "inputs": ["investigate_and_fix"],
      "decisions": [
        {"choice": "refactor_complete", "description": "Refactoring complete, fix can be applied"}
      ]
    },
    {
      "id": "verify_fix",
      "name": "Verify Fix",
      "type": "validator",
      "agent": "game_fix_verifier",
      "description": "Re-run the reproduction test - bug should NOT reproduce now",
      "inputs": ["investigate_and_fix", "reproduce_and_confirm"],
      "decisions": [
        {"choice": "FIX_VERIFIED", "description": "Bug no longer reproduces - fix works!"},
        {"choice": "FIX_INCOMPLETE", "description": "Bug still reproduces - fix didn't work"},
        {"choice": "REGRESSION_DETECTED", "description": "Fix introduced new issues"}
      ]
    },
    {
      "id": "document_fix",
      "name": "Document Fix",
      "type": "executor",
      "agent": "game_fix_documenter",
      "description": "Document the bug fix",
      "inputs": ["verify_fix", "bug_analysis", "investigate_and_fix"],
      "decisions": [
        {"choice": "documentation_complete", "description": "Fix documented - pipeline complete"}
      ]
    }
  ],
  "flow": {
    "type": "conditional",
    "description": "Bug fix workflow with runtime reproduction confirmation",
    "connections": [
      {
        "from": "bug_analysis",
        "to": "reproduce_and_confirm",
        "condition": "analysis_complete",
        "description": "Bug analyzed, create and run reproduction test"
      },
      {
        "from": "reproduce_and_confirm",
        "to": "investigate_and_fix",
        "condition": "bug_confirmed",
        "description": "Bug confirmed! Now investigate and fix"
      },
      {
        "from": "reproduce_and_confirm",
        "to": "bug_analysis",
        "condition": "bug_not_reproduced",
        "description": "Bug not reproduced, re-analyze"
      },
      {
        "from": "reproduce_and_confirm",
        "to": "reproduce_and_confirm",
        "condition": "reproduction_failed",
        "description": "Script failed, try again"
      },
      {
        "from": "investigate_and_fix",
        "to": "verify_fix",
        "condition": "fix_implemented",
        "description": "Fix implemented, verify it works"
      },
      {
        "from": "investigate_and_fix",
        "to": "gather_context",
        "condition": "cannot_identify_cause",
        "description": "Need more context to find root cause"
      },
      {
        "from": "investigate_and_fix",
        "to": "refactor_for_fix",
        "condition": "fix_requires_refactor",
        "description": "Fix needs refactoring first"
      },
      {
        "from": "gather_context",
        "to": "investigate_and_fix",
        "condition": "context_gathered",
        "description": "Context gathered, retry investigation"
      },
      {
        "from": "refactor_for_fix",
        "to": "investigate_and_fix",
        "condition": "refactor_complete",
        "description": "Refactoring done, apply fix"
      },
      {
        "from": "verify_fix",
        "to": "document_fix",
        "condition": "FIX_VERIFIED",
        "description": "Bug is fixed!"
      },
      {
        "from": "verify_fix",
        "to": "investigate_and_fix",
        "condition": "FIX_INCOMPLETE",
        "description": "Bug still reproduces, re-investigate"
      },
      {
        "from": "verify_fix",
        "to": "investigate_and_fix",
        "condition": "REGRESSION_DETECTED",
        "description": "Regression found, revise fix"
      },
      {
        "from": "document_fix",
        "to": null,
        "condition": "documentation_complete",
        "description": "Bug fix complete - PIPELINE ENDS"
      }
    ]
  },
  "metadata": {
    "tags": ["bug-fix", "game-development", "test-driven"],
    "author": "AI Game Studio",
    "estimatedDuration": "15-45 minutes"
  }
}
