{
  "id": "deployment-pipeline",
  "name": "Deployment Pipeline",
  "version": "2.0.0",
  "description": "Deploy CoiniumServ to target environment with validation",
  "author": "SuperCoinServ Meta-Pipeline System",
  "category": "deployment",
  "stages": [
    {
      "id": "pre_deployment_validation_validateDeploymentPackage",
      "name": "Pre Deployment Validation - Validatedeploymentpackage",
      "agent": "proof_validator",
      "description": "validate_deployment_package: Validate deployment prerequisites and environment",
      "inputs": [],
      "decisions": [
        {
          "choice": "success",
          "description": "validateDeploymentPackage completed successfully"
        },
        {
          "choice": "failed",
          "description": "validateDeploymentPackage failed"
        }
      ]
    },
    {
      "id": "pre_deployment_validation_validateTargetEnvironment",
      "name": "Pre Deployment Validation - Validatetargetenvironment",
      "agent": "proof_validator",
      "description": "validate_target_environment: Validate deployment prerequisites and environment",
      "inputs": [
        "pre_deployment_validation_validateDeploymentPackage"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "validateTargetEnvironment completed successfully"
        },
        {
          "choice": "failed",
          "description": "validateTargetEnvironment failed"
        }
      ]
    },
    {
      "id": "pre_deployment_validation_backupCurrentVersion",
      "name": "Pre Deployment Validation - Backupcurrentversion",
      "agent": "task_executor",
      "description": "backup_current_installation: Validate deployment prerequisites and environment",
      "inputs": [
        "pre_deployment_validation_validateTargetEnvironment"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "backupCurrentVersion completed successfully"
        },
        {
          "choice": "failed",
          "description": "backupCurrentVersion failed"
        }
      ]
    },
    {
      "id": "stop_services_stopPoolServer",
      "name": "Stop Services - Stoppoolserver",
      "agent": "task_executor",
      "description": "stop_service: Gracefully stop running services",
      "inputs": [
        "pre_deployment_validation_backupCurrentVersion"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "stopPoolServer completed successfully"
        },
        {
          "choice": "failed",
          "description": "stopPoolServer failed"
        }
      ]
    },
    {
      "id": "stop_services_verifyServicesStopped",
      "name": "Stop Services - Verifyservicesstopped",
      "agent": "task_executor",
      "description": "verify_services_stopped: Gracefully stop running services",
      "inputs": [
        "stop_services_stopPoolServer"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "verifyServicesStopped completed successfully"
        },
        {
          "choice": "failed",
          "description": "verifyServicesStopped failed"
        }
      ]
    },
    {
      "id": "deploy_new_version_extractPackage",
      "name": "Deploy New Version - Extractpackage",
      "agent": "task_executor",
      "description": "extract_deployment_package: Deploy new version files",
      "inputs": [
        "stop_services_verifyServicesStopped"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "extractPackage completed successfully"
        },
        {
          "choice": "failed",
          "description": "extractPackage failed"
        }
      ]
    },
    {
      "id": "deploy_new_version_updateConfiguration",
      "name": "Deploy New Version - Updateconfiguration",
      "agent": "task_executor",
      "description": "update_configuration: Deploy new version files",
      "inputs": [
        "deploy_new_version_extractPackage"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "updateConfiguration completed successfully"
        },
        {
          "choice": "failed",
          "description": "updateConfiguration failed"
        }
      ]
    },
    {
      "id": "deploy_new_version_setPermissions",
      "name": "Deploy New Version - Setpermissions",
      "agent": "task_executor",
      "description": "set_file_permissions: Deploy new version files",
      "inputs": [
        "deploy_new_version_updateConfiguration"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "setPermissions completed successfully"
        },
        {
          "choice": "failed",
          "description": "setPermissions failed"
        }
      ]
    },
    {
      "id": "start_and_verify_startServices",
      "name": "Start And Verify - Startservices",
      "agent": "task_executor",
      "description": "start_service: Start services and verify operation",
      "inputs": [
        "deploy_new_version_setPermissions"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "startServices completed successfully"
        },
        {
          "choice": "failed",
          "description": "startServices failed"
        }
      ]
    },
    {
      "id": "start_and_verify_runHealthChecks",
      "name": "Start And Verify - Runhealthchecks",
      "agent": "cycle_integration_tester",
      "description": "run_health_checks: Start services and verify operation",
      "inputs": [
        "start_and_verify_startServices"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "runHealthChecks completed successfully"
        },
        {
          "choice": "failed",
          "description": "runHealthChecks failed"
        }
      ]
    },
    {
      "id": "start_and_verify_runSmokeTests",
      "name": "Start And Verify - Runsmoketests",
      "agent": "cycle_integration_tester",
      "description": "run_smoke_tests: Start services and verify operation",
      "inputs": [
        "start_and_verify_runHealthChecks"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "runSmokeTests completed successfully"
        },
        {
          "choice": "failed",
          "description": "runSmokeTests failed"
        }
      ]
    },
    {
      "id": "post_deployment_validation_validateDeployment",
      "name": "Post Deployment Validation - Validatedeployment",
      "agent": "proof_validator",
      "description": "validate_deployment_success: Final validation and monitoring setup",
      "inputs": [
        "start_and_verify_runSmokeTests"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "validateDeployment completed successfully"
        },
        {
          "choice": "failed",
          "description": "validateDeployment failed"
        }
      ]
    },
    {
      "id": "post_deployment_validation_enableMonitoring",
      "name": "Post Deployment Validation - Enablemonitoring",
      "agent": "task_executor",
      "description": "enable_monitoring: Final validation and monitoring setup",
      "inputs": [
        "post_deployment_validation_validateDeployment"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "enableMonitoring completed successfully"
        },
        {
          "choice": "failed",
          "description": "enableMonitoring failed"
        }
      ]
    },
    {
      "id": "post_deployment_validation_notifyDeploymentSuccess",
      "name": "Post Deployment Validation - Notifydeploymentsuccess",
      "agent": "task_executor",
      "description": "send_notification: Final validation and monitoring setup",
      "inputs": [
        "post_deployment_validation_enableMonitoring"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "notifyDeploymentSuccess completed successfully"
        },
        {
          "choice": "failed",
          "description": "notifyDeploymentSuccess failed"
        }
      ]
    }
  ],
  "metadata": {
    "pipeline_type": "deployment",
    "complexity": "high",
    "tags": [
      "deployment",
      "production",
      "release"
    ],
    "refactored": "2025-01-22 - Converted from actions-based to atomic stages",
    "originalStages": 5,
    "atomicStages": 14
  },
  "flow": {
    "type": "sequential",
    "connections": [
      {
        "from": "pre_deployment_validation_validateDeploymentPackage",
        "to": "pre_deployment_validation_validateTargetEnvironment",
        "condition": "success"
      },
      {
        "from": "pre_deployment_validation_validateDeploymentPackage",
        "to": null,
        "condition": "failed",
        "description": "Pre Deployment Validation - Validatedeploymentpackage failed - END"
      },
      {
        "from": "pre_deployment_validation_validateTargetEnvironment",
        "to": "pre_deployment_validation_backupCurrentVersion",
        "condition": "success"
      },
      {
        "from": "pre_deployment_validation_validateTargetEnvironment",
        "to": null,
        "condition": "failed",
        "description": "Pre Deployment Validation - Validatetargetenvironment failed - END"
      },
      {
        "from": "pre_deployment_validation_backupCurrentVersion",
        "to": "stop_services_stopPoolServer",
        "condition": "success"
      },
      {
        "from": "pre_deployment_validation_backupCurrentVersion",
        "to": null,
        "condition": "failed",
        "description": "Pre Deployment Validation - Backupcurrentversion failed - END"
      },
      {
        "from": "stop_services_stopPoolServer",
        "to": "stop_services_verifyServicesStopped",
        "condition": "success"
      },
      {
        "from": "stop_services_stopPoolServer",
        "to": null,
        "condition": "failed",
        "description": "Stop Services - Stoppoolserver failed - END"
      },
      {
        "from": "stop_services_verifyServicesStopped",
        "to": "deploy_new_version_extractPackage",
        "condition": "success"
      },
      {
        "from": "stop_services_verifyServicesStopped",
        "to": null,
        "condition": "failed",
        "description": "Stop Services - Verifyservicesstopped failed - END"
      },
      {
        "from": "deploy_new_version_extractPackage",
        "to": "deploy_new_version_updateConfiguration",
        "condition": "success"
      },
      {
        "from": "deploy_new_version_extractPackage",
        "to": null,
        "condition": "failed",
        "description": "Deploy New Version - Extractpackage failed - END"
      },
      {
        "from": "deploy_new_version_updateConfiguration",
        "to": "deploy_new_version_setPermissions",
        "condition": "success"
      },
      {
        "from": "deploy_new_version_updateConfiguration",
        "to": null,
        "condition": "failed",
        "description": "Deploy New Version - Updateconfiguration failed - END"
      },
      {
        "from": "deploy_new_version_setPermissions",
        "to": "start_and_verify_startServices",
        "condition": "success"
      },
      {
        "from": "deploy_new_version_setPermissions",
        "to": null,
        "condition": "failed",
        "description": "Deploy New Version - Setpermissions failed - END"
      },
      {
        "from": "start_and_verify_startServices",
        "to": "start_and_verify_runHealthChecks",
        "condition": "success"
      },
      {
        "from": "start_and_verify_startServices",
        "to": null,
        "condition": "failed",
        "description": "Start And Verify - Startservices failed - END"
      },
      {
        "from": "start_and_verify_runHealthChecks",
        "to": "start_and_verify_runSmokeTests",
        "condition": "success"
      },
      {
        "from": "start_and_verify_runHealthChecks",
        "to": null,
        "condition": "failed",
        "description": "Start And Verify - Runhealthchecks failed - END"
      },
      {
        "from": "start_and_verify_runSmokeTests",
        "to": "post_deployment_validation_validateDeployment",
        "condition": "success"
      },
      {
        "from": "start_and_verify_runSmokeTests",
        "to": null,
        "condition": "failed",
        "description": "Start And Verify - Runsmoketests failed - END"
      },
      {
        "from": "post_deployment_validation_validateDeployment",
        "to": "post_deployment_validation_enableMonitoring",
        "condition": "success"
      },
      {
        "from": "post_deployment_validation_validateDeployment",
        "to": null,
        "condition": "failed",
        "description": "Post Deployment Validation - Validatedeployment failed - END"
      },
      {
        "from": "post_deployment_validation_enableMonitoring",
        "to": "post_deployment_validation_notifyDeploymentSuccess",
        "condition": "success"
      },
      {
        "from": "post_deployment_validation_enableMonitoring",
        "to": null,
        "condition": "failed",
        "description": "Post Deployment Validation - Enablemonitoring failed - END"
      },
      {
        "from": "post_deployment_validation_notifyDeploymentSuccess",
        "to": null,
        "condition": "success",
        "description": "Pipeline complete - END"
      },
      {
        "from": "post_deployment_validation_notifyDeploymentSuccess",
        "to": null,
        "condition": "failed",
        "description": "Final stage failed - END"
      }
    ]
  }
}