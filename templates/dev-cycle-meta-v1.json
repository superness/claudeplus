{
  "id": "dev-cycle-meta-v1",
  "name": "Development Cycle Meta-Router V1",
  "description": "Meta-pipeline that classifies requests and routes to appropriate development pipeline (bug-fix or feature-development)",
  "version": "1.0.0",
  "category": "meta",
  "stages": [
    {
      "id": "classify_request",
      "name": "Request Classification",
      "type": "classifier",
      "agent": "request_classifier",
      "description": "Classify user request as bug fix, feature request, refactor, or question",
      "decisions": [
        {"choice": "BUG_FIX", "description": "Request is a bug fix"},
        {"choice": "QUICK_CHANGE", "description": "Request is a simple code modification"},
        {"choice": "FEATURE_REQUEST", "description": "Request is a new feature"},
        {"choice": "REFACTOR", "description": "Request is code refactoring"},
        {"choice": "QUESTION", "description": "Request is a question"}
      ]
    },
    {
      "id": "route_to_bug_pipeline",
      "name": "Bug Fix Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute bug-fix-v1 pipeline for bug fixes",
      "inputs": ["classify_request"],
      "config": {
        "pipeline": "bug-fix-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_quick_change",
      "name": "Quick Code Change",
      "type": "executor",
      "agent": "code_implementer",
      "description": "Handle simple, direct code modifications (1-5 lines)",
      "inputs": ["classify_request"]
    },
    {
      "id": "route_to_feature_pipeline",
      "name": "Feature Development Pipeline",
      "type": "sub_pipeline",
      "agent": "pipeline_executor",
      "description": "Execute feature-development-v1 pipeline for new features",
      "inputs": ["classify_request"],
      "config": {
        "pipeline": "feature-development-v1",
        "inheritContext": true
      }
    },
    {
      "id": "handle_refactor",
      "name": "Handle Refactor Request",
      "type": "executor",
      "agent": "task_executor",
      "description": "Handle code refactoring requests",
      "inputs": ["classify_request"]
    },
    {
      "id": "handle_question",
      "name": "Handle Question",
      "type": "executor",
      "agent": "task_executor",
      "description": "Answer user questions about code or system",
      "inputs": ["classify_request"]
    }
  ],
  "flow": {
    "type": "conditional",
    "description": "Routes to appropriate pipeline based on request classification",
    "connections": [
      {
        "from": "classify_request",
        "to": "route_to_bug_pipeline",
        "condition": "BUG_FIX",
        "description": "Bug detected, route to bug-fix pipeline"
      },
      {
        "from": "classify_request",
        "to": "handle_quick_change",
        "condition": "QUICK_CHANGE",
        "description": "Simple change requested, use direct code implementer"
      },
      {
        "from": "classify_request",
        "to": "route_to_feature_pipeline",
        "condition": "FEATURE_REQUEST",
        "description": "Feature requested, route to feature-development pipeline"
      },
      {
        "from": "classify_request",
        "to": "handle_refactor",
        "condition": "REFACTOR",
        "description": "Refactor requested, use general executor"
      },
      {
        "from": "classify_request",
        "to": "handle_question",
        "condition": "QUESTION",
        "description": "Question asked, provide answer"
      },
      {
        "from": "route_to_bug_pipeline",
        "to": null,
        "condition": "complete",
        "description": "Bug fix pipeline complete - PIPELINE ENDS"
      },
      {
        "from": "handle_quick_change",
        "to": null,
        "condition": "complete",
        "description": "Quick change complete - PIPELINE ENDS"
      },
      {
        "from": "route_to_feature_pipeline",
        "to": null,
        "condition": "complete",
        "description": "Feature development pipeline complete - PIPELINE ENDS"
      },
      {
        "from": "handle_refactor",
        "to": null,
        "condition": "complete",
        "description": "Refactor complete - PIPELINE ENDS"
      },
      {
        "from": "handle_question",
        "to": null,
        "condition": "complete",
        "description": "Question answered - PIPELINE ENDS"
      }
    ]
  },
  "metadata": {
    "tags": ["meta-pipeline", "routing", "development-cycle", "classification"],
    "author": "Claude Plus Development System",
    "subPipelines": ["bug-fix-v1", "feature-development-v1"],
    "purpose": "Intelligent routing based on request type"
  }
}
