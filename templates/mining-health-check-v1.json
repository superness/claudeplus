{
  "id": "mining-health-check-v1",
  "name": "Mining Health Check Pipeline V1",
  "description": "Bitcoin mining infrastructure health monitoring pipeline with network monitoring, mining status checks, diagnostics, and emergency shutdown capabilities",
  "version": "1.0.0",
  "category": "infrastructure",
  "stages": [
    {
      "id": "network_health_check",
      "name": "Network Health Check",
      "type": "monitor",
      "agent": "network_monitor",
      "description": "Monitor Bitcoin network connectivity, peer status, and infrastructure health",
      "decisions": [
        {"choice": "healthy", "description": "Network is healthy, proceed to mining status check"},
        {"choice": "degraded", "description": "Network has issues, run diagnostics"},
        {"choice": "disconnected", "description": "Critical network failure, trigger emergency shutdown"}
      ]
    },
    {
      "id": "mining_status_check",
      "name": "Mining Status Verification",
      "type": "validator",
      "agent": "mining_status_checker",
      "description": "Verify mining operations are functioning correctly",
      "inputs": ["network_health_check"],
      "decisions": [
        {"choice": "mining_operational", "description": "Mining operations healthy and functioning"},
        {"choice": "mining_issues", "description": "Mining has issues, needs attention"},
        {"choice": "mining_stopped", "description": "Mining not operational"}
      ]
    },
    {
      "id": "run_diagnostics",
      "name": "Infrastructure Diagnostics",
      "type": "analyzer",
      "agent": "diagnostics_agent",
      "description": "Diagnose infrastructure issues when network is degraded",
      "inputs": ["network_health_check"],
      "decisions": [
        {"choice": "issues_identified", "description": "Problems identified with remediation plan"},
        {"choice": "needs_manual_intervention", "description": "Complex issues requiring human intervention"},
        {"choice": "cannot_diagnose", "description": "Unable to determine root cause"}
      ]
    },
    {
      "id": "emergency_shutdown",
      "name": "Emergency Shutdown",
      "type": "executor",
      "agent": "emergency_shutdown",
      "description": "Safely halt mining operations when critical network failures detected",
      "inputs": ["network_health_check"],
      "decisions": [
        {"choice": "shutdown_complete", "description": "All systems safely shut down"},
        {"choice": "shutdown_incomplete", "description": "Some components failed to shut down cleanly"},
        {"choice": "shutdown_aborted", "description": "Shutdown aborted due to critical conditions"}
      ]
    }
  ],
  "flow": {
    "type": "conditional",
    "description": "Health monitoring with conditional routing based on network status",
    "connections": [
      {
        "from": "network_health_check",
        "to": "mining_status_check",
        "condition": "healthy",
        "description": "Network healthy, verify mining operations"
      },
      {
        "from": "network_health_check",
        "to": "run_diagnostics",
        "condition": "degraded",
        "description": "Network degraded, run diagnostics"
      },
      {
        "from": "network_health_check",
        "to": "emergency_shutdown",
        "condition": "disconnected",
        "description": "Network disconnected, trigger emergency shutdown"
      },
      {
        "from": "mining_status_check",
        "to": null,
        "condition": "mining_operational",
        "description": "Mining operational - PIPELINE ENDS (all systems healthy)"
      },
      {
        "from": "mining_status_check",
        "to": null,
        "condition": "mining_issues",
        "description": "Mining has issues - PIPELINE ENDS (report for manual review)"
      },
      {
        "from": "mining_status_check",
        "to": null,
        "condition": "mining_stopped",
        "description": "Mining stopped - PIPELINE ENDS (report for manual review)"
      },
      {
        "from": "run_diagnostics",
        "to": null,
        "condition": "issues_identified",
        "description": "Issues identified with remediation plan - PIPELINE ENDS"
      },
      {
        "from": "run_diagnostics",
        "to": null,
        "condition": "needs_manual_intervention",
        "description": "Manual intervention required - PIPELINE ENDS"
      },
      {
        "from": "run_diagnostics",
        "to": null,
        "condition": "cannot_diagnose",
        "description": "Cannot diagnose - PIPELINE ENDS"
      },
      {
        "from": "emergency_shutdown",
        "to": null,
        "condition": "shutdown_complete",
        "description": "Shutdown completed successfully - PIPELINE ENDS"
      },
      {
        "from": "emergency_shutdown",
        "to": null,
        "condition": "shutdown_incomplete",
        "description": "Shutdown incomplete - PIPELINE ENDS (manual cleanup needed)"
      },
      {
        "from": "emergency_shutdown",
        "to": null,
        "condition": "shutdown_aborted",
        "description": "Shutdown aborted - PIPELINE ENDS (critical conditions detected)"
      }
    ]
  },
  "metadata": {
    "tags": ["mining", "health-check", "monitoring", "infrastructure", "bitcoin"],
    "author": "Claude Plus Development System",
    "usesWindowsCommands": false,
    "requiresBrowser": false,
    "requiresBitcoinDaemon": true,
    "monitoringInterval": "continuous",
    "criticalInfrastructure": true,
    "emergencyShutdownCapable": true
  }
}
