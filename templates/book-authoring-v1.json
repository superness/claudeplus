{
  "id": "book-authoring-v1",
  "name": "Book Authoring Pipeline",
  "description": "Iterative book writing workflow: from notes and prompts to drafting, reviewing, editing, and refining until publication-ready",
  "version": "1.0.0",
  "category": "authoring",
  "stages": [
    {
      "id": "content_analysis",
      "name": "Content Analysis",
      "type": "analyzer",
      "agent": "content_analyzer",
      "description": "Analyze existing notes, prompts, and source material to understand the content landscape",
      "decisions": [
        {"choice": "analysis_complete", "description": "Source material analyzed, themes and gaps identified"}
      ]
    },
    {
      "id": "outline_creation",
      "name": "Outline Creation",
      "type": "planner",
      "agent": "book_outliner",
      "description": "Create or refine the chapter/section outline based on analyzed content",
      "inputs": ["content_analysis"],
      "decisions": [
        {"choice": "outline_ready", "description": "Outline structured and ready for drafting"}
      ]
    },
    {
      "id": "outline_review",
      "name": "Outline Review",
      "type": "reviewer",
      "agent": "structure_reviewer",
      "description": "Review outline for logical flow, completeness, and narrative arc",
      "inputs": ["outline_creation"],
      "decisions": [
        {"choice": "APPROVED", "description": "Outline is solid, proceed to drafting"},
        {"choice": "NEEDS_RESTRUCTURE", "description": "Outline needs reorganization"},
        {"choice": "NEEDS_MORE_CONTENT", "description": "Missing sections or depth identified"}
      ]
    },
    {
      "id": "section_drafting",
      "name": "Section Drafting",
      "type": "creator",
      "agent": "book_drafter",
      "description": "Write draft content for the current section/chapter",
      "inputs": ["outline_review"],
      "decisions": [
        {"choice": "draft_complete", "description": "Section draft written"}
      ]
    },
    {
      "id": "content_editing",
      "name": "Content Editing",
      "type": "editor",
      "agent": "content_editor",
      "description": "Edit for clarity, flow, voice consistency, and technical accuracy",
      "inputs": ["section_drafting"],
      "decisions": [
        {"choice": "POLISHED", "description": "Content is clean and ready for review"},
        {"choice": "NEEDS_REWRITE", "description": "Section needs significant rewriting"},
        {"choice": "NEEDS_EXPANSION", "description": "Content is thin, needs more depth"}
      ]
    },
    {
      "id": "quality_review",
      "name": "Quality Review",
      "type": "validator",
      "agent": "quality_reviewer",
      "description": "Final quality check: voice, accuracy, engagement, practical value",
      "inputs": ["content_editing", "outline_creation"],
      "decisions": [
        {"choice": "PUBLICATION_READY", "description": "Section meets publication standards"},
        {"choice": "NEEDS_EDITING", "description": "Minor issues, return to editing"},
        {"choice": "NEEDS_REWRITING", "description": "Major issues, return to drafting"},
        {"choice": "STRUCTURAL_ISSUE", "description": "Section doesn't fit, revisit outline"}
      ]
    },
    {
      "id": "section_finalization",
      "name": "Section Finalization",
      "type": "executor",
      "agent": "section_finalizer",
      "description": "Commit the approved section to the book, update progress tracking",
      "inputs": ["quality_review"],
      "decisions": [
        {"choice": "section_committed", "description": "Section saved to book, ready for next"},
        {"choice": "book_complete", "description": "All sections complete, book ready for final review"}
      ]
    },
    {
      "id": "book_assembly",
      "name": "Book Assembly",
      "type": "executor",
      "agent": "book_assembler",
      "description": "Assemble all sections into cohesive book, add transitions and front/back matter",
      "inputs": ["section_finalization"],
      "decisions": [
        {"choice": "assembly_complete", "description": "Book assembled and ready for final review"}
      ]
    },
    {
      "id": "final_review",
      "name": "Final Book Review",
      "type": "validator",
      "agent": "book_reviewer",
      "description": "Review complete book for consistency, flow, and publication readiness",
      "inputs": ["book_assembly"],
      "decisions": [
        {"choice": "APPROVED", "description": "Book is publication-ready"},
        {"choice": "NEEDS_SECTIONS_REVISED", "description": "Specific sections need revision"},
        {"choice": "NEEDS_RESTRUCTURE", "description": "Book structure needs reorganization"}
      ]
    }
  ],
  "flow": {
    "type": "conditional",
    "description": "Iterative writing workflow with quality gates at each stage",
    "connections": [
      {
        "from": "content_analysis",
        "to": "outline_creation",
        "condition": "analysis_complete",
        "description": "Content analyzed, create outline"
      },
      {
        "from": "outline_creation",
        "to": "outline_review",
        "condition": "outline_ready",
        "description": "Outline created, review it"
      },
      {
        "from": "outline_review",
        "to": "section_drafting",
        "condition": "APPROVED",
        "description": "Outline approved, start drafting"
      },
      {
        "from": "outline_review",
        "to": "outline_creation",
        "condition": "NEEDS_RESTRUCTURE",
        "description": "Restructure needed, revise outline"
      },
      {
        "from": "outline_review",
        "to": "content_analysis",
        "condition": "NEEDS_MORE_CONTENT",
        "description": "More source material needed, re-analyze"
      },
      {
        "from": "section_drafting",
        "to": "content_editing",
        "condition": "draft_complete",
        "description": "Draft complete, edit it"
      },
      {
        "from": "content_editing",
        "to": "quality_review",
        "condition": "POLISHED",
        "description": "Content polished, review quality"
      },
      {
        "from": "content_editing",
        "to": "section_drafting",
        "condition": "NEEDS_REWRITE",
        "description": "Rewrite needed, return to drafting"
      },
      {
        "from": "content_editing",
        "to": "section_drafting",
        "condition": "NEEDS_EXPANSION",
        "description": "Expansion needed, add more content"
      },
      {
        "from": "quality_review",
        "to": "section_finalization",
        "condition": "PUBLICATION_READY",
        "description": "Quality approved, finalize section"
      },
      {
        "from": "quality_review",
        "to": "content_editing",
        "condition": "NEEDS_EDITING",
        "description": "Minor issues, return to editing"
      },
      {
        "from": "quality_review",
        "to": "section_drafting",
        "condition": "NEEDS_REWRITING",
        "description": "Major issues, rewrite section"
      },
      {
        "from": "quality_review",
        "to": "outline_creation",
        "condition": "STRUCTURAL_ISSUE",
        "description": "Structural problem, revisit outline"
      },
      {
        "from": "section_finalization",
        "to": "section_drafting",
        "condition": "section_committed",
        "description": "Section done, draft next section"
      },
      {
        "from": "section_finalization",
        "to": "book_assembly",
        "condition": "book_complete",
        "description": "All sections done, assemble book"
      },
      {
        "from": "book_assembly",
        "to": "final_review",
        "condition": "assembly_complete",
        "description": "Book assembled, final review"
      },
      {
        "from": "final_review",
        "to": null,
        "condition": "APPROVED",
        "description": "Book approved - PIPELINE ENDS"
      },
      {
        "from": "final_review",
        "to": "content_editing",
        "condition": "NEEDS_SECTIONS_REVISED",
        "description": "Sections need work, return to editing"
      },
      {
        "from": "final_review",
        "to": "outline_creation",
        "condition": "NEEDS_RESTRUCTURE",
        "description": "Structure issues, reorganize outline"
      }
    ]
  },
  "metadata": {
    "tags": ["book", "authoring", "writing", "iterative", "content-creation"],
    "author": "Claude Plus Development System",
    "targetProject": "/mnt/c/github/developingwithai/",
    "workingFiles": {
      "notes": "BOOK-NOTES.md",
      "outline": "OUTLINE.md",
      "chapters": "chapters/"
    }
  }
}
