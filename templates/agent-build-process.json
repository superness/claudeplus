{
  "id": "agent-build-process",
  "name": "Agent Build Process V1",
  "description": "Sub-pipeline for building a single agent with design, review, implementation, validation, and finalization stages. Ensures quality and correctness through multi-stage review process.",
  "version": "1.0.0",
  "category": "development",
  "stages": [
    {
      "id": "design_specification",
      "name": "Design Agent Specification",
      "type": "planner",
      "agent": "task_planner",
      "description": "Create comprehensive design specification for the agent",
      "decisions": [
        {"choice": "design_complete", "description": "Design specification completed"}
      ]
    },
    {
      "id": "design_review",
      "name": "Review Agent Design",
      "type": "validator",
      "agent": "discerning_expert",
      "description": "Review and approve/reject the design specification",
      "inputs": ["design_specification"],
      "decisions": [
        {"choice": "APPROVED", "description": "Design approved, proceed to implementation"},
        {"choice": "REJECTED", "description": "Design rejected, needs revision"}
      ]
    },
    {
      "id": "implement_component",
      "name": "Implement Agent",
      "type": "executor",
      "agent": "agent_architect",
      "description": "Build the agent JSON file based on approved design",
      "inputs": ["design_specification", "design_review"],
      "decisions": [
        {"choice": "component_created", "description": "Agent JSON file created"}
      ]
    },
    {
      "id": "validate_artifact",
      "name": "Validate Agent Artifact",
      "type": "validator",
      "agent": "component_validator",
      "description": "Validate the agent JSON for correctness and schema compliance",
      "inputs": ["implement_component"],
      "decisions": [
        {"choice": "valid", "description": "Agent artifact passes all validation checks"},
        {"choice": "invalid", "description": "Agent artifact has errors"},
        {"choice": "error", "description": "Unable to read or validate agent file"}
      ]
    },
    {
      "id": "finalize_component",
      "name": "Finalize Agent",
      "type": "validator",
      "agent": "proof_validator",
      "description": "Final review and confirmation agent is ready for use",
      "inputs": ["validate_artifact", "implement_component"],
      "decisions": [
        {"choice": "APPROVED", "description": "Agent finalized and ready for use"},
        {"choice": "NEEDS_FIXES", "description": "Minor issues need fixing"},
        {"choice": "FUNDAMENTAL_ISSUE", "description": "Major problems require redesign"}
      ]
    }
  ],
  "flow": {
    "type": "conditional",
    "description": "Agent build workflow with design review and validation loops",
    "connections": [
      {
        "from": "design_specification",
        "to": "design_review",
        "condition": "design_complete",
        "description": "Design spec complete, submit for review"
      },
      {
        "from": "design_review",
        "to": "implement_component",
        "condition": "APPROVED",
        "description": "Design approved, implement agent"
      },
      {
        "from": "design_review",
        "to": "design_specification",
        "condition": "REJECTED",
        "description": "Design rejected, revise specification"
      },
      {
        "from": "implement_component",
        "to": "validate_artifact",
        "condition": "component_created",
        "description": "Agent created, validate artifact"
      },
      {
        "from": "validate_artifact",
        "to": "finalize_component",
        "condition": "valid",
        "description": "Validation passed, finalize agent"
      },
      {
        "from": "validate_artifact",
        "to": "implement_component",
        "condition": "invalid",
        "description": "Validation failed, fix implementation"
      },
      {
        "from": "validate_artifact",
        "to": "implement_component",
        "condition": "error",
        "description": "Validation error, retry implementation"
      },
      {
        "from": "finalize_component",
        "to": null,
        "condition": "APPROVED",
        "description": "Agent finalized and ready - PIPELINE ENDS"
      },
      {
        "from": "finalize_component",
        "to": "implement_component",
        "condition": "NEEDS_FIXES",
        "description": "Minor fixes needed, revise implementation"
      },
      {
        "from": "finalize_component",
        "to": "design_review",
        "condition": "FUNDAMENTAL_ISSUE",
        "description": "Major issues, return to design review"
      }
    ]
  },
  "metadata": {
    "tags": ["agent-creation", "meta-pipeline", "quality-assurance"],
    "author": "Claude Plus Development System",
    "usesWindowsCommands": false
  }
}
