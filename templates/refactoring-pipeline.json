{
  "id": "refactoring-pipeline",
  "name": "Refactoring Pipeline",
  "version": "2.0.0",
  "description": "Safe code refactoring pipeline with comprehensive validation",
  "author": "SuperCoinServ Meta-Pipeline System",
  "category": "development",
  "stages": [
    {
      "id": "analyze_refactoring_target_analyzeCurrentCode",
      "name": "Analyze Refactoring Target - Analyzecurrentcode",
      "agent": "task_planner",
      "description": "analyze_code_quality: Analyze code to be refactored and create refactoring plan",
      "inputs": [],
      "decisions": [
        {
          "choice": "success",
          "description": "analyzeCurrentCode completed successfully"
        },
        {
          "choice": "failed",
          "description": "analyzeCurrentCode failed"
        }
      ]
    },
    {
      "id": "analyze_refactoring_target_createRefactoringPlan",
      "name": "Analyze Refactoring Target - Createrefactoringplan",
      "agent": "task_planner",
      "description": "plan_refactoring: Analyze code to be refactored and create refactoring plan",
      "inputs": [
        "analyze_refactoring_target_analyzeCurrentCode"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "createRefactoringPlan completed successfully"
        },
        {
          "choice": "failed",
          "description": "createRefactoringPlan failed"
        }
      ]
    },
    {
      "id": "analyze_refactoring_target_establishBaseline",
      "name": "Analyze Refactoring Target - Establishbaseline",
      "agent": "task_planner",
      "description": "capture_behavioral_baseline: Analyze code to be refactored and create refactoring plan",
      "inputs": [
        "analyze_refactoring_target_createRefactoringPlan"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "establishBaseline completed successfully"
        },
        {
          "choice": "failed",
          "description": "establishBaseline failed"
        }
      ]
    },
    {
      "id": "execute_refactoring_createRefactoringBranch",
      "name": "Execute Refactoring - Createrefactoringbranch",
      "agent": "task_executor",
      "description": "git_create_branch: Execute refactoring with continuous validation",
      "inputs": [
        "analyze_refactoring_target_establishBaseline"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "createRefactoringBranch completed successfully"
        },
        {
          "choice": "failed",
          "description": "createRefactoringBranch failed"
        }
      ]
    },
    {
      "id": "execute_refactoring_performRefactoring",
      "name": "Execute Refactoring - Performrefactoring",
      "agent": "task_executor",
      "description": "execute_refactoring_plan: Execute refactoring with continuous validation",
      "inputs": [
        "execute_refactoring_createRefactoringBranch"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "performRefactoring completed successfully"
        },
        {
          "choice": "failed",
          "description": "performRefactoring failed"
        }
      ]
    },
    {
      "id": "execute_refactoring_buildRefactoredCode",
      "name": "Execute Refactoring - Buildrefactoredcode",
      "agent": "task_executor",
      "description": "build_solution: Execute refactoring with continuous validation",
      "inputs": [
        "execute_refactoring_performRefactoring"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "buildRefactoredCode completed successfully"
        },
        {
          "choice": "failed",
          "description": "buildRefactoredCode failed"
        }
      ]
    },
    {
      "id": "execute_refactoring_runBaselineTests",
      "name": "Execute Refactoring - Runbaselinetests",
      "agent": "task_executor",
      "description": "execute_baseline_tests: Execute refactoring with continuous validation",
      "inputs": [
        "execute_refactoring_buildRefactoredCode"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "runBaselineTests completed successfully"
        },
        {
          "choice": "failed",
          "description": "runBaselineTests failed"
        }
      ]
    },
    {
      "id": "comprehensive_validation_runFullTestSuite",
      "name": "Comprehensive Validation - Runfulltestsuite",
      "agent": "cycle_integration_tester",
      "description": "execute_all_tests: Validate refactoring with complete test suite and mining cycle",
      "inputs": [
        "execute_refactoring_runBaselineTests"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "runFullTestSuite completed successfully"
        },
        {
          "choice": "failed",
          "description": "runFullTestSuite failed"
        }
      ]
    },
    {
      "id": "comprehensive_validation_validateWithMiningCycle",
      "name": "Comprehensive Validation - Validatewithminingcycle",
      "agent": "cycle_integration_tester",
      "description": "run_complete_mining_cycle: Validate refactoring with complete test suite and mining cycle",
      "inputs": [
        "comprehensive_validation_runFullTestSuite"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "validateWithMiningCycle completed successfully"
        },
        {
          "choice": "failed",
          "description": "validateWithMiningCycle failed"
        }
      ]
    },
    {
      "id": "comprehensive_validation_performanceComparison",
      "name": "Comprehensive Validation - Performancecomparison",
      "agent": "cycle_integration_tester",
      "description": "compare_performance_metrics: Validate refactoring with complete test suite and mining cycle",
      "inputs": [
        "comprehensive_validation_validateWithMiningCycle"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "performanceComparison completed successfully"
        },
        {
          "choice": "failed",
          "description": "performanceComparison failed"
        }
      ]
    },
    {
      "id": "quality_and_approval_validateCodeQuality",
      "name": "Quality And Approval - Validatecodequality",
      "agent": "proof_validator",
      "description": "assess_refactoring_quality: Final quality checks and approval",
      "inputs": [
        "comprehensive_validation_performanceComparison"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "validateCodeQuality completed successfully"
        },
        {
          "choice": "failed",
          "description": "validateCodeQuality failed"
        }
      ]
    },
    {
      "id": "quality_and_approval_verifyBehaviorPreservation",
      "name": "Quality And Approval - Verifybehaviorpreservation",
      "agent": "proof_validator",
      "description": "verify_behavior_unchanged: Final quality checks and approval",
      "inputs": [
        "quality_and_approval_validateCodeQuality"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "verifyBehaviorPreservation completed successfully"
        },
        {
          "choice": "failed",
          "description": "verifyBehaviorPreservation failed"
        }
      ]
    },
    {
      "id": "quality_and_approval_approveRefactoring",
      "name": "Quality And Approval - Approverefactoring",
      "agent": "proof_validator",
      "description": "final_refactoring_approval: Final quality checks and approval",
      "inputs": [
        "quality_and_approval_verifyBehaviorPreservation"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "approveRefactoring completed successfully"
        },
        {
          "choice": "failed",
          "description": "approveRefactoring failed"
        }
      ]
    },
    {
      "id": "finalize_refactoring_generateRefactoringDoc",
      "name": "Finalize Refactoring - Generaterefactoringdoc",
      "agent": "task_executor",
      "description": "document_refactoring: Document and merge refactoring",
      "inputs": [
        "quality_and_approval_approveRefactoring"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "generateRefactoringDoc completed successfully"
        },
        {
          "choice": "failed",
          "description": "generateRefactoringDoc failed"
        }
      ]
    },
    {
      "id": "finalize_refactoring_createPullRequest",
      "name": "Finalize Refactoring - Createpullrequest",
      "agent": "task_executor",
      "description": "create_pull_request: Document and merge refactoring",
      "inputs": [
        "finalize_refactoring_generateRefactoringDoc"
      ],
      "decisions": [
        {
          "choice": "success",
          "description": "createPullRequest completed successfully"
        },
        {
          "choice": "failed",
          "description": "createPullRequest failed"
        }
      ]
    }
  ],
  "metadata": {
    "pipeline_type": "development",
    "complexity": "high",
    "tags": [
      "refactoring",
      "quality",
      "safety"
    ],
    "refactored": "2025-01-22 - Converted from actions-based to atomic stages",
    "originalStages": 5,
    "atomicStages": 15
  },
  "flow": {
    "type": "sequential",
    "connections": [
      {
        "from": "analyze_refactoring_target_analyzeCurrentCode",
        "to": "analyze_refactoring_target_createRefactoringPlan",
        "condition": "success"
      },
      {
        "from": "analyze_refactoring_target_analyzeCurrentCode",
        "to": null,
        "condition": "failed",
        "description": "Analyze Refactoring Target - Analyzecurrentcode failed - END"
      },
      {
        "from": "analyze_refactoring_target_createRefactoringPlan",
        "to": "analyze_refactoring_target_establishBaseline",
        "condition": "success"
      },
      {
        "from": "analyze_refactoring_target_createRefactoringPlan",
        "to": null,
        "condition": "failed",
        "description": "Analyze Refactoring Target - Createrefactoringplan failed - END"
      },
      {
        "from": "analyze_refactoring_target_establishBaseline",
        "to": "execute_refactoring_createRefactoringBranch",
        "condition": "success"
      },
      {
        "from": "analyze_refactoring_target_establishBaseline",
        "to": null,
        "condition": "failed",
        "description": "Analyze Refactoring Target - Establishbaseline failed - END"
      },
      {
        "from": "execute_refactoring_createRefactoringBranch",
        "to": "execute_refactoring_performRefactoring",
        "condition": "success"
      },
      {
        "from": "execute_refactoring_createRefactoringBranch",
        "to": null,
        "condition": "failed",
        "description": "Execute Refactoring - Createrefactoringbranch failed - END"
      },
      {
        "from": "execute_refactoring_performRefactoring",
        "to": "execute_refactoring_buildRefactoredCode",
        "condition": "success"
      },
      {
        "from": "execute_refactoring_performRefactoring",
        "to": null,
        "condition": "failed",
        "description": "Execute Refactoring - Performrefactoring failed - END"
      },
      {
        "from": "execute_refactoring_buildRefactoredCode",
        "to": "execute_refactoring_runBaselineTests",
        "condition": "success"
      },
      {
        "from": "execute_refactoring_buildRefactoredCode",
        "to": null,
        "condition": "failed",
        "description": "Execute Refactoring - Buildrefactoredcode failed - END"
      },
      {
        "from": "execute_refactoring_runBaselineTests",
        "to": "comprehensive_validation_runFullTestSuite",
        "condition": "success"
      },
      {
        "from": "execute_refactoring_runBaselineTests",
        "to": null,
        "condition": "failed",
        "description": "Execute Refactoring - Runbaselinetests failed - END"
      },
      {
        "from": "comprehensive_validation_runFullTestSuite",
        "to": "comprehensive_validation_validateWithMiningCycle",
        "condition": "success"
      },
      {
        "from": "comprehensive_validation_runFullTestSuite",
        "to": null,
        "condition": "failed",
        "description": "Comprehensive Validation - Runfulltestsuite failed - END"
      },
      {
        "from": "comprehensive_validation_validateWithMiningCycle",
        "to": "comprehensive_validation_performanceComparison",
        "condition": "success"
      },
      {
        "from": "comprehensive_validation_validateWithMiningCycle",
        "to": null,
        "condition": "failed",
        "description": "Comprehensive Validation - Validatewithminingcycle failed - END"
      },
      {
        "from": "comprehensive_validation_performanceComparison",
        "to": "quality_and_approval_validateCodeQuality",
        "condition": "success"
      },
      {
        "from": "comprehensive_validation_performanceComparison",
        "to": null,
        "condition": "failed",
        "description": "Comprehensive Validation - Performancecomparison failed - END"
      },
      {
        "from": "quality_and_approval_validateCodeQuality",
        "to": "quality_and_approval_verifyBehaviorPreservation",
        "condition": "success"
      },
      {
        "from": "quality_and_approval_validateCodeQuality",
        "to": null,
        "condition": "failed",
        "description": "Quality And Approval - Validatecodequality failed - END"
      },
      {
        "from": "quality_and_approval_verifyBehaviorPreservation",
        "to": "quality_and_approval_approveRefactoring",
        "condition": "success"
      },
      {
        "from": "quality_and_approval_verifyBehaviorPreservation",
        "to": null,
        "condition": "failed",
        "description": "Quality And Approval - Verifybehaviorpreservation failed - END"
      },
      {
        "from": "quality_and_approval_approveRefactoring",
        "to": "finalize_refactoring_generateRefactoringDoc",
        "condition": "success"
      },
      {
        "from": "quality_and_approval_approveRefactoring",
        "to": null,
        "condition": "failed",
        "description": "Quality And Approval - Approverefactoring failed - END"
      },
      {
        "from": "finalize_refactoring_generateRefactoringDoc",
        "to": "finalize_refactoring_createPullRequest",
        "condition": "success"
      },
      {
        "from": "finalize_refactoring_generateRefactoringDoc",
        "to": null,
        "condition": "failed",
        "description": "Finalize Refactoring - Generaterefactoringdoc failed - END"
      },
      {
        "from": "finalize_refactoring_createPullRequest",
        "to": null,
        "condition": "success",
        "description": "Pipeline complete - END"
      },
      {
        "from": "finalize_refactoring_createPullRequest",
        "to": null,
        "condition": "failed",
        "description": "Final stage failed - END"
      }
    ]
  }
}