<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Game Studio</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header id="header">
      <div class="logo">AI Game Studio</div>
      <div id="user-area">
        <span id="user-email"></span>
        <button id="logout-btn" class="btn-secondary">Logout</button>
      </div>
    </header>

    <!-- Auth Screen -->
    <div id="auth-screen" class="screen">
      <div class="auth-container">
        <h1>AI Game Studio</h1>
        <p class="tagline">Describe your game. We'll build it.</p>

        <div class="auth-tabs">
          <button class="tab active" data-tab="login">Login</button>
          <button class="tab" data-tab="signup">Sign Up</button>
        </div>

        <form id="login-form" class="auth-form">
          <input type="email" id="login-email" placeholder="Email" required>
          <input type="password" id="login-password" placeholder="Password" required>
          <button type="submit" class="btn-primary">Login</button>
          <div class="error-message" id="login-error"></div>
        </form>

        <form id="signup-form" class="auth-form hidden">
          <input type="email" id="signup-email" placeholder="Email" required>
          <input type="password" id="signup-password" placeholder="Password (min 6 chars)" required minlength="6">
          <button type="submit" class="btn-primary">Create Account</button>
          <div class="error-message" id="signup-error"></div>
        </form>
      </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboard-screen" class="screen hidden">
      <div class="dashboard-container">
        <div class="dashboard-header">
          <h2>Your Games</h2>
          <button id="new-game-btn" class="btn-primary">+ New Game</button>
        </div>

        <div id="projects-list" class="projects-grid">
          <!-- Projects populated by JS -->
        </div>

        <div id="no-projects" class="empty-state hidden">
          <h3>No games yet</h3>
          <p>Create your first game by clicking the button above!</p>
        </div>
      </div>

      <!-- New Game Modal -->
      <div id="new-game-modal" class="modal hidden">
        <div class="modal-content">
          <h2>Create a New Game</h2>
          <form id="new-game-form">
            <label for="game-name">Game Name</label>
            <input type="text" id="game-name" placeholder="My Awesome Game" required>

            <label for="game-type">Game Type</label>
            <select id="game-type">
              <option value="2d">2D (Phaser.js)</option>
              <option value="3d">3D (Three.js)</option>
            </select>

            <label for="game-idea">Describe Your Game</label>
            <textarea id="game-idea" rows="6" placeholder="A space trading game where players can mine asteroids, trade goods between space stations, engage in combat with pirates, and build their own fleet..." required></textarea>

            <div class="modal-actions">
              <button type="button" class="btn-secondary" id="cancel-new-game">Cancel</button>
              <button type="submit" class="btn-primary">Create Game</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Studio Screen -->
    <div id="studio-screen" class="screen hidden">
      <div class="studio-container">
        <!-- Left Panel: Chat -->
        <div class="panel chat-panel">
          <div class="panel-header">
            <button id="back-to-dashboard" class="btn-icon">&larr;</button>
            <h3 id="project-name">Game Name</h3>
            <span id="project-status" class="status-badge">designing</span>
          </div>

          <div id="chat-messages" class="chat-messages">
            <!-- Messages populated by JS -->
          </div>

          <div id="progress-indicator" class="progress-indicator hidden">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 0%"></div>
            </div>
            <span class="progress-text">Starting...</span>
          </div>

          <form id="chat-form" class="chat-input">
            <textarea id="chat-input" placeholder="Describe a feature or change..." rows="2"></textarea>
            <button type="submit" class="btn-primary">Send</button>
          </form>
        </div>

        <!-- Center Panel: Game Preview -->
        <div class="panel preview-panel">
          <div class="panel-header">
            <h3>Live Preview</h3>
            <div class="preview-controls">
              <button id="refresh-preview" class="btn-icon" title="Refresh">&#x21bb;</button>
              <button id="fullscreen-preview" class="btn-icon" title="Fullscreen">&#x26F6;</button>
            </div>
          </div>
          <div class="preview-container">
            <iframe id="game-iframe" src="about:blank"></iframe>
            <div id="preview-placeholder" class="preview-placeholder">
              <p>Your game will appear here once the first build completes.</p>
            </div>
          </div>
          <div class="game-url">
            <span>Game URL:</span>
            <a id="game-url-link" href="#" target="_blank"></a>
          </div>
        </div>

        <!-- Right Panel: Work Queue -->
        <div class="panel queue-panel">
          <div class="panel-header">
            <h3>Work Queue</h3>
          </div>

          <div class="queue-section">
            <h4>In Progress</h4>
            <div id="current-work" class="queue-items">
              <div class="empty-queue">Nothing running</div>
            </div>
          </div>

          <div class="queue-section">
            <h4>Queued</h4>
            <div id="queued-items" class="queue-items">
              <div class="empty-queue">No items queued</div>
            </div>
          </div>

          <div class="queue-section">
            <h4>Completed</h4>
            <div id="completed-items" class="queue-items">
              <div class="empty-queue">No completed items</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>
